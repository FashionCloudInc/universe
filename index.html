<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Universe by crossfilter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Universe</h1>
      <h2 class="project-tagline">The fastest way to query and explore multivariate datasets</h2>
      <a href="https://github.com/crossfilter/universe" class="btn">View on GitHub</a>
      <a href="https://github.com/crossfilter/universe/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/crossfilter/universe/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="universe" class="anchor" href="#universe" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Universe</h1>

<p><a href="https://gitter.im/crossfilter/universe?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/crossfilter/universe.svg" alt="Join the chat at https://gitter.im/crossfilter/universe"></a></p>

<p><a href="https://travis-ci.org/crossfilter/universe"><img src="https://travis-ci.org/crossfilter/universe.svg?branch=master" alt="Build Status"></a> <a href="https://codeclimate.com/github/crossfilter/universe"><img src="https://codeclimate.com/github/crossfilter/universe/badges/gpa.svg" alt="Code Climate"></a></p>

<h2>
<a id="the-easiest-and-fastest-way-to-explore-your-data" class="anchor" href="#the-easiest-and-fastest-way-to-explore-your-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The easiest and fastest way to explore your data</h2>

<p>Before Universe, exploring and filtering large datasets in javascript meant constant data looping, complicated indexing, and countless lines of code to dissect your data.</p>

<p>With Universe, you can be there in just a few lines of code. You've got better things to do than write intense map-reduce functions or learn the intricate inner-workings of <a href="https://github.com/crossfilter/crossfilter">Crossfilter</a> ;)</p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Simple, yet powerful query syntax</li>
<li>Built on, and tightly integrated with  <a href="https://github.com/crossfilter/crossfilter">Crossfilter</a>, and <a href="https://github.com/crossfilter/reductio">Reductio</a> - the fastest multi-dimensional JS data frameworks available</li>
<li>Real-time updates to query results as you filter</li>
<li>Flexible filtering system</li>
<li>Automatic and invisible management of data indexing and memory</li>
<li>Post Aggregation</li>
</ul>

<h2>
<a id="features-in-the-pipeline" class="anchor" href="#features-in-the-pipeline" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features in the Pipeline</h2>

<ul>
<li>Query Joins</li>
<li>Query Macros</li>
<li>Sub Queries</li>
<li>To help contribute, join us at  <a href="https://gitter.im/crossfilter/universe?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/crossfilter/universe.svg" alt="Join the chat at https://gitter.im/crossfilter/universe"></a>
</li>
</ul>

<h2>
<a id="demos" class="anchor" href="#demos" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demos</h2>

<ul>
<li>
<a href="http://codepen.io/tannerlinsley/pen/oxjyvg?editors=0010">Basic Usage</a> (Codepen)</li>
</ul>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#api">API</a>
</h2>

<ul>
<li>
<p><a href="#api-universe">universe()</a></p>

<ul>
<li><a href="#api-query">.query()</a></li>
<li><a href="#api-filter">.filter()</a></li>
<li><a href="#api-column">.column()</a></li>
<li><a href="#api-clear">.clear()</a></li>
<li><a href="#api-add">.add()</a></li>
<li><a href="#api-remove">.remove()</a></li>
</ul>
</li>
<li>
<p><a href="#post-aggregation">Post Aggregation</a></p>

<ul>
<li><a href="#post-aggregation-post">.post()</a></li>
</ul>
</li>
<li><a href="#pro-tips">Pro Tips</a></li>
</ul>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h3>

<p><strong>NPM</strong></p>

<div class="highlight highlight-source-shell"><pre>npm install universe --save</pre></div>

<p><strong>Download</strong> from the <a href="https://github.com/crossfilter/universe/releases">releases</a> page. Serve the universe.js or universe.min.js file in the top-level directory as part of your application.</p>

<h3>
<a id="create-a-new-universe" class="anchor" href="#create-a-new-universe" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create a new Universe</h3>

<p>Pass <code>universe</code> an array of objects or a Crossfilter instance:</p>

<div class="highlight highlight-source-js"><pre>
<span class="pl-k">var</span> universe <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>universe<span class="pl-pds">'</span></span>)

<span class="pl-k">var</span> myUniverse <span class="pl-k">=</span> <span class="pl-en">universe</span>([
    {date<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>2011-11-14T16:17:54Z<span class="pl-pds">"</span></span>, quantity<span class="pl-k">:</span> <span class="pl-c1">2</span>, total<span class="pl-k">:</span> <span class="pl-c1">190</span>, tip<span class="pl-k">:</span> <span class="pl-c1">100</span>, type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>tab<span class="pl-pds">"</span></span>, productIDs<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>]},
    {date<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>2011-11-14T16:20:19Z<span class="pl-pds">"</span></span>, quantity<span class="pl-k">:</span> <span class="pl-c1">2</span>, total<span class="pl-k">:</span> <span class="pl-c1">190</span>, tip<span class="pl-k">:</span> <span class="pl-c1">100</span>, type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>tab<span class="pl-pds">"</span></span>, productIDs<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">"</span>001<span class="pl-pds">"</span></span>,  <span class="pl-s"><span class="pl-pds">"</span>005<span class="pl-pds">"</span></span>]},
    {date<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>2011-11-14T16:28:54Z<span class="pl-pds">"</span></span>, quantity<span class="pl-k">:</span> <span class="pl-c1">1</span>, total<span class="pl-k">:</span> <span class="pl-c1">300</span>, tip<span class="pl-k">:</span> <span class="pl-c1">200</span>, type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>visa<span class="pl-pds">"</span></span>, productIDs<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">"</span>004<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>005<span class="pl-pds">"</span></span>]},
    <span class="pl-k">...</span>
  ])
  .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
    <span class="pl-c">// And now you're ready to query! :)</span>
    <span class="pl-k">return</span> myUniverse
  })</pre></div>

<h3>
<a id="query-your-data" class="anchor" href="#query-your-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Query your data</h3>

<div class="highlight highlight-source-js"><pre>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-smi">myUniverse</span>.<span class="pl-en">query</span>({
    groupBy<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span> <span class="pl-c">// GroupBy the type key</span>
    columns<span class="pl-k">:</span> {
      $count<span class="pl-k">:</span> <span class="pl-c1">true</span>, <span class="pl-c">// Count the number of records</span>
      quantity<span class="pl-k">:</span> { <span class="pl-c">// Create a custom 'quantity' column</span>
        $sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>quantity<span class="pl-pds">'</span></span> <span class="pl-c">// Sum the quantity column</span>
      },
    },
    <span class="pl-c">// Limit selection to rows where quantity is greater than 50</span>
    filter<span class="pl-k">:</span> {
      quantity<span class="pl-k">:</span> {
        $gt<span class="pl-k">:</span> <span class="pl-c1">50</span>
      }
    },
  })

  <span class="pl-c">// Optionally post-aggregate your data</span>
  <span class="pl-c">// Reduce all results after 5 to a single result using sums</span>
  <span class="pl-smi">myUniverse</span>.<span class="pl-en">squash</span>(<span class="pl-c1">5</span>, <span class="pl-c1">null</span>, {
    count<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>$sum<span class="pl-pds">'</span></span>,
    quantity<span class="pl-k">:</span> {
      sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>$sum<span class="pl-pds">'</span></span>
    }
  })

  <span class="pl-c">// See Post-Aggregations for more information</span>
})</pre></div>

<h3>
<a id="use-your-data" class="anchor" href="#use-your-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Use your data</h3>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
  <span class="pl-c">// Use your data for tables, charts, data visualiztion, etc.</span>
  <span class="pl-smi">res</span>.<span class="pl-c1">data</span> <span class="pl-k">===</span> [
    {<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>cash<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>count<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">2</span>,<span class="pl-s"><span class="pl-pds">"</span>quantity<span class="pl-pds">"</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>sum<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">3</span>}}},
    {<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>tab<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>count<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">8</span>,<span class="pl-s"><span class="pl-pds">"</span>quantity<span class="pl-pds">"</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>sum<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">16</span>}}},
    {<span class="pl-s"><span class="pl-pds">"</span>key<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>visa<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>count<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">2</span>,<span class="pl-s"><span class="pl-pds">"</span>quantity<span class="pl-pds">"</span></span><span class="pl-k">:</span> {<span class="pl-s"><span class="pl-pds">"</span>sum<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">2</span>}}}
  ]

  <span class="pl-c">// Or plost the data in DC.js using the underlying crossfilter dimension and group</span>
  <span class="pl-smi">dc</span>.<span class="pl-en">pieChart</span>(<span class="pl-s"><span class="pl-pds">'</span>#chart<span class="pl-pds">'</span></span>)
    .<span class="pl-en">dimension</span>(<span class="pl-smi">res</span>.<span class="pl-smi">dimension</span>)
    .<span class="pl-en">group</span>(<span class="pl-smi">res</span>.<span class="pl-smi">group</span>)

  <span class="pl-c">// Pass the query's universe instance to keep chaining</span>
  <span class="pl-k">return</span> <span class="pl-smi">res</span>.<span class="pl-smi">universe</span>
})</pre></div>

<h3>
<a id="explore-your-data" class="anchor" href="#explore-your-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Explore your data</h3>

<p>As you filter your data on the universe level, every query's result is updated in real-time to reflect changes in aggregation</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// Filter records where 'type' === 'visa'</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>) {
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filter</span>(<span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>visa<span class="pl-pds">'</span></span>)
})

<span class="pl-c">// Filter records where 'type' === 'visa' or 'tab'</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>) {
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filter</span>(<span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>visa<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>tab<span class="pl-pds">'</span></span>])
})

<span class="pl-c">// Filter records where 'total' is between 50 and 100</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>) {
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filter</span>(<span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, [<span class="pl-c1">50</span>, <span class="pl-c1">10</span>], <span class="pl-c1">true</span>)
})

<span class="pl-c">// Filter records using an expressive and JSON friendly query syntax</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>) {
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filter</span>(<span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, {
    $lt<span class="pl-k">:</span> { <span class="pl-c">// Filter to results where total is less than</span>
      <span class="pl-s"><span class="pl-pds">'</span>$get(total)<span class="pl-pds">'</span></span><span class="pl-k">:</span> { <span class="pl-c">// the "total" property from</span>
        <span class="pl-s"><span class="pl-pds">'</span>$nthLast(3)<span class="pl-pds">'</span></span><span class="pl-k">:</span> { <span class="pl-c">// the 3rd to the last row from</span>
          $column<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>date<span class="pl-pds">'</span></span> <span class="pl-c">// the dataset sorted by the date column</span>
        }
      }
    }
  })
})

<span class="pl-c">// Or if you're feeling powerful, just write your own custom filter function</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filter</span>({
    <span class="pl-en">total</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">row</span>){
      <span class="pl-k">return</span> (<span class="pl-smi">row</span>.<span class="pl-smi">quantity</span> <span class="pl-k">*</span> <span class="pl-smi">row</span>.<span class="pl-smi">sum</span>) <span class="pl-k">&gt;</span> <span class="pl-c1">50</span>
    }
  })
})

<span class="pl-c">// Clear the filters for the 'type' column</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filter</span>(<span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>)
})

<span class="pl-c">// Clear all of the filters</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">filterAll</span>()
})</pre></div>

<h3>
<a id="clean-up" class="anchor" href="#clean-up" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Clean Up</h3>

<div class="highlight highlight-source-js"><pre>
<span class="pl-c">// Remove a column index</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-c1">clear</span>(<span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>)
})

<span class="pl-c">// Remove all columns</span>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-c1">clear</span>()
})</pre></div>

<h2 id="api">
<a id="api-" class="anchor" href="#api-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API <a href="#api">#</a>
</h2>

<h3 id="api-universe">
<a id="universe-data--config--" class="anchor" href="#universe-data--config--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>universe( [data] , {config} ) <a href="#api-universe">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Creates a new universe instance</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>[data]</code> - An array of objects</li>
<li>
<code>{config}</code> - Optional configurations for this Universe instance

<ul>
<li>
<code>{generatedColumns}</code> - An object of keys and their respective accessor functions used to dynamically generate columns.</li>
</ul>
</li>
</ul>
</li>
<li><p>Returns a <code>promise</code> that is resolved with the <strong>universe instance</strong></p></li>
<li>
<p><a href="Create%20a%20new%20Universe">Example</a></p>

<ul>
<li>Generated Columns Example
<code>javascript
universe([
  {day: '1', price: 30, quantity: 3},
  {day: '2', price: 40, quantity: 5}
], {
  generatedColumns: {
    total: function(row){return row.price * row.quantity}
  }
})
  .then(function(myUniverse){
    // data[0].total === 90
    // data[1].total === 200
  })
</code>
</li>
</ul>
</li>
</ul>

<h3 id="api-query">
<a id="query-queryobject--" class="anchor" href="#query-queryobject--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.query( {queryObject} ) <a href="#api-query">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Creates a new query from a universe instance</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>queryObject</code>:

<ul>
<li>
<code>groupBy</code> - Exactly what it sounds like.  It groups the records by this column key</li>
<li>
<code>select</code> - An object of column aggregations and/or column names

<ul>
<li>
<code>$aggregation</code> - Aggregations are prefixed with a <code>$</code>
</li>
<li>
<code>columnName</code> - Creates a nested column with the name provided</li>
</ul>
</li>
<li>
<code>filter</code> - A filter object that is applied to the query (similar to a <code>where</code> clause in mySQL)</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Returns</p>

<ul>
<li>
<code>promise</code>, resolved with a <strong>query results object</strong>

<ul>
<li>
<code>data</code> - The result of the query</li>
<li>
<code>group</code> - The crossfilter/reductio group used to build the query</li>
<li>
<code>dimension</code> - The crossfilter dimension used to build the query</li>
<li>
<code>crossfilter</code> - The crossfilter that runs this universe</li>
<li>
<code>universe</code> - The current instance of the universe.  Return this to keep chaining via promises</li>
</ul>
</li>
</ul>
</li>
<li><p><a href="#Explore%20your%20data">Example</a></p></li>
</ul>

<h3 id="api-filter">
<a id="filter-columnkey-filterobject-isarray-replace--" class="anchor" href="#filter-columnkey-filterobject-isarray-replace--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.filter( columnKey, filterObject, isArray, replace ) <a href="#api-filter">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Filters everything in the universe to only include rows that match certain conditions.  Queries automatically and instantaneously update their values and aggregations.</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>columnKey</code> - The object property to filter on,</li>
</ul>
</li>
<li>
<p>Returns</p>

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>universe instance</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><a href="#Query%20your%20data">Example</a></p></li>
</ul>

<h3 id="api-column">
<a id="column-columnkeycolumnobject--" class="anchor" href="#column-columnkeycolumnobject--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.column( columnKey/columnObject ) <a href="#api-column">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Use to optionally pre-index a column. Accepts a string or number corresponding to the key or index of the column you would like to define.</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>columnKey</code> - the column property or array index you would like to pre-compile eg.</li>
</ul>

<div class="highlight highlight-source-js"><pre>  .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
    <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-en">column</span>(<span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>)
  })</pre></div>

<ul>
<li>
<code>columnObject</code> allows you to override the column type, otherwise it is calculated automatically:</li>
</ul>

<div class="highlight highlight-source-js"><pre>  .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
    <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-en">column</span>({
      key<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>,
      type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>number<span class="pl-pds">'</span></span>
    })
  })</pre></div>
</li>
<li>
<p>Returns</p>

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>universe instance</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><a href="#Pre-compile%20Columns">Example</a></p></li>
</ul>

<h3 id="api-clear">
<a id="clear-columnkeycolumnobjectcolumnkeyscolumnobjects--" class="anchor" href="#clear-columnkeycolumnobjectcolumnkeyscolumnobjects--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.clear( columnKey/columnObject/[columnKeys/columnObjects] ) <a href="#api-clear">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Clears individual or all column defenitions and indexes</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>columnKey</code> - the column property or array of columns you would like to clear eg.</li>
</ul>

<div class="highlight highlight-source-js"><pre>  .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
    <span class="pl-c">// Single Key</span>
    <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-c1">clear</span>(<span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>)
    <span class="pl-c">// Complex Key</span>
    <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-c1">clear</span>({key<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>complex<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>key<span class="pl-pds">'</span></span>]})
    <span class="pl-c">// Multiple Single Keys</span>
    <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-c1">clear</span>([<span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>quantity<span class="pl-pds">'</span></span>])
    <span class="pl-c">// Multiple Complex Keys</span>
    <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-c1">clear</span>([{key<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>complex<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>key<span class="pl-pds">'</span></span>]}, {key<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>another<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>one<span class="pl-pds">'</span></span>]}])
  })</pre></div>
</li>
<li>
<p>Returns</p>

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>universe instance</strong></li>
</ul>
</li>
</ul>
</li>
<li><p><a href="#Clean%20Up">Example</a></p></li>
</ul>

<h3 id="api-add">
<a id="add-data--" class="anchor" href="#add-data--" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.add( [data] ) <a href="#api-add">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Adds additional data to a universe instance. This data will be indexed, aggregated and queries/filters immediately updated when added.</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>[data]</code> - An new array of objects similar to the original dataset</li>
</ul>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>universe instance</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

<h2 id="post-aggregation">
<a id="post-aggregation-" class="anchor" href="#post-aggregation-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Post Aggregation <a href="#post-aggregation">#</a>
</h2>

<p>Post aggregation methods can be run on query results to further modify your data.  Just like queries, the results magically and instantly respond to filtering.</p>

<ul>
<li>Each post aggregation is very powerful, but not all post aggregations can be chained together.</li>
</ul>

<h3>
<a id="locking-a-query" class="anchor" href="#locking-a-query" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Locking a query</h3>

<p>A majority of the time, you're probably only interested in the end result of a query chain. For this reason, Post Aggregations default to mutating the data of their direct parent (unless the parent is the original query), thereby avoiding unnecessary copying of data.
On the other hand, if you plan on accessing data at any point in the middle of a query chain, you will need to <code>lock()</code> that query's results. This ensure's it won't be overwritten or mutated by any further post aggregation.</p>

<p><em>Note:</em> Running more than 1 post aggregation on a query will automatically lock the parent query.</p>

<div class="highlight highlight-source-js"><pre>
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-k">return</span> <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
    groupBy<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>tag<span class="pl-pds">'</span></span>
  })
})
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){
  <span class="pl-smi">query</span>.<span class="pl-en">lock</span>()
  <span class="pl-k">var</span> all <span class="pl-k">=</span> <span class="pl-smi">query</span>.<span class="pl-c1">data</span>
  <span class="pl-k">return</span> <span class="pl-smi">query</span>.<span class="pl-en">limit</span>(<span class="pl-c1">5</span>)
})
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){
  <span class="pl-k">var</span> only5 <span class="pl-k">=</span> <span class="pl-smi">query</span>.<span class="pl-c1">data</span>

  <span class="pl-smi">all</span>.<span class="pl-c1">length</span> <span class="pl-k">===</span> <span class="pl-c1">10</span>
  <span class="pl-smi">only5</span>.<span class="pl-c1">length</span> <span class="pl-k">===</span> <span class="pl-c1">5</span>
})</pre></div>

<p>Without locking the above query before using <code>.limit(5)</code>, the <code>all</code> data array would have been mutated by <code>.limit(5)</code></p>

<h3 id="post-aggregation-sortByKey">
<a id="sortbykeydescending-" class="anchor" href="#sortbykeydescending-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.sortByKey(descending) <a href="#post-aggregation-sortByKey">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Sort results by key (ascending or descending)</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>descending</code> - Pass true to sortKeys in descending order</li>
</ul>

<div class="highlight highlight-source-js"><pre>  .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){  
    <span class="pl-k">return</span> <span class="pl-smi">query</span>.<span class="pl-en">sortByKey</span>(<span class="pl-c1">true</span>)
  })</pre></div>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>query instance</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="post-aggregation-limit">
<a id="limitn-n2-" class="anchor" href="#limitn-n2-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.limit(n, n2) <a href="#post-aggregation-limit">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Limit results to those between<code>n</code> and <code>n2</code>.  If <code>n2</code> is not passed, will limit to the first <code>n</code> records</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>n</code> - Start index.  Defaults to 0 if <code>null</code> or <code>undefined</code>,</li>
<li>
<code>n2</code> - End index.  Defaults to <code>query.data.length</code> if <code>null</code>.  If <code>undefined</code>, will limit to the first <code>n</code> records instead.</li>
</ul>

<div class="highlight highlight-source-js"><pre>  .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){
    <span class="pl-c">// limits results to the first 5 records</span>
    <span class="pl-k">return</span> <span class="pl-smi">query</span>.<span class="pl-en">limit</span>(<span class="pl-c1">5</span>)
    <span class="pl-c">// limits results to records 5 through 10</span>
    <span class="pl-k">return</span> <span class="pl-smi">query</span>.<span class="pl-en">limit</span>(<span class="pl-c1">4</span>, <span class="pl-c1">10</span>)
  })</pre></div>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>query instance</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="post-aggregation-squash">
<a id="squashn-n2-aggregationmap-keyname-" class="anchor" href="#squashn-n2-aggregationmap-keyname-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.squash(n, n2, aggregationMap, keyName) <a href="#post-aggregation-squash">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Takes records from <code>n</code> to <code>n2</code> and reduces them to a single record using the aggregationMap<br>
</li>
</ul>
</li>
<li>
<p>Parameters</p>

<ul>
<li>
<code>n</code> - Start index. Defaults to <code>0</code> if <code>false</code>-y</li>
<li>
<code>n2</code> - End index. Defaults to <code>query.data.length</code> if <code>false</code>-y</li>
<li>
<code>aggregationMap</code> - A 1:1 map of property to the aggregation to be used when combining the records</li>
<li>
<code>keyName</code> (optional) - The key to be used for the new record.  Defaults to <code>Other</code>
</li>
</ul>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
  groupBy<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>,
  select<span class="pl-k">:</span> {
    $sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>,
    otherColumn<span class="pl-k">:</span> {
      $avg<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>tip<span class="pl-pds">'</span></span>
    }
  })
})
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){
  <span class="pl-c">// Will squash all records after the 5 record</span>
  <span class="pl-smi">query</span>.<span class="pl-en">squash</span>(<span class="pl-c1">5</span>, <span class="pl-c1">null</span>, {
    <span class="pl-c">// Sum the sum column</span>
    sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>$sum<span class="pl-pds">'</span></span>,
    othercolumn<span class="pl-k">:</span> {
      <span class="pl-c">// Average the avg column</span>
      avg<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>$avg<span class="pl-pds">'</span></span>
    }
  }, <span class="pl-s"><span class="pl-pds">'</span>Everything after 5<span class="pl-pds">'</span></span>)
  <span class="pl-c">// Give the squashed record a new key</span>
})</pre></div>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>query instance</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="post-aggregation-change">
<a id="changen-n2-changefields-" class="anchor" href="#changen-n2-changefields-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.change(n, n2, changeFields) <a href="#post-aggregation-change">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Determines the change from the <code>n</code> to <code>n2</code> using the keys in <code>changeFields</code>
</li>
</ul>
</li>
<li>
<p>Parameters</p>

<ul>
<li>
<code>n</code> - Start index. Defaults to <code>0</code> if <code>false</code>-y</li>
<li>
<code>n2</code> - End index. Defaults to <code>query.data.length</code> if <code>false</code>-y</li>
<li>
<code>changeFields</code> - An object or array, referencing the fields to measure for change</li>
</ul>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
    groupBy<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>,
    select<span class="pl-k">:</span> {
      $sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>,
      otherColumn<span class="pl-k">:</span> {
        $avg<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>tip<span class="pl-pds">'</span></span>
      }
    }
  })
})
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){
  <span class="pl-c">// Measure the change for sum and avg from result 0 to 10</span>
  <span class="pl-smi">query</span>.<span class="pl-en">change</span>(<span class="pl-c1">0</span>, <span class="pl-c1">10</span>, {
    sum<span class="pl-k">:</span> <span class="pl-c1">true</span>
    otherColumn<span class="pl-k">:</span> {
      avg<span class="pl-k">:</span> <span class="pl-c1">true</span>
    }
  })
})</pre></div>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li>
<strong>query instance</strong>

<ul>
<li>
<code>query.data</code> is now an object:</li>
</ul>

<div class="highlight highlight-source-js"><pre>{
  key<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>nKey<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>n2Key<span class="pl-pds">'</span></span>],
  value<span class="pl-k">:</span> {
    sumChange<span class="pl-k">:</span> <span class="pl-c1">7</span>,
    otherColumn<span class="pl-k">:</span> {
      avgChange<span class="pl-k">:</span> <span class="pl-c1">4</span>
    }
  }
}</pre></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="post-aggregation-changeMap">
<a id="changemapchangemapobj-" class="anchor" href="#changemapchangemapobj-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.changeMap(changeMapObj) <a href="#post-aggregation-changeMap">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Determines incremental change for each record across the fields defined in <code>changeMapObj</code>
</li>
</ul>
</li>
<li>
<p>Parameters</p>

<ul>
<li>
<code>changeMapObj</code> - An object or array, referencing the fields to measure for change</li>
</ul>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
    groupBy<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>,
    select<span class="pl-k">:</span> {
      $sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>,
      otherColumn<span class="pl-k">:</span> {
        $avg<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>tip<span class="pl-pds">'</span></span>
      }
    }
  })
})
.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>){
  <span class="pl-c">// Measure the change for sum and avg from result 0 to 10</span>
  <span class="pl-smi">query</span>.<span class="pl-en">change</span>({
    sum<span class="pl-k">:</span> <span class="pl-c1">true</span>
    otherColumn<span class="pl-k">:</span> {
      avg<span class="pl-k">:</span> <span class="pl-c1">true</span>
    }
  })
})</pre></div>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li>
<strong>query instance</strong>

<ul>
<li>
<code>query.data</code> records are now decorated with incremental change data:</li>
</ul>

<div class="highlight highlight-source-js"><pre>[<span class="pl-k">...</span>{
  key<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>tag5<span class="pl-pds">'</span></span>
  value<span class="pl-k">:</span> {
    sum<span class="pl-k">:</span> <span class="pl-c1">5</span>
    sumChange<span class="pl-k">:</span> <span class="pl-c1">7</span>,
    sumChangeFromStart<span class="pl-k">:</span> <span class="pl-c1">0</span>,
    sumChangeFromEnd<span class="pl-k">:</span> <span class="pl-c1">30</span>,
    otherColumn<span class="pl-k">:</span> {
      avgChange<span class="pl-k">:</span> <span class="pl-c1">4</span>
      avgChangeFromStart<span class="pl-k">:</span> <span class="pl-k">-</span><span class="pl-c1">4</span>
      avgChangeFromEnd<span class="pl-k">:</span> <span class="pl-k">-</span><span class="pl-c1">20</span>
    }
  }
}<span class="pl-k">...</span>]</pre></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<h3 id="post-aggregation-post">
<a id="postcallback-" class="anchor" href="#postcallback-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>.post(callback) <a href="#post-aggregation-post">#</a>
</h3>

<ul>
<li>Description

<ul>
<li>Use a custom callback function to perform your own post aggregations.</li>
</ul>
</li>
<li>Parameters

<ul>
<li>
<code>callback</code> - the callback function to execute.  It accepts the following parameters:

<ul>
<li>
<code>query</code> - the new query object. A fresh reference (or copy, if the parent is locked) is located at <code>query.data</code>.  It is highly discouraged to change any other property on this object</li>
<li>
<code>parentQuery</code> - the parent query.</li>
</ul>
</li>
<li>You may optionally return a promise-like value for asynchronous processing</li>
</ul>

<div class="highlight highlight-source-js"><pre>  .<span class="pl-en">post</span>(<span class="pl-k">function</span>(<span class="pl-smi">query</span>, <span class="pl-smi">parentQuery</span>){
    <span class="pl-smi">query</span>.<span class="pl-c1">data</span>[<span class="pl-c1">0</span>].<span class="pl-smi">key</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>newKeyName<span class="pl-pds">'</span></span>
    <span class="pl-k">return</span> <span class="pl-smi">Promise</span>.<span class="pl-en">resolve</span>(<span class="pl-en">doSomethingSpecial</span>(<span class="pl-smi">query</span>.<span class="pl-c1">data</span>))
  })</pre></div>
</li>
<li>Returns

<ul>
<li>
<code>promise</code> resolved with

<ul>
<li><strong>query instance</strong></li>
</ul>
</li>
</ul>
</li>
</ul>

<h2 id="pro-tips">
<a id="pro-tips-" class="anchor" href="#pro-tips-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pro Tips <a href="#pro-tips">#</a>
</h2>

<h4>
<a id="no-arrays-necessary" class="anchor" href="#no-arrays-necessary" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>No Arrays Necessary</h4>

<p>Don’t want to use arrays in your aggregations? No problem, because this:</p>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
    select<span class="pl-k">:</span> {
      $sum<span class="pl-k">:</span> {
        $sum<span class="pl-k">:</span> [
          {$max<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>tip<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-ii">total’]},</span></span>
<span class="pl-s">          {$min: [<span class="pl-pds">'</span></span>quantity<span class="pl-s"><span class="pl-pds">'</span>, <span class="pl-pds">'</span></span>total’]}
        ]
      },
    }
  })
})</pre></div>

<p>… is now easier written like this:</p>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
    select<span class="pl-k">:</span> {
      $sum<span class="pl-k">:</span> {
        $sum<span class="pl-k">:</span> {
          $max<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>tip<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>],
          $min<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>quantity<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>]
        }
      },
    }
  })
})</pre></div>

<h4>
<a id="no-objects-necessary-either" class="anchor" href="#no-objects-necessary-either" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>No Objects Necessary, either!</h4>

<p>What’s that? Don’t like the verbosity of objects or arrays? Use the new string syntax!</p>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">universe</span>){
  <span class="pl-smi">universe</span>.<span class="pl-en">query</span>({
    select<span class="pl-k">:</span> {
      $sum<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>$sum($max(tip,total), $min(quantity,total))<span class="pl-pds">'</span></span>
    }
  })
})</pre></div>

<h4>
<a id="pre-compile-columns" class="anchor" href="#pre-compile-columns" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pre-compile Columns</h4>

<p>Pro-Tip: You can also <strong>pre-compile</strong> column indices before querying. Otherwise, ad-hoc indices are created and managed automagically for you anyway.</p>

<div class="highlight highlight-source-js"><pre>.<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">myUniverse</span>){
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">column</span>(<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>)
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">column</span>([<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>c<span class="pl-pds">'</span></span>])
  <span class="pl-k">return</span> <span class="pl-smi">myUniverse</span>.<span class="pl-en">column</span>({
    key<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>d<span class="pl-pds">'</span></span>,
    type<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>string<span class="pl-pds">'</span></span> <span class="pl-c">// override automatic type detection</span>
  })
})</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/crossfilter/universe">Universe</a> is maintained by <a href="https://github.com/crossfilter">crossfilter</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
