!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.universe=n()}}(function(){var n;return function e(n,t,r){function i(o,c){if(!t[o]){if(!n[o]){var f="function"==typeof require&&require;if(!c&&f)return f(o,!0);if(u)return u(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var s=t[o]={exports:{}};n[o][0].call(s.exports,function(e){var t=n[o][1][e];return i(t?t:e)},s,s.exports,e,n,t,r)}return t[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(n,e,t){function r(){s=!1,c.length?a=c.concat(a):l=-1,a.length&&i()}function i(){if(!s){var n=setTimeout(r);s=!0;for(var e=a.length;e;){for(c=a,a=[];++l<e;)c&&c[l].run();l=-1,e=a.length}c=null,s=!1,clearTimeout(n)}}function u(n,e){this.fun=n,this.array=e}function o(){}var c,f=e.exports={},a=[],s=!1,l=-1;f.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];a.push(new u(n,e)),1!==a.length||s||setTimeout(i,0)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=o,f.addListener=o,f.once=o,f.off=o,f.removeListener=o,f.removeAllListeners=o,f.emit=o,f.binding=function(n){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(n){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],2:[function(n,e,t){!function(n){function e(n){return n}function t(n,e,t){for(var r=0,i=e.length,u=t?JSON.parse(JSON.stringify(n)):new Array(i);i>r;++r)u[r]=n[e[r]];return u}function r(n){function e(e,t,r,i){for(;i>r;){var u=r+i>>>1;n(e[u])<t?r=u+1:i=u}return r}function t(e,t,r,i){for(;i>r;){var u=r+i>>>1;t<n(e[u])?i=u:r=u+1}return r}return t.right=t,t.left=e,t}function u(n){function e(n,e,t){for(var i=t-e,u=(i>>>1)+1;--u>0;)r(n,u,i,e);return n}function t(n,e,t){for(var i,u=t-e;--u>0;)i=n[e],n[e]=n[e+u],n[e+u]=i,r(n,1,u,e);return n}function r(e,t,r,i){for(var u,o=e[--i+t],c=n(o);(u=t<<1)<=r&&(r>u&&n(e[i+u])>n(e[i+u+1])&&u++,!(c<=n(e[i+u])));)e[i+t]=e[i+u],t=u;e[i+t]=o}return e.sort=t,e}function o(n){function e(e,r,i,u){var o,c,f,a,s=new Array(u=Math.min(i-r,u));for(c=0;u>c;++c)s[c]=e[r++];if(t(s,0,u),i>r){o=n(s[0]);do(f=n(a=e[r])>o)&&(s[0]=a,o=n(t(s,0,u)[0]));while(++r<i)}return s}var t=u(n);return e}function c(n){function e(e,t,r){for(var i=t+1;r>i;++i){for(var u=i,o=e[i],c=n(o);u>t&&n(e[u-1])>c;--u)e[u]=e[u-1];e[u]=o}return e}return e}function f(n){function e(n,e,i){return(z>i-e?r:t)(n,e,i)}function t(t,r,i){var u,o=(i-r)/6|0,c=r+o,f=i-1-o,a=r+i-1>>1,s=a-o,l=a+o,d=t[c],p=n(d),v=t[s],h=n(v),m=t[a],y=n(m),g=t[l],x=n(g),b=t[f],k=n(b);p>h&&(u=d,d=v,v=u,u=p,p=h,h=u),x>k&&(u=g,g=b,b=u,u=x,x=k,k=u),p>y&&(u=d,d=m,m=u,u=p,p=y,y=u),h>y&&(u=v,v=m,m=u,u=h,h=y,y=u),p>x&&(u=d,d=g,g=u,u=p,p=x,x=u),y>x&&(u=m,m=g,g=u,u=y,y=x,x=u),h>k&&(u=v,v=b,b=u,u=h,h=k,k=u),h>y&&(u=v,v=m,m=u,u=h,h=y,y=u),x>k&&(u=g,g=b,b=u,u=x,x=k,k=u);var w=v,A=h,j=g,O=x;t[c]=d,t[s]=t[r],t[a]=m,t[l]=t[i-1],t[f]=b;var E=r+1,R=i-2,S=O>=A&&A>=O;if(S)for(var L=E;R>=L;++L){var $=t[L],q=n($);if(A>q)L!==E&&(t[L]=t[E],t[E]=$),++E;else if(q>A)for(;;){var I=n(t[R]);{if(!(I>A)){if(A>I){t[L]=t[E],t[E++]=t[R],t[R--]=$;break}t[L]=t[R],t[R--]=$;break}R--}}}else for(var L=E;R>=L;L++){var $=t[L],q=n($);if(A>q)L!==E&&(t[L]=t[E],t[E]=$),++E;else if(q>O)for(;;){var I=n(t[R]);{if(!(I>O)){A>I?(t[L]=t[E],t[E++]=t[R],t[R--]=$):(t[L]=t[R],t[R--]=$);break}if(R--,L>R)break}}}if(t[r]=t[E-1],t[E-1]=w,t[i-1]=t[R+1],t[R+1]=j,e(t,r,E-1),e(t,R+2,i),S)return t;if(c>E&&R>f){for(var z,I;(z=n(t[E]))<=A&&z>=A;)++E;for(;(I=n(t[R]))<=O&&I>=O;)--R;for(var L=E;R>=L;L++){var $=t[L],q=n($);if(A>=q&&q>=A)L!==E&&(t[L]=t[E],t[E]=$),E++;else if(O>=q&&q>=O)for(;;){var I=n(t[R]);{if(!(O>=I&&I>=O)){A>I?(t[L]=t[E],t[E++]=t[R],t[R--]=$):(t[L]=t[R],t[R--]=$);break}if(R--,L>R)break}}}}return e(t,E,R+1)}var r=c(n);return e}function a(n){for(var e=new Array(n),t=-1;++t<n;)e[t]=0;return e}function s(n,e){for(var t=n.length;e>t;)n[t++]=0;return n}function d(n,e){if(e>32)throw new Error("invalid array width!");return n}function p(n){this.length=n,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=T(n)}function v(n,e){return function(t){var r=t.length;return[n.left(t,e,0,r),n.right(t,e,0,r)]}}function h(n,e){var t=e[0],r=e[1];return function(e){var i=e.length;return[n.left(e,t,0,i),n.left(e,r,0,i)]}}function m(n){return[0,n.length]}function y(){return null}function g(){return 0}function x(n){return n+1}function b(n){return n-1}function w(n){return function(e,t){return e+ +n(t)}}function A(n){return function(e,t){return e-n(t)}}function j(){function n(n){var e=z,t=n.length;return t&&(I=I.concat(n),$.lengthen(z+=t),N.forEach(function(r){r(n,e,t)}),L("dataAdded")),q}function r(){for(var n=O(z,z),e=[],t=0,r=0;z>t;++t)$.zero(t)?e.push(t):n[t]=r++;T.forEach(function(n){n(-1,-1,[],e,!0)}),P.forEach(function(e){e(n)});for(var t=0,r=0;z>t;++t)$.zero(t)||(t!==r&&($.copy(r,t),I[r]=I[t]),++r);I.length=z=r,$.truncate(r),L("dataRemoved")}function c(n,r){function c(e,u,o){if(r){for(yn=0,v=0,k=[],i=0;i<e.length;i++)for(v=0,k=n(e[i]);v<k.length;v++)yn++;nn=[],rn=E(e.length),on=O(yn,1),fn=[];var c=E(yn);for(l=0,i=0;i<e.length;i++)if(k=n(e[i]),k.length)for(rn[i]=k.length,v=0;v<k.length;v++)nn.push(k[v]),c[l]=i,l++;else rn[i]=0,fn.push(i);var f=ln(E(yn),0,yn);nn=t(nn,f),en=t(c,f)}else nn=e.map(n),en=ln(E(o),0,o),nn=t(nn,en);r&&(o=yn);var a=dn(nn),s=a[0],d=a[1];if(an)for(i=0;i<o;++i)an(nn[i],i)||($[G][en[i]+u]|=J,r&&(on[i]=1));else{for(i=0;i<s;++i)$[G][en[i]+u]|=J,r&&(on[i]=1);for(i=d;i<o;++i)$[G][en[i]+u]|=J,r&&(on[i]=1)}if(!u)return H=nn,X=en,tn=rn,un=on,hn=s,void(mn=d);if(W=H,Z=X,cn=un,i0=0,i1=0,r&&(old_n0=u,u=W.length,o=yn),H=r?new Array(u+o):new Array(z),X=r?new Array(u+o):O(z,z),r&&(un=O(u+o,1)),r){var p=tn.length;tn=C(tn,z);for(var v=0;z>v+p;v++)tn[v+p]=rn[v]}for(i=0;i0<u&&i1<o;++i)W[i0]<nn[i1]?(H[i]=W[i0],r&&(un[i]=cn[i0]),X[i]=Z[i0++]):(H[i]=nn[i1],r&&(un[i]=cn[i1]),X[i]=en[i1++]+(r?old_n0:u));for(;i0<u;++i0,++i)H[i]=W[i0],r&&(un[i]=cn[i0]),X[i]=Z[i0];for(;i1<o;++i1,++i)H[i]=nn[i1],r&&(un[i]=cn[i1]),X[i]=en[i1]+(r?old_n0:u);a=dn(H),hn=a[0],mn=a[1]}function a(n,e,t){pn.forEach(function(n){n(nn,en,e,t)}),nn=en=null}function s(n){for(var e,t=0,r=0;z>t;++t)$.zero(e=X[t])||(t!==r&&(H[r]=H[t]),X[r]=n[e],++r);for(H.length=r;z>r;)X[r++]=0;var i=dn(H);hn=i[0],mn=i[1]}function d(n){var e=n[0],t=n[1];if(an)return an=null,B(function(n,r){return r>=e&&t>r},0===n[0]&&n[1]===X.length),hn=e,mn=t,sn;var i,u,o,c=[],f=[],a=[],s=[];if(hn>e)for(i=e,u=Math.min(hn,t);u>i;++i)c.push(X[i]),a.push(i);else if(e>hn)for(i=hn,u=Math.min(e,mn);u>i;++i)f.push(X[i]),s.push(i);if(t>mn)for(i=Math.max(e,mn),u=t;u>i;++i)c.push(X[i]),a.push(i);else if(mn>t)for(i=Math.max(hn,t),u=mn;u>i;++i)f.push(X[i]),s.push(i);if(r){var l=[],d=[];for(i=0;i<c.length;i++)tn[c[i]]++,un[a[i]]=0,1===tn[c[i]]&&($[G][c[i]]^=J,l.push(c[i]));for(i=0;i<f.length;i++)tn[f[i]]--,un[s[i]]=1,0===tn[f[i]]&&($[G][f[i]]^=J,d.push(f[i]));if(c=l,f=d,0===n[0]&&n[1]===X.length)for(i=0;i<fn.length;i++)$[G][o=fn[i]]&J&&($[G][o]^=J,c.push(o));else for(i=0;i<fn.length;i++)$[G][o=fn[i]]&J||($[G][o]^=J,f.push(o))}else{for(i=0;i<c.length;i++)$[G][c[i]]^=J;for(i=0;i<f.length;i++)$[G][f[i]]^=J}return hn=e,mn=t,T.forEach(function(n){n(J,G,c,f)}),L("filtered"),sn}function p(n){return null==n?U():Array.isArray(n)?q(n):"function"==typeof n?F(n):j(n)}function j(n){return d((dn=v(S,n))(H))}function q(n){return d((dn=h(S,n))(H))}function U(){return d((dn=m)(H))}function F(n){return dn=m,B(an=n,!1),hn=0,mn=z,sn}function B(n,e){var t,i,u,o=[],c=[],f=[],a=[],s=X.length;if(!r)for(t=0;s>t;++t)!($[G][i=X[t]]&J)^!!(u=n(H[t],t))&&(u?o.push(i):c.push(i));if(r)for(t=0;s>t;++t)n(H[t],t)?(o.push(X[t]),f.push(t)):(c.push(X[t]),a.push(t));if(r){var l=[],d=[];for(t=0;t<o.length;t++)1===un[f[t]]&&(tn[o[t]]++,un[f[t]]=0,1===tn[o[t]]&&($[G][o[t]]^=J,l.push(o[t])));for(t=0;t<c.length;t++)0===un[a[t]]&&(tn[c[t]]--,un[a[t]]=1,0===tn[c[t]]&&($[G][c[t]]^=J,d.push(c[t])));if(o=l,c=d,e)for(t=0;t<fn.length;t++)$[G][i=fn[t]]&J&&($[G][i]^=J,o.push(i));else for(t=0;t<fn.length;t++)$[G][i=fn[t]]&J||($[G][i]^=J,c.push(i))}else{for(t=0;t<o.length;t++)$[G][o[t]]&J&&($[G][o[t]]&=Y);for(t=0;t<c.length;t++)$[G][c[t]]&J||($[G][c[t]]|=J)}T.forEach(function(n){n(J,G,o,c)}),L("filtered")}function D(n){for(var e,t=[],i=mn;--i>=hn&&n>0;)$.zero(e=X[i])&&(t.push(I[e]),--n);if(r)for(i=0;i<fn.length&&n>0;i++)$.zero(e=fn[i])&&(t.push(I[e]),--n);return t}function K(n){var e,t,i=[];if(r)for(e=0;e<fn.length&&n>0;e++)$.zero(t=fn[e])&&(i.push(I[t]),--n);for(e=hn;mn>e&&n>0;)$.zero(t=X[e])&&(i.push(I[t]),--n),e++;return i}function V(n){function c(e,u,o,c){function f(){return r?void W++:void(++W===Q&&(k=M(k,_<<=1),U=M(U,_),Q=R(_)))}r&&(n0old=o,o=H.length-e.length,c=e.length);var p,v,h,m,g,x,b=N,k=r?[]:O(W,Q),w=D,A=K,j=V,E=W,S=0,L=0;for(en&&(w=j=y),en&&(A=j=y),N=new Array(W),W=0,U=r?E>1?U:[]:E>1?C(U,z):O(z,Q),E&&(h=(v=b[0]).key);c>L&&!((m=n(e[L]))>=m);)++L;for(;c>L;){for(v&&m>=h?(g=v,x=h,k[S]=W,(v=b[++S])&&(h=v.key)):(g={key:m,value:j()},x=m),N[W]=g;x>=m&&(p=u[L]+(r?n0old:o),r?U[p]?U[p].push(W):U[p]=[W]:U[p]=W,g.value=w(g.value,I[p],!0),$.zeroExcept(p,G,Y)||(g.value=A(g.value,I[p],!1)),!(++L>=c));)m=n(e[L]);f()}for(;E>S;)N[k[S]=W]=b[S++],f();if(r)for(i=0;i<U.length;i++)U[i]||(U[i]=[]);if(W>S)if(r)U=t(U,k,!0);else for(S=0;o>S;++S)U[S]=k[U[S]];p=T.indexOf(Z),W>1?(Z=a,nn=l):(!W&&tn&&(W=1,N=[{key:null,value:j()}]),1===W?(Z=s,nn=d):(Z=y,nn=y),U=null),T[p]=Z}function f(){if(W>1){for(var n=W,e=N,t=O(n,n),r=0,i=0;z>r;++r)$.zero(r)||(t[U[i]=U[r]]=1,++i);for(N=[],W=0,r=0;n>r;++r)t[r]&&(t[r]=W++,N.push(e[r]));if(W>1)for(var r=0;i>r;++r)U[r]=t[U[r]];else U=null;T[T.indexOf(Z)]=W>1?(nn=l,Z=a):1===W?(nn=d,Z=s):nn=Z=y}else if(1===W){if(tn)return;for(var r=0;z>r;++r)if(!$.zero(r))return;N=[],W=0,T[T.indexOf(Z)]=Z=nn=y}}function a(n,e,t,i,u){if(!(n===J&&e===G||en)){var o,c,f,a,s;if(r){for(o=0,a=t.length;a>o;++o)if($.zeroExcept(f=t[o],G,Y))for(c=0;c<U[f].length;c++)s=N[U[f][c]],s.value=D(s.value,I[f],!1,c);for(o=0,a=i.length;a>o;++o)if($.onlyExcept(f=i[o],G,Y,e,n))for(c=0;c<U[f].length;c++)s=N[U[f][c]],s.value=K(s.value,I[f],u,c)}else{for(o=0,a=t.length;a>o;++o)$.zeroExcept(f=t[o],G,Y)&&(s=N[U[f]],s.value=D(s.value,I[f],!1));for(o=0,a=i.length;a>o;++o)$.onlyExcept(f=i[o],G,Y,e,n)&&(s=N[U[f]],s.value=K(s.value,I[f],u))}}}function s(n,e,t,r,i){if(!(n===J&&e===G||en)){var u,o,c,f=N[0];for(u=0,c=t.length;c>u;++u)$.zeroExcept(o=t[u],G,Y)&&(f.value=D(f.value,I[o],!1));for(u=0,c=r.length;c>u;++u)$.onlyExcept(o=r[u],G,Y,e,n)&&(f.value=K(f.value,I[o],i))}}function l(){var n,e,t;for(n=0;W>n;++n)N[n].value=V();if(r){for(n=0;z>n;++n)for(e=0;e<U[n].length;e++)t=N[U[n][e]],t.value=D(t.value,I[n],!0,e);for(n=0;z>n;++n)if(!$.zeroExcept(n,G,Y))for(e=0;e<U[n].length;e++)t=N[U[n][e]],t.value=K(t.value,I[n],!1,e)}else{for(n=0;z>n;++n)t=N[U[n]],t.value=D(t.value,I[n],!0);for(n=0;z>n;++n)$.zeroExcept(n,G,Y)||(t=N[U[n]],t.value=K(t.value,I[n],!1))}}function d(){var n,e=N[0];for(e.value=V(),n=0;z>n;++n)e.value=D(e.value,I[n],!0);for(n=0;z>n;++n)$.zeroExcept(n,G,Y)||(e.value=K(e.value,I[n],!1))}function p(){return en&&(nn(),en=!1),N}function v(n){var e=F(p(),0,N.length,n);return B.sort(e,0,e.length)}function h(n,e,t){return D=n,K=e,V=t,en=!0,q}function m(){return h(x,b,g)}function k(n){return h(w(n),A(n),g)}function j(n){function e(e){return n(e.value)}return F=o(e),B=u(e),q}function E(){return j(e)}function S(){return W}function L(){var n=T.indexOf(Z);return n>=0&&T.splice(n,1),n=pn.indexOf(c),n>=0&&pn.splice(n,1),n=P.indexOf(f),n>=0&&P.splice(n,1),q}var q={top:v,all:p,reduce:h,reduceCount:m,reduceSum:k,order:j,orderNatural:E,size:S,dispose:L,remove:L};vn.push(q);var N,U,F,B,D,K,V,_=8,Q=R(_),W=0,Z=y,nn=y,en=!0,tn=n===y;return arguments.length<1&&(n=e),T.push(Z),pn.push(c),P.push(f),c(H,X,0,z),m().orderNatural()}function _(){var n=V(y),e=n.all;return delete n.all,delete n.top,delete n.order,delete n.orderNatural,delete n.size,n.value=function(){return e()[0].value},n}function Q(){vn.forEach(function(n){n.dispose()});var n=N.indexOf(c);return n>=0&&N.splice(n,1),n=N.indexOf(a),n>=0&&N.splice(n,1),n=P.indexOf(s),n>=0&&P.splice(n,1),$.masks[G]&=Y,U()}var J,Y,G,H,X,W,Z,nn,en,tn,rn,un,on,cn,fn,an,sn={filter:p,filterExact:j,filterRange:q,filterFunction:F,filterAll:U,top:D,bottom:K,group:V,groupAll:_,dispose:Q,remove:Q},ln=f(function(n){return nn[n]}),dn=m,pn=[],vn=[],hn=0,mn=0,yn=0;N.unshift(c),N.push(a),P.push(s);var gn=$.add();return G=gn.offset,J=gn.one,Y=~J,c(I,0,z),a(I,0,z),sn}function a(){function n(n,e){var t;if(!p)for(t=e;z>t;++t)f=a(f,I[t],!0),$.zero(t)||(f=s(f,I[t],!1))}function e(n,e,t,r,i){var u,o,c;if(!p){for(u=0,c=t.length;c>u;++u)$.zero(o=t[u])&&(f=a(f,I[o],i));for(u=0,c=r.length;c>u;++u)$.only(o=r[u],e,n)&&(f=s(f,I[o],i))}}function t(){var n;for(f=l(),n=0;z>n;++n)f=a(f,I[n],!0),$.zero(n)||(f=s(f,I[n],!1))}function r(n,e,t){return a=n,s=e,l=t,p=!0,d}function i(){return r(x,b,g)}function u(n){return r(w(n),A(n),g)}function o(){return p&&(t(),p=!1),f}function c(){var t=T.indexOf(e);return t>=0&&T.splice(t),t=N.indexOf(n),t>=0&&N.splice(t),d}var f,a,s,l,d={reduce:r,reduceCount:i,reduceSum:u,value:o,dispose:c,remove:c},p=!0;return T.push(e),N.push(n),n(I,0,z),i()}function s(){return z}function d(){return I}function j(n){return"function"!=typeof n?void console.warn("onChange callback parameter must be a function!"):(U.push(n),function(){U.splice(U.indexOf(n),1)})}function L(n){for(var e=0;e<U.length;e++)U[e](n)}var $,q={add:n,remove:r,dimension:c,groupAll:a,size:s,all:d,onChange:j},I=[],z=0,T=[],N=[],P=[],U=[];return $=new p(0),arguments.length?n(arguments[0]):q}function O(n,e){return(257>e?T:65537>e?N:P)(n)}function E(n){for(var e=O(n,n),t=-1;++t<n;)e[t]=t;return e}function R(n){return 8===n?256:16===n?65536:4294967296}j.version="2.0.0-alpha.03",j.permute=t;var S=j.bisect=r(e);S.by=r;var L=j.heap=u(e);L.by=u;var $=j.heapselect=o(e);$.by=o;var q=j.insertionsort=c(e);q.by=c;var I=j.quicksort=f(e);I.by=f;var z=32,T=a,N=a,P=a,C=s,M=d;"undefined"!=typeof Uint8Array&&(T=function(n){return new Uint8Array(n)},N=function(n){return new Uint16Array(n)},P=function(n){return new Uint32Array(n)},C=function(n,e){if(n.length>=e)return n;var t=new n.constructor(e);return t.set(n),t},M=function(n,e){var t;switch(e){case 16:t=N(n.length);break;case 32:t=P(n.length);break;default:throw new Error("invalid array width!")}return t.set(n),t}),p.prototype.lengthen=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)this[e]=C(this[e],n);this.length=n},p.prototype.add=function(){var n,e,t,r,i;for(r=0,i=this.subarrays;i>r;++r)if(n=this.masks[r],e=this.width-32*r,t=~n&-~n,!(e>=32)||t)return 32>e&&t&1<<e&&(this[r]=M(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=T(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},p.prototype.copy=function(n,e){var t,r;for(t=0,r=this.subarrays;r>t;++t)this[t][n]=this[t][e]},p.prototype.truncate=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e){for(var r=this.length-1;r>=n;r--)this[e][r]=0;this[e].length=n}this.length=n},p.prototype.zero=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)if(this[e][n])return!1;return!0},p.prototype.zeroExcept=function(n,e,t){var r,i;for(r=0,i=this.subarrays;i>r;++r)if(r===e?this[r][n]&t:this[r][n])return!1;return!0},p.prototype.only=function(n,e,t){var r,i;for(r=0,i=this.subarrays;i>r;++r)if(this[r][n]!=(r===e?t:0))return!1;return!0},p.prototype.onlyExcept=function(n,e,t,r,i){var u,o,c;for(o=0,c=this.subarrays;c>o;++o)if(u=this[o][n],o===e&&(u&=t),u!=(o===r?i:0))return!1;return!0},n.crossfilter=j}("undefined"!=typeof t&&t||this)},{}],3:[function(n,e,t){e.exports=n("./crossfilter").crossfilter},{"./crossfilter":2}],4:[function(n,e,t){e.exports=function r(n,e){"use strict";var t,i,u=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,c=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,f=/^0x[0-9a-f]+$/i,a=/^0/,s=function(n){return r.insensitive&&(""+n).toLowerCase()||""+n},l=s(n).replace(o,"")||"",d=s(e).replace(o,"")||"",p=l.replace(u,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),v=d.replace(u,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),h=parseInt(l.match(f),16)||1!==p.length&&l.match(c)&&Date.parse(l),m=parseInt(d.match(f),16)||h&&d.match(c)&&Date.parse(d)||null;if(m){if(m>h)return-1;if(h>m)return 1}for(var y=0,g=Math.max(p.length,v.length);g>y;y++){if(t=!(p[y]||"").match(a)&&parseFloat(p[y])||p[y]||0,i=!(v[y]||"").match(a)&&parseFloat(v[y])||v[y]||0,isNaN(t)!==isNaN(i))return isNaN(t)?1:-1;if(typeof t!=typeof i&&(t+="",i+=""),i>t)return-1;if(t>i)return 1}return 0}},{}],5:[function(e,t,r){(function(e){!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof r&&"object"==typeof t)t.exports=e();else if("function"==typeof n&&n.amd)n(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var i="undefined"!=typeof window?window:self,u=i.Q;i.Q=e(),i.Q.noConflict=function(){return i.Q=u,this}}}(function(){"use strict";function n(n){return function(){return G.apply(n,arguments)}}function t(n){return n===Object(n)}function r(n){return"[object StopIteration]"===rn(n)||n instanceof _}function i(n,e){if(D&&e.stack&&"object"==typeof n&&null!==n&&n.stack&&-1===n.stack.indexOf(un)){for(var t=[],r=e;r;r=r.source)r.stack&&t.unshift(r.stack);t.unshift(n.stack);var i=t.join("\n"+un+"\n");n.stack=u(i)}}function u(n){for(var e=n.split("\n"),t=[],r=0;r<e.length;++r){var i=e[r];f(i)||o(i)||!i||t.push(i)}return t.join("\n")}function o(n){return-1!==n.indexOf("(module.js:")||-1!==n.indexOf("(node.js:")}function c(n){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(n);if(e)return[e[1],Number(e[2])];var t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(n);if(t)return[t[1],Number(t[2])];var r=/.*@(.+):(\d+)$/.exec(n);return r?[r[1],Number(r[2])]:void 0}function f(n){var e=c(n);if(!e)return!1;var t=e[0],r=e[1];return t===V&&r>=Q&&sn>=r}function a(){if(D)try{throw new Error}catch(n){var e=n.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=c(t);if(!r)return;return V=r[0],r[1]}}function s(n,e,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+t+" instead.",new Error("").stack),n.apply(n,arguments)}}function l(n){return n instanceof h?n:x(n)?S(n):R(n)}function d(){function n(n){e=n,u.source=n,X(t,function(e,t){l.nextTick(function(){n.promiseDispatch.apply(n,t)})},void 0),t=void 0,r=void 0}var e,t=[],r=[],i=nn(d.prototype),u=nn(h.prototype);if(u.promiseDispatch=function(n,i,u){var o=H(arguments);t?(t.push(o),"when"===i&&u[1]&&r.push(u[1])):l.nextTick(function(){e.promiseDispatch.apply(e,o)})},u.valueOf=function(){if(t)return u;var n=y(e);return g(n)&&(e=n),n},u.inspect=function(){return e?e.inspect():{state:"pending"}},l.longStackSupport&&D)try{throw new Error}catch(o){u.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return i.promise=u,i.resolve=function(t){e||n(l(t))},i.fulfill=function(t){e||n(R(t))},i.reject=function(t){e||n(E(t))},i.notify=function(n){e||X(r,function(e,t){l.nextTick(function(){t(n)})},void 0)},i}function p(n){if("function"!=typeof n)throw new TypeError("resolver must be a function.");var e=d();try{n(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function v(n){return p(function(e,t){for(var r=0,i=n.length;i>r;r++)l(n[r]).then(e,t)})}function h(n,e,t){void 0===e&&(e=function(n){return E(new Error("Promise does not support operation: "+n))}),void 0===t&&(t=function(){return{state:"unknown"}});var r=nn(h.prototype);if(r.promiseDispatch=function(t,i,u){var o;try{o=n[i]?n[i].apply(r,u):e.call(r,i,u)}catch(c){o=E(c)}t&&t(o)},r.inspect=t,t){var i=t();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var n=t();return"pending"===n.state||"rejected"===n.state?r:n.value}}return r}function m(n,e,t,r){return l(n).then(e,t,r)}function y(n){if(g(n)){var e=n.inspect();if("fulfilled"===e.state)return e.value}return n}function g(n){return n instanceof h}function x(n){return t(n)&&"function"==typeof n.then}function b(n){return g(n)&&"pending"===n.inspect().state}function k(n){return!g(n)||"fulfilled"===n.inspect().state}function w(n){return g(n)&&"rejected"===n.inspect().state}function A(){on.length=0,cn.length=0,an||(an=!0)}function j(n,t){an&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){-1!==W(cn,n)&&(e.emit("unhandledRejection",t,n),fn.push(n))}),cn.push(n),t&&"undefined"!=typeof t.stack?on.push(t.stack):on.push("(no stack) "+t))}function O(n){if(an){var t=W(cn,n);-1!==t&&("object"==typeof e&&"function"==typeof e.emit&&l.nextTick.runAfter(function(){var r=W(fn,n);-1!==r&&(e.emit("rejectionHandled",on[t],n),fn.splice(r,1))}),cn.splice(t,1),on.splice(t,1))}}function E(n){var e=h({when:function(e){return e&&O(this),e?e(n):this}},function(){return this},function(){return{state:"rejected",reason:n}});return j(e,n),e}function R(n){return h({when:function(){return n},get:function(e){return n[e]},set:function(e,t){n[e]=t},"delete":function(e){delete n[e]},post:function(e,t){return null===e||void 0===e?n.apply(void 0,t):n[e].apply(n,t)},apply:function(e,t){return n.apply(e,t)},keys:function(){return tn(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function S(n){var e=d();return l.nextTick(function(){try{n.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function L(n){return h({isDef:function(){}},function(e,t){return N(n,e,t)},function(){return l(n).inspect()})}function $(n,e,t){return l(n).spread(e,t)}function q(n){return function(){function e(n,e){var o;if("undefined"==typeof StopIteration){try{o=t[n](e)}catch(c){return E(c)}return o.done?l(o.value):m(o.value,i,u)}try{o=t[n](e)}catch(c){return r(c)?l(c.value):E(c)}return m(o,i,u)}var t=n.apply(this,arguments),i=e.bind(e,"next"),u=e.bind(e,"throw");return i()}}function I(n){l.done(l.async(n)())}function z(n){throw new _(n)}function T(n){return function(){return $([this,P(arguments)],function(e,t){return n.apply(e,t)})}}function N(n,e,t){return l(n).dispatch(e,t)}function P(n){return m(n,function(n){var e=0,t=d();return X(n,function(r,i,u){var o;g(i)&&"fulfilled"===(o=i.inspect()).state?n[u]=o.value:(++e,m(i,function(r){n[u]=r,0===--e&&t.resolve(n)},t.reject,function(n){t.notify({index:u,value:n})}))},void 0),0===e&&t.resolve(n),t.promise})}function C(n){if(0===n.length)return l.resolve();var e=l.defer(),t=0;return X(n,function(r,i,u){function o(n){e.resolve(n)}function c(){t--,0===t&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function f(n){e.notify({index:u,value:n})}var a=n[u];t++,m(a,o,c,f)},void 0),e.promise}function M(n){return m(n,function(n){return n=Z(n,l),m(P(Z(n,function(n){return m(n,J,J)})),function(){return n})})}function U(n){return l(n).allSettled()}function F(n,e){return l(n).then(void 0,void 0,e)}function B(n,e){return l(n).nodeify(e)}var D=!1;try{throw new Error}catch(K){D=!!K.stack}var V,_,Q=a(),J=function(){},Y=function(){function n(){for(var n,e;r.next;)r=r.next,n=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter()),t(n,e);for(;f.length;)n=f.pop(),t(n);u=!1}function t(e,t){try{e()}catch(r){if(c)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}var r={task:void 0,next:null},i=r,u=!1,o=void 0,c=!1,f=[];if(Y=function(n){i=i.next={task:n,domain:c&&e.domain,next:null},u||(u=!0,o())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)c=!0,o=function(){e.nextTick(n)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=s,a.port1.onmessage=n,n()};var s=function(){a.port2.postMessage(0)};o=function(){setTimeout(n,0),s()}}else o=function(){setTimeout(n,0)};return Y.runAfter=function(n){f.push(n),u||(u=!0,o())},Y}(),G=Function.call,H=n(Array.prototype.slice),X=n(Array.prototype.reduce||function(n,e){var t=0,r=this.length;if(1===arguments.length)for(;;){if(t in this){e=this[t++];break}if(++t>=r)throw new TypeError}for(;r>t;t++)t in this&&(e=n(e,this[t],t));return e}),W=n(Array.prototype.indexOf||function(n){for(var e=0;e<this.length;e++)if(this[e]===n)return e;return-1}),Z=n(Array.prototype.map||function(n,e){var t=this,r=[];return X(t,function(i,u,o){r.push(n.call(e,u,o,t))},void 0),r}),nn=Object.create||function(n){function e(){}return e.prototype=n,new e},en=n(Object.prototype.hasOwnProperty),tn=Object.keys||function(n){var e=[];for(var t in n)en(n,t)&&e.push(t);return e},rn=n(Object.prototype.toString);_="undefined"!=typeof ReturnValue?ReturnValue:function(n){this.value=n};var un="From previous event:";l.resolve=l,l.nextTick=Y,l.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=d,d.prototype.makeNodeResolver=function(){var n=this;return function(e,t){e?n.reject(e):arguments.length>2?n.resolve(H(arguments,1)):n.resolve(t)}},l.Promise=p,l.promise=p,p.race=v,p.all=P,p.reject=E,p.resolve=l,l.passByCopy=function(n){return n},h.prototype.passByCopy=function(){return this},l.join=function(n,e){return l(n).join(e)},h.prototype.join=function(n){return l([this,n]).spread(function(n,e){if(n===e)return n;throw new Error("Can't join: not the same: "+n+" "+e)})},l.race=v,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(n,e,t){function r(e){try{return"function"==typeof n?n(e):e}catch(t){return E(t)}}function u(n){if("function"==typeof e){i(n,c);try{return e(n)}catch(t){return E(t)}}return E(n)}function o(n){return"function"==typeof t?t(n):n}var c=this,f=d(),a=!1;return l.nextTick(function(){c.promiseDispatch(function(n){a||(a=!0,f.resolve(r(n)))},"when",[function(n){a||(a=!0,f.resolve(u(n)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(n){var e,t=!1;try{e=o(n)}catch(r){if(t=!0,!l.onerror)throw r;l.onerror(r)}t||f.notify(e)}]),f.promise},l.tap=function(n,e){return l(n).tap(e)},h.prototype.tap=function(n){return n=l(n),this.then(function(e){return n.fcall(e).thenResolve(e)})},l.when=m,h.prototype.thenResolve=function(n){return this.then(function(){return n})},l.thenResolve=function(n,e){return l(n).thenResolve(e)},h.prototype.thenReject=function(n){return this.then(function(){throw n})},l.thenReject=function(n,e){return l(n).thenReject(e)},l.nearer=y,l.isPromise=g,l.isPromiseAlike=x,l.isPending=b,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=k,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var on=[],cn=[],fn=[],an=!0;l.resetUnhandledRejections=A,l.getUnhandledReasons=function(){return on.slice()},l.stopUnhandledRejectionTracking=function(){A(),an=!1},A(),l.reject=E,l.fulfill=R,l.master=L,l.spread=$,h.prototype.spread=function(n,e){return this.all().then(function(e){return n.apply(void 0,e)},e)},l.async=q,l.spawn=I,l["return"]=z,l.promised=T,l.dispatch=N,h.prototype.dispatch=function(n,e){var t=this,r=d();return l.nextTick(function(){t.promiseDispatch(r.resolve,n,e)}),r.promise},l.get=function(n,e){return l(n).dispatch("get",[e])},h.prototype.get=function(n){return this.dispatch("get",[n])},l.set=function(n,e,t){return l(n).dispatch("set",[e,t])},h.prototype.set=function(n,e){return this.dispatch("set",[n,e])},l.del=l["delete"]=function(n,e){return l(n).dispatch("delete",[e])},h.prototype.del=h.prototype["delete"]=function(n){return this.dispatch("delete",[n])},l.mapply=l.post=function(n,e,t){return l(n).dispatch("post",[e,t])},h.prototype.mapply=h.prototype.post=function(n,e){return this.dispatch("post",[n,e])},l.send=l.mcall=l.invoke=function(n,e){return l(n).dispatch("post",[e,H(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(n){return this.dispatch("post",[n,H(arguments,1)])},l.fapply=function(n,e){return l(n).dispatch("apply",[void 0,e])},h.prototype.fapply=function(n){return this.dispatch("apply",[void 0,n])},l["try"]=l.fcall=function(n){return l(n).dispatch("apply",[void 0,H(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,H(arguments)])},l.fbind=function(n){var e=l(n),t=H(arguments,1);return function(){return e.dispatch("apply",[this,t.concat(H(arguments))])}},h.prototype.fbind=function(){var n=this,e=H(arguments);return function(){return n.dispatch("apply",[this,e.concat(H(arguments))])}},l.keys=function(n){return l(n).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=P,h.prototype.all=function(){return P(this)},l.any=C,h.prototype.any=function(){return C(this)},l.allResolved=s(M,"allResolved","allSettled"),h.prototype.allResolved=function(){return M(this)},l.allSettled=U,h.prototype.allSettled=function(){return this.then(function(n){return P(Z(n,function(n){function e(){return n.inspect()}return n=l(n),n.then(e,e)}))})},l.fail=l["catch"]=function(n,e){return l(n).then(void 0,e)},h.prototype.fail=h.prototype["catch"]=function(n){return this.then(void 0,n)},l.progress=F,h.prototype.progress=function(n){return this.then(void 0,void 0,n)},l.fin=l["finally"]=function(n,e){return l(n)["finally"](e)},h.prototype.fin=h.prototype["finally"]=function(n){return n=l(n),this.then(function(e){return n.fcall().then(function(){return e})},function(e){return n.fcall().then(function(){throw e})})},l.done=function(n,e,t,r){return l(n).done(e,t,r)},h.prototype.done=function(n,t,r){var u=function(n){l.nextTick(function(){if(i(n,o),!l.onerror)throw n;l.onerror(n)})},o=n||t||r?this.then(n,t,r):this;"object"==typeof e&&e&&e.domain&&(u=e.domain.bind(u)),o.then(void 0,u)},l.timeout=function(n,e,t){return l(n).timeout(e,t)},h.prototype.timeout=function(n,e){var t=d(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+n+" ms"),e.code="ETIMEDOUT"),t.reject(e)},n);return this.then(function(n){clearTimeout(r),t.resolve(n)},function(n){clearTimeout(r),t.reject(n)},t.notify),t.promise},l.delay=function(n,e){return void 0===e&&(e=n,n=void 0),l(n).delay(e)},h.prototype.delay=function(n){return this.then(function(e){var t=d();return setTimeout(function(){t.resolve(e)},n),t.promise})},l.nfapply=function(n,e){return l(n).nfapply(e)},h.prototype.nfapply=function(n){var e=d(),t=H(n);return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},l.nfcall=function(n){var e=H(arguments,1);return l(n).nfapply(e)},h.prototype.nfcall=function(){var n=H(arguments),e=d();return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},l.nfbind=l.denodeify=function(n){var e=H(arguments,1);return function(){var t=e.concat(H(arguments)),r=d();return t.push(r.makeNodeResolver()),l(n).fapply(t).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var n=H(arguments);return n.unshift(this),l.denodeify.apply(void 0,n)},l.nbind=function(n,e){var t=H(arguments,2);return function(){function r(){return n.apply(e,arguments)}var i=t.concat(H(arguments)),u=d();return i.push(u.makeNodeResolver()),l(r).fapply(i).fail(u.reject),u.promise}},h.prototype.nbind=function(){var n=H(arguments,0);return n.unshift(this),l.nbind.apply(void 0,n)},l.nmapply=l.npost=function(n,e,t){return l(n).npost(e,t)},h.prototype.nmapply=h.prototype.npost=function(n,e){var t=H(e||[]),r=d();
return t.push(r.makeNodeResolver()),this.dispatch("post",[n,t]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(n,e){var t=H(arguments,2),r=d();return t.push(r.makeNodeResolver()),l(n).dispatch("post",[e,t]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(n){var e=H(arguments,1),t=d();return e.push(t.makeNodeResolver()),this.dispatch("post",[n,e]).fail(t.reject),t.promise},l.nodeify=B,h.prototype.nodeify=function(n){return n?void this.then(function(e){l.nextTick(function(){n(null,e)})},function(e){l.nextTick(function(){n(e)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var sn=a();return l})}).call(this,e("_process"))},{_process:1}],6:[function(n,e,t){!function(n){function e(n){return n}function t(n,e){for(var t=0,r=e.length,i=new Array(r);r>t;++t)i[t]=n[e[t]];return i}function r(n){function e(e,t,r,i){for(;i>r;){var u=r+i>>>1;n(e[u])<t?r=u+1:i=u}return r}function t(e,t,r,i){for(;i>r;){var u=r+i>>>1;t<n(e[u])?i=u:r=u+1}return r}return t.right=t,t.left=e,t}function i(n){function e(n,e,t){for(var i=t-e,u=(i>>>1)+1;--u>0;)r(n,u,i,e);return n}function t(n,e,t){for(var i,u=t-e;--u>0;)i=n[e],n[e]=n[e+u],n[e+u]=i,r(n,1,u,e);return n}function r(e,t,r,i){for(var u,o=e[--i+t],c=n(o);(u=t<<1)<=r&&(r>u&&n(e[i+u])>n(e[i+u+1])&&u++,!(c<=n(e[i+u])));)e[i+t]=e[i+u],t=u;e[i+t]=o}return e.sort=t,e}function u(n){function e(e,r,i,u){var o,c,f,a,s=new Array(u=Math.min(i-r,u));for(c=0;u>c;++c)s[c]=e[r++];if(t(s,0,u),i>r){o=n(s[0]);do(f=n(a=e[r])>o)&&(s[0]=a,o=n(t(s,0,u)[0]));while(++r<i)}return s}var t=i(n);return e}function o(n){function e(e,t,r){for(var i=t+1;r>i;++i){for(var u=i,o=e[i],c=n(o);u>t&&n(e[u-1])>c;--u)e[u]=e[u-1];e[u]=o}return e}return e}function c(n){function e(n,e,i){return($>i-e?r:t)(n,e,i)}function t(t,r,i){var u,o=(i-r)/6|0,c=r+o,f=i-1-o,a=r+i-1>>1,s=a-o,l=a+o,d=t[c],p=n(d),v=t[s],h=n(v),m=t[a],y=n(m),g=t[l],x=n(g),b=t[f],k=n(b);p>h&&(u=d,d=v,v=u,u=p,p=h,h=u),x>k&&(u=g,g=b,b=u,u=x,x=k,k=u),p>y&&(u=d,d=m,m=u,u=p,p=y,y=u),h>y&&(u=v,v=m,m=u,u=h,h=y,y=u),p>x&&(u=d,d=g,g=u,u=p,p=x,x=u),y>x&&(u=m,m=g,g=u,u=y,y=x,x=u),h>k&&(u=v,v=b,b=u,u=h,h=k,k=u),h>y&&(u=v,v=m,m=u,u=h,h=y,y=u),x>k&&(u=g,g=b,b=u,u=x,x=k,k=u);var w=v,A=h,j=g,O=x;t[c]=d,t[s]=t[r],t[a]=m,t[l]=t[i-1],t[f]=b;var E=r+1,R=i-2,S=O>=A&&A>=O;if(S)for(var L=E;R>=L;++L){var $=t[L],q=n($);if(A>q)L!==E&&(t[L]=t[E],t[E]=$),++E;else if(q>A)for(;;){var I=n(t[R]);{if(!(I>A)){if(A>I){t[L]=t[E],t[E++]=t[R],t[R--]=$;break}t[L]=t[R],t[R--]=$;break}R--}}}else for(var L=E;R>=L;L++){var $=t[L],q=n($);if(A>q)L!==E&&(t[L]=t[E],t[E]=$),++E;else if(q>O)for(;;){var I=n(t[R]);{if(!(I>O)){A>I?(t[L]=t[E],t[E++]=t[R],t[R--]=$):(t[L]=t[R],t[R--]=$);break}if(R--,L>R)break}}}if(t[r]=t[E-1],t[E-1]=w,t[i-1]=t[R+1],t[R+1]=j,e(t,r,E-1),e(t,R+2,i),S)return t;if(c>E&&R>f){for(var z,I;(z=n(t[E]))<=A&&z>=A;)++E;for(;(I=n(t[R]))<=O&&I>=O;)--R;for(var L=E;R>=L;L++){var $=t[L],q=n($);if(A>=q&&q>=A)L!==E&&(t[L]=t[E],t[E]=$),E++;else if(O>=q&&q>=O)for(;;){var I=n(t[R]);{if(!(O>=I&&I>=O)){A>I?(t[L]=t[E],t[E++]=t[R],t[R--]=$):(t[L]=t[R],t[R--]=$);break}if(R--,L>R)break}}}}return e(t,E,R+1)}var r=o(n);return e}function f(n){for(var e=new Array(n),t=-1;++t<n;)e[t]=0;return e}function a(n,e){for(var t=n.length;e>t;)n[t++]=0;return n}function s(n,e){if(e>32)throw new Error("invalid array width!");return n}function l(n){this.length=n,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=q(n)}function d(n,e){return function(t){var r=t.length;return[n.left(t,e,0,r),n.right(t,e,0,r)]}}function p(n,e){var t=e[0],r=e[1];return function(e){var i=e.length;return[n.left(e,t,0,i),n.left(e,r,0,i)]}}function v(n){return[0,n.length]}function h(){return null}function m(){return 0}function y(n){return n+1}function g(n){return n-1}function x(n){return function(e,t){return e+ +n(t)}}function b(n){return function(e,t){return e-n(t)}}function k(){function n(n){var e=S,t=n.length;return t&&(R=R.concat(n),k.lengthen(S+=t),$.forEach(function(r){r(n,e,t)})),E}function r(){for(var n=w(S,S),e=[],t=0,r=0;S>t;++t)k.zero(t)?e.push(t):n[t]=r++;L.forEach(function(n){n(-1,-1,[],e,!0)}),q.forEach(function(e){e(n)});for(var t=0,r=0;S>t;++t)k.zero(t)||(t!==r&&(k.copy(r,t),R[r]=R[t]),++r);R.length=S=r,k.truncate(r)}function o(n){function r(e,r,i){J=e.map(n),Y=X(A(i),0,i),J=t(J,Y);var u,o=W(J),c=o[0],f=o[1];if(G)for(u=0;i>u;++u)G(J[u],u)||(k[V][Y[u]+r]|=D);else{for(u=0;c>u;++u)k[V][Y[u]+r]|=D;for(u=f;i>u;++u)k[V][Y[u]+r]|=D}if(!r)return _=J,Q=Y,en=c,void(tn=f);var a=_,s=Q,l=0,d=0;for(_=new Array(S),Q=w(S,S),u=0;r>l&&i>d;++u)a[l]<J[d]?(_[u]=a[l],Q[u]=s[l++]):(_[u]=J[d],Q[u]=Y[d++]+r);for(;r>l;++l,++u)_[u]=a[l],Q[u]=s[l];for(;i>d;++d,++u)_[u]=J[d],Q[u]=Y[d]+r;o=W(_),en=o[0],tn=o[1]}function o(n,e,t){Z.forEach(function(n){n(J,Y,e,t)}),J=Y=null}function f(n){for(var e,t=0,r=0;S>t;++t)k.zero(e=Q[t])||(t!==r&&(_[r]=_[t]),Q[r]=n[e],++r);for(_.length=r;S>r;)Q[r++]=0;var i=W(_);en=i[0],tn=i[1]}function a(n){var e=n[0],t=n[1];if(G)return G=null,P(function(n,r){return r>=e&&t>r}),en=e,tn=t,H;var r,i,u,o=[],c=[];if(en>e)for(r=e,i=Math.min(en,t);i>r;++r)k[V][u=Q[r]]^=D,o.push(u);else if(e>en)for(r=en,i=Math.min(e,tn);i>r;++r)k[V][u=Q[r]]^=D,c.push(u);if(t>tn)for(r=Math.max(e,tn),i=t;i>r;++r)k[V][u=Q[r]]^=D,o.push(u);else if(tn>t)for(r=Math.max(en,t),i=tn;i>r;++r)k[V][u=Q[r]]^=D,c.push(u);return en=e,tn=t,L.forEach(function(n){n(D,V,o,c)}),H}function s(n){return null==n?I():Array.isArray(n)?E(n):"function"==typeof n?z(n):l(n)}function l(n){return a((W=d(O,n))(_))}function E(n){return a((W=p(O,n))(_))}function I(){return a((W=v)(_))}function z(n){return W=v,P(G=n),en=0,tn=S,H}function P(n){var e,t,r,i=[],u=[];for(e=0;S>e;++e)!(k[V][t=Q[e]]&D)^!!(r=n(_[e],e))&&(r?(k[V][t]&=K,i.push(t)):(k[V][t]|=D,u.push(t)));L.forEach(function(n){n(D,V,i,u)})}function C(n){for(var e,t=[],r=tn;--r>=en&&n>0;)k.zero(e=Q[r])&&(t.push(R[e]),--n);return t}function M(n){for(var e,t=[],r=en;tn>r&&n>0;)k.zero(e=Q[r])&&(t.push(R[e]),--n),r++;return t}function U(n){function t(e,t,r,i){function u(){++G===Y&&(g=N(g,J<<=1),P=N(P,J),Y=j(J))}var s,l,d,p,v,m,y=z,g=w(G,Y),x=U,b=F,A=B,O=G,E=0,$=0;for(W&&(x=A=h),W&&(b=A=h),z=new Array(G),G=0,P=O>1?T(P,S):w(S,Y),O&&(d=(l=y[0]).key);i>$&&!((p=n(e[$]))>=p);)++$;for(;i>$;){for(l&&p>=d?(v=l,m=d,g[E]=G,(l=y[++E])&&(d=l.key)):(v={key:p,value:A()},m=p),z[G]=v;!(p>m||(P[s=t[$]+r]=G,v.value=x(v.value,R[s],!0),k.zeroExcept(s,V,K)||(v.value=b(v.value,R[s],!1)),++$>=i));)p=n(e[$]);u()}for(;O>E;)z[g[E]=G]=y[E++],u();if(G>E)for(E=0;r>E;++E)P[E]=g[P[E]];s=L.indexOf(H),G>1?(H=o,X=f):(!G&&en&&(G=1,z=[{key:null,value:A()}]),1===G?(H=c,X=a):(H=h,X=h),P=null),L[s]=H}function r(){if(G>1){for(var n=G,e=z,t=w(n,n),r=0,i=0;S>r;++r)k.zero(r)||(t[P[i]=P[r]]=1,++i);for(z=[],G=0,r=0;n>r;++r)t[r]&&(t[r]=G++,z.push(e[r]));if(G>1)for(var r=0;i>r;++r)P[r]=t[P[r]];else P=null;L[L.indexOf(H)]=G>1?(X=f,H=o):1===G?(X=a,H=c):X=H=h}else if(1===G){if(en)return;for(var r=0;S>r;++r)if(!k.zero(r))return;z=[],G=0,L[L.indexOf(H)]=H=X=h}}function o(n,e,t,r,i){if(!(n===D&&e===V||W)){var u,o,c,f;for(u=0,c=t.length;c>u;++u)k.zeroExcept(o=t[u],V,K)&&(f=z[P[o]],f.value=U(f.value,R[o]));for(u=0,c=r.length;c>u;++u)k.onlyExcept(o=r[u],V,K,e,n)&&(f=z[P[o]],f.value=F(f.value,R[o],i))}}function c(n,e,t,r,i){if(!(n===D&&e===V||W)){var u,o,c,f=z[0];for(u=0,c=t.length;c>u;++u)k.zeroExcept(o=t[u],V,K)&&(f.value=U(f.value,R[o]));for(u=0,c=r.length;c>u;++u)k.onlyExcept(o=r[u],V,K,e,n)&&(f.value=F(f.value,R[o],i))}}function f(){var n,e;for(n=0;G>n;++n)z[n].value=B();for(n=0;S>n;++n)e=z[P[n]],e.value=U(e.value,R[n],!0);for(n=0;S>n;++n)k.zeroExcept(n,V,K)||(e=z[P[n]],e.value=F(e.value,R[n],!1))}function a(){var n,e=z[0];for(e.value=B(),n=0;S>n;++n)e.value=U(e.value,R[n],!0);for(n=0;S>n;++n)k.zeroExcept(n,V,K)||(e.value=F(e.value,R[n],!1))}function s(){return W&&(X(),W=!1),z}function l(n){var e=C(s(),0,z.length,n);return M.sort(e,0,e.length)}function d(n,e,t){return U=n,F=e,B=t,W=!0,I}function p(){return d(y,g,m)}function v(n){return d(x(n),b(n),m)}function A(n){function e(e){return n(e.value)}return C=u(e),M=i(e),I}function O(){return A(e)}function E(){return G}function $(){var n=L.indexOf(H);return n>=0&&L.splice(n,1),n=Z.indexOf(t),n>=0&&Z.splice(n,1),n=q.indexOf(r),n>=0&&q.splice(n,1),I}var I={top:l,all:s,reduce:d,reduceCount:p,reduceSum:v,order:A,orderNatural:O,size:E,dispose:$,remove:$};nn.push(I);var z,P,C,M,U,F,B,J=8,Y=j(J),G=0,H=h,X=h,W=!0,en=n===h;return arguments.length<1&&(n=e),L.push(H),Z.push(t),q.push(r),t(_,Q,0,S),p().orderNatural()}function F(){var n=U(h),e=n.all;return delete n.all,delete n.top,delete n.order,delete n.orderNatural,delete n.size,n.value=function(){return e()[0].value},n}function B(){nn.forEach(function(n){n.dispose()});var n=$.indexOf(r);return n>=0&&$.splice(n,1),n=$.indexOf(o),n>=0&&$.splice(n,1),n=q.indexOf(f),n>=0&&q.splice(n,1),k.masks[V]&=K,I()}var D,K,V,_,Q,J,Y,G,H={filter:s,filterExact:l,filterRange:E,filterFunction:z,filterAll:I,top:C,bottom:M,group:U,groupAll:F,dispose:B,remove:B},X=c(function(n){return J[n]}),W=v,Z=[],nn=[],en=0,tn=0;$.unshift(r),$.push(o),q.push(f);var rn=k.add();return V=rn.offset,D=rn.one,K=~D,r(R,0,S),o(R,0,S),H}function f(){function n(n,e){var t;if(!p)for(t=e;S>t;++t)f=a(f,R[t],!0),k.zero(t)||(f=s(f,R[t],!1))}function e(n,e,t,r,i){var u,o,c;if(!p){for(u=0,c=t.length;c>u;++u)k.zero(o=t[u])&&(f=a(f,R[o],i));for(u=0,c=r.length;c>u;++u)k.only(o=r[u],e,n)&&(f=s(f,R[o],i))}}function t(){var n;for(f=l(),n=0;S>n;++n)f=a(f,R[n],!0),k.zero(n)||(f=s(f,R[n],!1))}function r(n,e,t){return a=n,s=e,l=t,p=!0,d}function i(){return r(y,g,m)}function u(n){return r(x(n),b(n),m)}function o(){return p&&(t(),p=!1),f}function c(){var t=L.indexOf(e);return t>=0&&L.splice(t),t=$.indexOf(n),t>=0&&$.splice(t),d}var f,a,s,l,d={reduce:r,reduceCount:i,reduceSum:u,value:o,dispose:c,remove:c},p=!0;return L.push(e),$.push(n),n(R,0,S),i()}function a(){return S}function s(){return R}var k,E={add:n,remove:r,dimension:o,groupAll:f,size:a,all:s},R=[],S=0,L=[],$=[],q=[];return k=new l(0),arguments.length?n(arguments[0]):E}function w(n,e){return(257>e?q:65537>e?I:z)(n)}function A(n){for(var e=w(n,n),t=-1;++t<n;)e[t]=t;return e}function j(n){return 8===n?256:16===n?65536:4294967296}k.version="2.0.0-alpha.03",k.permute=t;var O=k.bisect=r(e);O.by=r;var E=k.heap=i(e);E.by=i;var R=k.heapselect=u(e);R.by=u;var S=k.insertionsort=o(e);S.by=o;var L=k.quicksort=c(e);L.by=c;var $=32,q=f,I=f,z=f,T=a,N=s;"undefined"!=typeof Uint8Array&&(q=function(n){return new Uint8Array(n)},I=function(n){return new Uint16Array(n)},z=function(n){return new Uint32Array(n)},T=function(n,e){if(n.length>=e)return n;var t=new n.constructor(e);return t.set(n),t},N=function(n,e){var t;switch(e){case 16:t=I(n.length);break;case 32:t=z(n.length);break;default:throw new Error("invalid array width!")}return t.set(n),t}),l.prototype.lengthen=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)this[e]=T(this[e],n);this.length=n},l.prototype.add=function(){var n,e,t,r,i;for(r=0,i=this.subarrays;i>r;++r)if(n=this.masks[r],e=this.width-32*r,t=~n&-~n,!(e>=32)||t)return 32>e&&t&1<<e&&(this[r]=N(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=q(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},l.prototype.copy=function(n,e){var t,r;for(t=0,r=this.subarrays;r>t;++t)this[t][n]=this[t][e]},l.prototype.truncate=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e){for(var r=this.length-1;r>=n;r--)this[e][r]=0;this[e].length=n}this.length=n},l.prototype.zero=function(n){var e,t;for(e=0,t=this.subarrays;t>e;++e)if(this[e][n])return!1;return!0},l.prototype.zeroExcept=function(n,e,t){var r,i;for(r=0,i=this.subarrays;i>r;++r)if(r===e?this[r][n]&t:this[r][n])return!1;return!0},l.prototype.only=function(n,e,t){var r,i;for(r=0,i=this.subarrays;i>r;++r)if(this[r][n]!=(r===e?t:0))return!1;return!0},l.prototype.onlyExcept=function(n,e,t,r,i){var u,o,c;for(o=0,c=this.subarrays;c>o;++o)if(u=this[o][n],o===e&&(u&=t),u!=(o===r?i:0))return!1;return!0},n.crossfilter=k}("undefined"!=typeof t&&t||this)},{}],7:[function(n,e,t){arguments[4][3][0].apply(t,arguments)},{"./crossfilter":6,dup:3}],8:[function(n,e,t){function r(n,e){function t(n){if("string"==typeof n){var e=n,t=function(n){return n[e]};return t}return n}function u(n){if("string"==typeof n){var e=n,t=function(n){return+n[e]};return t}return n}n.count=function(t){return arguments.length?(e.count=t,n):e.count},n.sum=function(t){return arguments.length?(t=u(t),e.sum=t,n):e.sum},n.avg=function(t){return arguments.length?(t=u(t),"function"==typeof t?(e.sum&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),e.sum=t,e.avg=!0,e.count=!0):e.avg=t,n):e.avg},n.exception=function(r){return arguments.length?(r=t(r),e.exceptionAccessor=r,n):e.exceptionAccessor},n.filter=function(t){return arguments.length?(e.filter=t,n):e.filter},n.valueList=function(r){return arguments.length?(r=t(r),e.valueList=r,n):e.valueList},n.median=function(t){return arguments.length?(t=u(t),"function"==typeof t&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=t),e.median=t,n):e.median},n.min=function(t){return arguments.length?(t=u(t),"function"==typeof t&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=t),e.min=t,n):e.min},n.max=function(t){return arguments.length?(t=u(t),"function"==typeof t&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=t),e.max=t,n):e.max},n.exceptionCount=function(r){return arguments.length?(r=t(r),"function"==typeof r?(e.sum&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),e.exceptionAccessor=r,e.exceptionCount=!0):e.exceptionCount=r,n):e.exceptionCount},n.exceptionSum=function(t){return arguments.length?(t=u(t),e.exceptionSum=t,n):e.exceptionSum},n.histogramValue=function(t){return arguments.length?(t=u(t),e.histogramValue=t,n):e.histogramValue},n.histogramBins=function(t){return arguments.length?(e.histogramThresholds=t,n):e.histogramThresholds},n.std=function(t){return arguments.length?(t=u(t),"function"==typeof t?(e.sumOfSquares=t,e.sum=t,e.count=!0,e.std=!0):e.std=t,n):e.std},n.sumOfSq=function(t){return arguments.length?(t=u(t),e.sumOfSquares=t,n):e.sumOfSquares},n.value=function(n,t){return arguments.length&&"string"==typeof n?(e.values||(e.values={}),e.values[n]={},e.values[n].parameters=i(),r(e.values[n],e.values[n].parameters),t&&(e.values[n].accessor=t),e.values[n]):void console.error("'value' requires a string argument.")},n.nest=function(r){return arguments.length?(r.map(t),e.nestKeys=r,n):e.nestKeys},n.alias=function(t){return arguments.length?(e.aliasKeys=t,n):e.aliasKeys},n.aliasProp=function(t){return arguments.length?(e.aliasPropKeys=t,n):e.aliasPropKeys},n.groupAll=function(t){return arguments.length?(e.groupAll=t,n):e.groupAll},n.dataList=function(t){return arguments.length?(e.dataList=t,n):e.dataList}}var i=n("./parameters.js"),u={build:r};e.exports=u},{"./parameters.js":24}],9:[function(n,e,t){var r={initial:function(n,e,t){return function(r){n&&(r=n(r));for(var i in t)e(r)[i]=function(){return t[i](e(r))};return r}}};e.exports=r},{}],10:[function(n,e,t){var r={add:function(n,e,t){return function(r,i,u){e&&e(r,i,u);for(var o in n)t(r)[o]=n[o](t(r),i);return r}}};e.exports=r},{}],11:[function(n,e,t){var r={add:function(n,e,t){return function(n,r,i){return e&&e(n,r,i),t(n).count>0?t(n).avg=t(n).sum/t(n).count:t(n).avg=0,n}},remove:function(n,e,t){return function(n,r,i){return e&&e(n,r,i),t(n).count>0?t(n).avg=t(n).sum/t(n).count:t(n).avg=0,n}},initial:function(n,e){return function(t){return t=n(t),e(t).avg=0,t}}};e.exports=r},{}],12:[function(n,e,t){function r(n,e,t){t||(t=function(n){return n});var w={reduceAdd:e.reduceAdd,reduceRemove:e.reduceRemove,reduceInitial:e.reduceInitial};(n.count||n.std)&&(e.reduceAdd=u.add(e.reduceAdd,t),e.reduceRemove=u.remove(e.reduceRemove,t),e.reduceInitial=u.initial(e.reduceInitial,t)),n.sum&&(e.reduceAdd=o.add(n.sum,e.reduceAdd,t),e.reduceRemove=o.remove(n.sum,e.reduceRemove,t),e.reduceInitial=o.initial(e.reduceInitial,t)),n.avg&&(n.count&&n.sum?(e.reduceAdd=c.add(n.sum,e.reduceAdd,t),e.reduceRemove=c.remove(n.sum,e.reduceRemove,t),e.reduceInitial=c.initial(e.reduceInitial,t)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),n.exceptionCount&&(n.exceptionAccessor?(e.reduceAdd=p.add(n.exceptionAccessor,e.reduceAdd,t),e.reduceRemove=p.remove(n.exceptionAccessor,e.reduceRemove,t),e.reduceInitial=p.initial(e.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),n.exceptionSum&&(n.exceptionAccessor?(e.reduceAdd=v.add(n.exceptionAccessor,n.exceptionSum,e.reduceAdd,t),e.reduceRemove=v.remove(n.exceptionAccessor,n.exceptionSum,e.reduceRemove,t),e.reduceInitial=v.initial(e.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(n.valueList||n.median||n.min||n.max)&&(e.reduceAdd=d.add(n.valueList,e.reduceAdd,t),e.reduceRemove=d.remove(n.valueList,e.reduceRemove,t),e.reduceInitial=d.initial(e.reduceInitial,t)),n.dataList&&(e.reduceAdd=k.add(n.dataList,e.reduceAdd,t),e.reduceRemove=k.remove(n.dataList,e.reduceRemove,t),e.reduceInitial=k.initial(e.reduceInitial,t)),n.median&&(e.reduceAdd=f.add(e.reduceAdd,t),e.reduceRemove=f.remove(e.reduceRemove,t),e.reduceInitial=f.initial(e.reduceInitial,t)),n.min&&(e.reduceAdd=a.add(e.reduceAdd,t),e.reduceRemove=a.remove(e.reduceRemove,t),e.reduceInitial=a.initial(e.reduceInitial,t)),n.max&&(e.reduceAdd=s.add(e.reduceAdd,t),e.reduceRemove=s.remove(e.reduceRemove,t),e.reduceInitial=s.initial(e.reduceInitial,t)),n.exceptionAccessor&&(e.reduceAdd=l.add(n.exceptionAccessor,e.reduceAdd,t),e.reduceRemove=l.remove(n.exceptionAccessor,e.reduceRemove,t),e.reduceInitial=l.initial(e.reduceInitial,t)),n.histogramValue&&n.histogramThresholds&&(e.reduceAdd=h.add(n.histogramValue,e.reduceAdd,t),e.reduceRemove=h.remove(n.histogramValue,e.reduceRemove,t),e.reduceInitial=h.initial(n.histogramThresholds,e.reduceInitial,t)),n.sumOfSquares&&(e.reduceAdd=m.add(n.sumOfSquares,e.reduceAdd,t),e.reduceRemove=m.remove(n.sumOfSquares,e.reduceRemove,t),e.reduceInitial=m.initial(e.reduceInitial,t)),n.std&&(n.sumOfSquares&&n.sum?(e.reduceAdd=y.add(e.reduceAdd,t),e.reduceRemove=y.remove(e.reduceRemove,t),e.reduceInitial=y.initial(e.reduceInitial,t)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),n.nestKeys&&(e.reduceAdd=g.add(n.nestKeys,e.reduceAdd,t),e.reduceRemove=g.remove(n.nestKeys,e.reduceRemove,t),e.reduceInitial=g.initial(e.reduceInitial,t)),n.aliasKeys&&(e.reduceInitial=x.initial(e.reduceInitial,t,n.aliasKeys)),n.aliasPropKeys&&(e.reduceAdd=b.add(n.aliasPropKeys,e.reduceAdd,t),e.reduceRemove=b.add(n.aliasPropKeys,e.reduceRemove,t)),n.filter&&(e.reduceAdd=i.add(n.filter,e.reduceAdd,w.reduceAdd,t),e.reduceRemove=i.remove(n.filter,e.reduceRemove,w.reduceRemove,t)),n.values&&Object.getOwnPropertyNames(n.values).forEach(function(i){var u=function(n){return function(e){return e=n(e),t(e)[i]={},e}};e.reduceInitial=u(e.reduceInitial),r(n.values[i].parameters,e,function(n){return n[i]})})}var i=n("./filter.js"),u=n("./count.js"),o=n("./sum.js"),c=n("./avg.js"),f=n("./median.js"),a=n("./min.js"),s=n("./max.js"),l=n("./value-count.js"),d=n("./value-list.js"),p=n("./exception-count.js"),v=n("./exception-sum.js"),h=n("./histogram.js"),m=n("./sum-of-squares.js"),y=n("./std.js"),g=n("./nest.js"),x=n("./alias.js"),b=n("./aliasProp.js"),k=n("./data-list.js"),w={build:r};e.exports=w},{"./alias.js":9,"./aliasProp.js":10,"./avg.js":11,"./count.js":14,"./data-list.js":15,"./exception-count.js":16,"./exception-sum.js":17,"./filter.js":18,"./histogram.js":19,"./max.js":20,"./median.js":21,"./min.js":22,"./nest.js":23,"./std.js":29,"./sum-of-squares.js":30,"./sum.js":31,"./value-count.js":32,"./value-list.js":33}],13:[function(n,e,t){var r=function(n){return function(e){return e[n]}};_grouper=function(n,e){return n||(n=function(n){return n}),function(t,r){e&&e(t,r);var i=n(t),u=n(r);return"undefined"!=typeof u.count&&(i.count+=u.count),"undefined"!=typeof u.sum&&(i.sum+=u.sum),"undefined"!=typeof u.avg&&(i.avg=i.sum/i.count),t}},reductio_cap=function(n,e,t){var i=(e.reduceInitial(),t.values?Object.keys(t.values):[]),u=_grouper();if(i.length)for(var o=0;o<i.length;++o)u=_grouper(r(i[o]),u);return function(t,r){if(!arguments.length)return n();if(t===1/0||!t)return n();var i=n(),o=t-1;if(i.length<=t)return i;var c=i.slice(0,o),f={key:r||"Others"};f.value=e.reduceInitial();for(var a=o;a<i.length;++a)u(f.value,i[a].value);return c.push(f),c}},e.exports=reductio_cap},{}],14:[function(n,e,t){var r={add:function(n,e){return function(t,r,i){return n&&n(t,r,i),e(t).count++,t}},remove:function(n,e){return function(t,r,i){return n&&n(t,r,i),e(t).count--,t}},initial:function(n,e){return function(t){return n&&(t=n(t)),e(t).count=0,t}}};e.exports=r},{}],15:[function(n,e,t){var r={add:function(n,e,t){return function(n,r,i){return e&&e(n,r,i),t(n).dataList.push(r),n}},remove:function(n,e,t){return function(n,r,i){return e&&e(n,r,i),t(n).dataList.splice(t(n).dataList.indexOf(r),1),n}},initial:function(n,e){return function(t){return n&&(t=n(t)),e(t).dataList=[],t}}};e.exports=r},{}],16:[function(n,e,t){var r={add:function(n,e,t){var r,i;return function(u,o,c){return e&&e(u,o,c),r=t(u).bisect(t(u).values,n(o),0,t(u).values.length),i=t(u).values[r],i&&i[0]===n(o)&&0!==i[1]||t(u).exceptionCount++,u}},remove:function(n,e,t){var r,i;return function(u,o,c){return e&&e(u,o,c),r=t(u).bisect(t(u).values,n(o),0,t(u).values.length),i=t(u).values[r],i&&i[0]===n(o)&&1===i[1]&&t(u).exceptionCount--,u}},initial:function(n,e){return function(t){return t=n(t),e(t).exceptionCount=0,t}}};e.exports=r},{}],17:[function(n,e,t){var r={add:function(n,e,t,r){var i,u;return function(o,c,f){return t&&t(o,c,f),i=r(o).bisect(r(o).values,n(c),0,r(o).values.length),u=r(o).values[i],u&&u[0]===n(c)&&0!==u[1]||(r(o).exceptionSum=r(o).exceptionSum+e(c)),o}},remove:function(n,e,t,r){var i,u;return function(o,c,f){return t&&t(o,c,f),i=r(o).bisect(r(o).values,n(c),0,r(o).values.length),u=r(o).values[i],u&&u[0]===n(c)&&1===u[1]&&(r(o).exceptionSum=r(o).exceptionSum-e(c)),o}},initial:function(n,e){return function(t){return t=n(t),e(t).exceptionSum=0,t}}};e.exports=r},{}],18:[function(n,e,t){var r={add:function(n,e,t){return function(r,i,u){return n(i,u)?e&&e(r,i,u):t&&t(r,i,u),r}},remove:function(n,e,t){return function(r,i,u){return n(i,u)?e&&e(r,i,u):t&&t(r,i,u),r}}};e.exports=r},{}],19:[function(n,e,t){var r=n("crossfilter"),i={add:function(n,e,t){var i,u=r.bisect.by(function(n){return n}).left,o=r.bisect.by(function(n){return n.x}).right;return function(r,c,f){return e&&e(r,c,f),i=t(r).histogram[o(t(r).histogram,n(c),0,t(r).histogram.length)-1],i.y++,i.splice(u(i,n(c),0,i.length),0,n(c)),r}},remove:function(n,e,t){var i,u=r.bisect.by(function(n){return n}).left,o=r.bisect.by(function(n){return n.x}).right;return function(r,c,f){return e&&e(r,c,f),i=t(r).histogram[o(t(r).histogram,n(c),0,t(r).histogram.length)-1],i.y--,i.splice(u(i,n(c),0,i.length),1),r}},initial:function(n,e,t){return function(r){r=e(r),t(r).histogram=[];for(var i=[],u=1;u<n.length;u++)i=[],i.x=n[u-1],i.dx=n[u]-n[u-1],i.y=0,t(r).histogram.push(i);return r}}};e.exports=i},{crossfilter:7}],20:[function(n,e,t){var r={add:function(n,e){return function(t,r,i){return n&&n(t,r,i),e(t).max=e(t).valueList[e(t).valueList.length-1],t}},remove:function(n,e){return function(t,r,i){return n&&n(t,r,i),0===e(t).valueList.length?(e(t).max=void 0,t):(e(t).max=e(t).valueList[e(t).valueList.length-1],t)}},initial:function(n,e){return function(t){return t=n(t),e(t).max=void 0,t}}};e.exports=r},{}],21:[function(n,e,t){var r={add:function(n,e){var t;return function(r,i,u){return n&&n(r,i,u),t=Math.floor(e(r).valueList.length/2),e(r).valueList.length%2?e(r).median=e(r).valueList[t]:e(r).median=(e(r).valueList[t-1]+e(r).valueList[t])/2,r}},remove:function(n,e){var t;return function(r,i,u){return n&&n(r,i,u),t=Math.floor(e(r).valueList.length/2),0===e(r).valueList.length?(e(r).median=void 0,r):(1===e(r).valueList.length||e(r).valueList.length%2?e(r).median=e(r).valueList[t]:e(r).median=(e(r).valueList[t-1]+e(r).valueList[t])/2,r)}},initial:function(n,e){return function(t){return t=n(t),e(t).median=void 0,t}}};e.exports=r},{}],22:[function(n,e,t){var r={add:function(n,e){return function(t,r,i){return n&&n(t,r,i),e(t).min=e(t).valueList[0],t}},remove:function(n,e){return function(t,r,i){return n&&n(t,r,i),0===e(t).valueList.length?(e(t).min=void 0,t):(e(t).min=e(t).valueList[0],t)}},initial:function(n,e){return function(t){return t=n(t),e(t).min=void 0,t}}};e.exports=r},{}],23:[function(n,e,t){var r=(n("crossfilter"),{add:function(n,e,t){var r,i;return function(u,o,c){return e&&e(u,o,c),r=t(u).nest,n.forEach(function(n){i=r.filter(function(e){return e.key===n(o)})[0],i?r=i.values:(i=[],r.push({key:n(o),values:i}),r=i)}),r.push(o),u}},remove:function(n,e,t){var r;return function(i,u,o){return e&&e(i,u,o),r=t(i).nest,n.forEach(function(n){r=r.filter(function(e){return e.key===n(u)})[0].values}),r.splice(r.indexOf(u),1),i}},initial:function(n,e){return function(t){return t=n(t),e(t).nest=[],t}}});e.exports=r},{crossfilter:7}],24:[function(n,e,t){var r=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1}};e.exports=r},{}],25:[function(n,e,t){function r(n){return function(e,t,r){e.post=function(){var i=function(){return i.all()};i.all=function(){return e.all()};var u=n.postprocessors;return Object.keys(u).forEach(function(n){i[n]=function(){var e=i.all,o=[].slice.call(arguments);return i.all=function(){return u[n](e,r,t).apply(null,o)},i}}),i}}}e.exports=r},{}],26:[function(n,e,t){e.exports=function(e){e.postprocessors={},e.registerPostProcessor=function(n,t){e.postprocessors[n]=t},e.registerPostProcessor("cap",n("./cap")),e.registerPostProcessor("sortBy",n("./sortBy"))}},{"./cap":13,"./sortBy":28}],27:[function(n,e,t){function r(){function n(n){if(t={reduceAdd:function(n){return n},reduceRemove:function(n){return n},reduceInitial:function(){return{}}},i.build(e,t),e.groupAll)if(n.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var r,u,o,a,s,l=f.bisect.by(function(n){return n.key}).left;n.reduce(function(n,i,c){for(o=e.groupAll(i),a=o.length,u=0;a>u;u++)s=o[u],r=l(n,s,0,n.length),n[r]&&n[r].key===s||n.splice(r,0,{key:s,value:t.reduceInitial()}),t.reduceAdd(n[r].value,i,c);return n},function(n,i,c){for(o=e.groupAll(i),a=o.length,u=0;a>u;u++)r=l(n,o[u],0,n.length),t.reduceRemove(n[r].value,i,c);return n},function(){return[]}),n.all||(n.all=function(){return this.value()})}else n.reduce(t.reduceAdd,t.reduceRemove,t.reduceInitial);return c(n,e,t),n}var e=o(),t={};return u.build(n,e),n}var i=n("./build.js"),u=n("./accessors.js"),o=n("./parameters.js"),c=n("./postprocess"),f=n("crossfilter");n("./postprocessors")(r),c=c(r),e.exports=r},{"./accessors.js":8,"./build.js":12,"./parameters.js":24,"./postprocess":25,"./postprocessors":26,crossfilter:7}],28:[function(n,e,t){function r(n,e){return e>n?-1:n>e?1:n>=e?0:NaN}var i=function(n){if("function"==typeof n)return n;if(~n.indexOf(".")){var e=n.split(".");return function(n){return e.reduce(function(n,e){return n[e]},n)}}return function(e){return e[n]}},u=function(n,e){return function(t,r){return e(n(t),n(r))}};({}).toString;e.exports=function(n){return function(e,t){return 1===arguments.length&&(t=r),n().sort(u(i(e),t))}}},{}],29:[function(n,e,t){var r={add:function(n,e){return function(t,r,i){if(n&&n(t,r,i),e(t).count>0){e(t).std=0;var u=e(t).sumOfSq-e(t).sum*e(t).sum/e(t).count;u>0&&(e(t).std=Math.sqrt(u/(e(t).count-1)))}else e(t).std=0;return t}},remove:function(n,e){return function(t,r,i){if(n&&n(t,r,i),e(t).count>0){e(t).std=0;var u=e(t).sumOfSq-e(t).sum*e(t).sum/e(t).count;u>0&&(e(t).std=Math.sqrt(u/(e(t).count-1)))}else e(t).std=0;return t}},initial:function(n,e){return function(t){return t=n(t),e(t).std=0,t}}};e.exports=r},{}],30:[function(n,e,t){var r={add:function(n,e,t){return function(r,i,u){return e&&e(r,i,u),t(r).sumOfSq=t(r).sumOfSq+n(i)*n(i),r}},remove:function(n,e,t){return function(r,i,u){return e&&e(r,i,u),t(r).sumOfSq=t(r).sumOfSq-n(i)*n(i),r}},initial:function(n,e){return function(t){return t=n(t),e(t).sumOfSq=0,t}}};e.exports=r},{}],31:[function(n,e,t){var r={add:function(n,e,t){return function(r,i,u){return e&&e(r,i,u),t(r).sum=t(r).sum+n(i),r}},remove:function(n,e,t){return function(r,i,u){return e&&e(r,i,u),t(r).sum=t(r).sum-n(i),r}},initial:function(n,e){return function(t){return t=n(t),e(t).sum=0,t}}};e.exports=r},{}],32:[function(n,e,t){var r=n("crossfilter"),i={add:function(n,e,t){var r,i;return function(u,o,c){return e&&e(u,o,c),r=t(u).bisect(t(u).values,n(o),0,t(u).values.length),i=t(u).values[r],i&&i[0]===n(o)?i[1]++:t(u).values.splice(r,0,[n(o),1]),u}},remove:function(n,e,t){var r;return function(i,u,o){return e&&e(i,u,o),r=t(i).bisect(t(i).values,n(u),0,t(i).values.length),t(i).values[r][1]--,i}},initial:function(n,e){return function(t){return t=n(t),e(t).values=[],e(t).bisect=r.bisect.by(function(n){return n[0]}).left,t}}};e.exports=i},{crossfilter:7}],33:[function(n,e,t){var r=n("crossfilter"),i={add:function(n,e,t){var i,u=r.bisect.by(function(n){return n}).left;return function(r,o,c){return e&&e(r,o,c),i=u(t(r).valueList,n(o),0,t(r).valueList.length),t(r).valueList.splice(i,0,n(o)),r}},remove:function(n,e,t){var i,u=r.bisect.by(function(n){return n}).left;return function(r,o,c){return e&&e(r,o,c),i=u(t(r).valueList,n(o),0,t(r).valueList.length),t(r).valueList.splice(i,1),r}},initial:function(n,e){return function(t){return t=n(t),e(t).valueList=[],t}}};e.exports=i},{crossfilter:7}],34:[function(n,e,t){"use strict";function r(n){var e=i(n).reverse();return function(n){return e.reduce(function(n,e){return e(n)},n)}}function i(n){var e=x.isObject(n)?u(n):n;if(x.isString(n))return function(e){return e[n]};if(x.isArray(n)){var t=x.map(n,i);return function(n){return t.map(function(e){return e(n)})}}if(e.key){if(k[e.key])return[k[e.key],i(e.value)];console.error("Could not find aggregration method",e)}return[]}function u(n){for(var e in n)if(n.hasOwnProperty(e))return{key:e,value:n[e]}}function o(n){var e=[],t=n.indexOf("("),r=n.indexOf(")"),i=t>-1?n.substring(0,t):n;return k[i]?(t>-1&&r>-1&&r>t&&(e=n.substring(t+1,r).split(",")),{aggregator:k[i],params:e}):!1}function c(n){return n.reduce(function(n,e){return n+e})}function f(n){return n.reduce(function(n,e){return n+e})/n.length}function a(n){return Math.max.apply(null,n)}function s(n){return Math.min.apply(null,n)}function l(n){return n.length}function d(n){return n[0]}function p(n){return n[n.length-1]}function v(n,e){return n[e]}function h(n,e){return n[n.length-e]}function m(n,e){return n[Math.round(n.length*(e/100))]}function y(n,e){return n.map(function(n){return n[e]})}function g(n,e){return x.isString(e)&&n.sort(function(n,t){return n[e]<t[e]?-1:n[e]>t[e]?1:0}),x.isNumber(e)&&n.sort(function(n,t){return n[e]-t[e]}),Array.prototype.slice.call(n).sort(b)}var x=n("./lodash"),b=n("javascript-natural-sort"),k={$sum:c,$avg:f,$max:a,$min:s,$count:l,$first:d,$last:p,$get:v,$nth:v,$nthLast:h,$nthPct:m,$map:y,$sort:g};e.exports={makeFunction:r,aggregators:k,parseAggregatorParams:o}},{"./lodash":41,"javascript-natural-sort":4}],35:[function(n,e,t){"use strict";var r=n("q"),i=n("./lodash");e.exports=function(n){return function(e){return e?(e=i.isArray(e)?e:[e],r.all(i.map(e,function(e){
i.isObject(e)&&(e=e.key);var t=i.remove(n.columns,function(n){return i.isArray(e)?!i.xor(n.key,e).length:n.key===e?!n.dynamicReference:void 0})[0];if(t){var u=i.map(t.removeListeners,function(n){return r.resolve(n())});return u.push(r.resolve(t.dimension.dispose())),r.all(u)}})).then(function(){return n})):r.all(i.map(n.columns,function(n){return r.resolve(n.dimension.dispose())})).then(function(){return n.columns=[],n})}}},{"./lodash":41,q:5}],36:[function(n,e,t){"use strict";var r=n("q"),i=n("./lodash");e.exports=function(e){function t(n){return(n===!0||i.isUndefined(n))&&(n={key:!0}),i.isArray(n)||(n=[n]),r.all(i.map(n,c)).then(function(n){return e})}function u(n){return i.find(e.columns,function(e){return i.isArray(n)?!i.xor(e.key,n).length:e.key===n})}function o(n){return i.isNumber(n)?"number":i.isBoolean(n)?"bool":i.isArray(n)?"array":i.isObject(n)?"object":"string"}function c(n){var t=i.isObject(n)?n:{key:n};return r["try"](function(){return r.resolve(e.cf.all())}).then(function(n){var r;if(i.isArray(t.key)){if(t.complex=!0,r=i.map(i.pick(n[0],t.key)),r.length!==t.key.length)throw new Error("Column key does not exist in data!",t.key)}else r=n[0][t.key];if(!t.complex&&t.key!==!0&&"undefined"==typeof r)throw new Error("Column key does not exist in data!",t.key);var c=u(t.key);return c?(c.temporary=!1,t.dynamicReference&&(c.dynamicReference=!0),e):(t.type=t.key===!0?"all":t.complex?"complex":t.array?"array":o(r),f.make(t.key,t.type))}).then(function(n){function u(){return r["try"](function(){return r.resolve(t.dimension.bottom(1/0))}).then(function(n){var e=f.makeAccessor(t.key);t.values=i.sort(i.uniq(i.flatten(i.map(n,e))))})}return t.dimension=n,t.removeListeners=[u],t.addListeners=[u],e.columns.push(t),u()}).then(function(){return e})}var f=n("./dimension")(e),a=t;return a.find=u,a}},{"./dimension":38,"./lodash":41,q:5}],37:[function(n,e,t){"use strict";var r=n("q"),i=n("crossfilter2"),u=n("./lodash");e.exports=function(n){function e(n){return u.isArray(n)?r.resolve(i(n)):n&&"function"==typeof n.dimension?r.resolve(n):r.reject(new Error("No Crossfilter data or instance found!"))}function t(e){return r["try"](function(){return r.resolve(n.cf.add(e))}).then(function(){var e=[];return u.forEach(n.columns,function(n){u.forEach(n.addListeners,function(n){e.push(n())})}),r.all(e)}).then(function(){return n})}function o(){return r["try"](function(){return r.resolve(n.cf.remove())}).then(function(){return n})}return{build:e,add:t,remove:o}}},{"./lodash":41,crossfilter2:3,q:5}],38:[function(n,e,t){"use strict";var r=n("q"),i=n("./lodash");e.exports=function(n){function e(e,i){var u=t(e);return r.resolve(n.cf.dimension(u,"array"==i))}function t(n){var e;if(i.isArray(n)){var t=i.map(n,function(n){return"d['"+n+"']"});e=new Function("d","return "+JSON.stringify(t).replace(/\"/g,""))}else e=n===!0?function(n,e){return e}:function(e){return e[n]};return e}return{make:e,makeAccessor:t}}},{"./lodash":41,q:5}],39:[function(n,e,t){"use strict";function r(n,e){return n[e]}function i(n,e){e=e(n);for(var t=0;t<e.length;t++)if(!e[t])return!1;return!0}function u(n,e){e=e(n);for(var t=0;t<e.length;t++)if(e[t])return!0;return!1}function o(n,e){e=e(n);for(var t=0;t<e.length;t++)if(e[t])return!1;return!0}function c(n,e){return n===e()}function f(n,e){return n>e()}function a(n,e){return n>=e()}function s(n,e){return n<e()}function l(n,e){return n<=e()}function d(n,e){return n!==e()}function p(n,e){return typeof n===e()}function v(n,e){return n.indexOf(e())>-1}function h(n,e){return-1===n.indexOf(e())}function m(n,e){return n.length===e()}e.exports={$field:r,$and:i,$or:u,$not:o,$eq:c,$gt:f,$gte:a,$lt:s,$lte:l,$ne:d,$type:p,$in:v,$nin:h,$size:m}},{}],40:[function(n,e,t){"use strict";var r=n("q"),i=n("./lodash"),u=n("./expressions"),o=n("./aggregation");e.exports=function(n){function e(e,t){t=i.isUndefined(t)?!1:t;var u=n.column.find(e);return r["try"](function(){return u?u:n.column({key:e,temporary:!0}).then(function(){return n.column.find(e)})}).then(function(e){var r=i.clone(n.filters,!0),u=e.complex?JSON.stringify(e.key):e.key;return r[u]=t,c(r)})}function t(e){n.filters=e||{}}function c(e){var t=i.map(e,function(t,u){if(n.filters[u]&&i.isEqual(t,n.filters[u]))return r.resolve();var o;o="["===u.charAt(0)?n.column.find(JSON.parse(u)):n.column.find(u);var c;return c=i.isUndefined(t)||t===!1?!1:s(t),c?r.resolve(o.dimension.filter(c)):(e[u]=!1,r.resolve(o.dimension.filterAll()))});return r.all(t).then(function(){return n.filters=e,r.all(i.map(n.filters,function(e,t){if(!e){delete n.filters[t];var r=n.column.find("["===t.charAt(0)?JSON.parse(t):t);if(r.temporary&&!r.dynamicReference)return n.clear(r.key)}}))}).then(function(){return n})}function f(n){function e(n){i.forEach(n,function(n,r){var u=a(n,r);u&&t.push(u),i.isString(n)&&(u=a(null,n),u&&t.push(u)),i.isObject(n)&&e(n)})}var t=[];return e(n.filter),t}function a(n,e){return"$data"===e?!0:e&&"$column"===e?i.isString(n)?n:(console.warn('The value for filter "$column" must be a valid column key',n),!1):void 0}function s(e,t){var r;if(i.isString(e)){var c=a(null,e);if(c){var f=n.column.find(c),l=f.dimension.bottom(1/0);return function(n){return l}}}return i.isString(e)||i.isNumber(e)||i.isBoolean(e)?function(n){return"undefined"==typeof n?e:u.$eq(n,function(){return e})}:i.isArray(e)?(r=i.map(e,function(n){return s(n,t)}),function(n){return r.map(function(e){return e(n)})}):i.isObject(e)?(r=i.map(e,function(e,r){var i=s(e,t),c=a(e,r);if(c){var f=n.column.find(c),l=f.dimension.bottom(1/0);return function(n){return l}}if(u[r])return function(n){return u[r](n,i)};var d=o.parseAggregatorParams(r);return d?(t=!0,i=s(e,t),function(n){return d.aggregator.apply(null,[i()].concat(d.params))}):function(n){return n=n[r],i(n,i)}}),t?1===r.length?function(n){return r[0](n)}:function(n){return i.map(r,function(e){return e(n)})}:function(n){return u.$and(n,function(n){return i.map(r,function(e){return e(n)})})}):(console.log("no expression found for ",e),!1)}return{filter:e,filterAll:t,applyFilters:c,makeFunction:s,scanForDynamicFilters:f}}},{"./aggregation":34,"./expressions":39,"./lodash":41,q:5}],41:[function(n,e,t){"use strict";function r(n){n=n||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(n[t]=arguments[e][t]);return n}function i(n,e){return n.find(e)}function u(n,e){return n.filter(function(t,r){var i=e(t);return i?(n.splice(r,1),!0):void 0})}function o(n){return Array.isArray(n)}function c(n){return"object"==typeof n&&!o(n)}function f(n){return"boolean"==typeof n}function a(n){return"string"==typeof n}function s(n){return"number"==typeof n}function l(n){return"function"==typeof n}function d(n,e){return e.replace("[",".").replace("]","").split(".").reduce(function(n,e){return n[e]},n)}function p(n,e){var t,r;if(l(e)){if(c(n)){t=[];for(r in n)n.hasOwnProperty(r)&&t.push(e(n[r],r,n));return t}return n.map(e)}if(c(n)){t=[];for(r in n)n.hasOwnProperty(r)&&t.push(n[r][e]);return t}return n.map(function(n,t){return n[e]})}function v(n,e){return l(e)?n.sort(function(n,e){return n.value>e.value?1:n.value<e.value?-1:0}):void 0}function h(n,e){if(!c(n))return o(n)?n.forEach(e):void 0;for(var t in n)n.hasOwnProperty(t)&&e(n[t],t,n)}function m(n){return"undefined"==typeof n}function y(n,e){var t={};return h(e,function(e){n[e]&&(t[e]=n[e])}),t}function g(n,e){var t=[];return h(n,function(n){return e.indexOf(n)<0?t.push(n):void 0}),t}function x(n){return JSON.parse(JSON.stringify(n,function(n,e){return"function"==typeof e?e.toString():e}))}function b(n,e){if("object"==typeof n&&null!==n&&"object"==typeof e&&null!==e){if(Object.keys(n).length!=Object.keys(e).length)return!1;for(var t in n){if(!e.hasOwnProperty(t))return!1;if(!b(n[t],e[t]))return!1}return!0}return n===e}function k(n,e){var t=n.length,r=e.length;return t>r?n.splice(r,t-r):r>t&&n.push.apply(n,new Array(r-t)),h(n,function(t,r){n[r]=e[r]}),n}function w(n){var e={};return n.filter(function(n){return e.hasOwnProperty(n)?!1:e[n]=!0})}function A(n){return n.reduce(function(n,e){return n.concat(e)},[])}function j(n){return n.sort(O)}var O=n("javascript-natural-sort");e.exports={assign:r,find:i,remove:u,isArray:o,isObject:c,isBoolean:f,isString:a,isNumber:s,isFunction:l,get:d,map:p,sortBy:v,forEach:h,isUndefined:m,pick:y,xor:g,clone:x,isEqual:b,replaceArray:k,uniq:w,flatten:A,sort:j}},{"javascript-natural-sort":4}],42:[function(n,e,t){"use strict";var r=n("q"),i=n("./lodash");e.exports=function(e){var t=n("./reductiofy")(e),u=n("./filters")(e);return function(n){"undefined"==typeof n&&(n={}),"undefined"==typeof n.select&&(n.select={$count:!0}),n.groupBy=n.groupBy||!0;var o,c=e.column.find(n.groupBy);return r["try"](function(){return c?c:e.column({key:n.groupBy,type:i.isUndefined(n.type)?null:n.type,array:!!n.array}).then(function(e){return i.find(e.columns,function(e){return e.key===n.groupBy})})}).then(function(n){return c=n,r.resolve(c.dimension.group())}).then(function(e){return o=e,u.scanForDynamicFilters(n)}).then(function(n){return n.length?r.all(i.map(n,function(n){e.column({key:n,dynamicReference:o})})).then(function(){return!0}):!1}).then(function(r){function i(e,r){return t(n).then(function(n){n(e.group),e.data=e.group.all(),e.dynamicData=r})}var u={universe:e,crossfilter:e.cf,dimension:c.dimension,group:o};return r&&(c.addListeners.push(function(n){return i(u,n)}),c.removeListeners.push(function(n){return i(u,n)})),i(u).then(function(){return u})})}}},{"./filters":40,"./lodash":41,"./reductiofy":44,q:5}],43:[function(n,e,t){"use strict";function r(n,e){return n.count(!0)}function i(n,e){return n.sum(e)}function u(n,e){return n.avg(e)}function o(n,e){return n.min(e)}function c(n,e){return n.max(e)}function f(n,e){return n.median(e)}function a(n,e){return n.sumOfSq(e)}function s(n,e){return n.std(e)}n("./lodash");e.exports={shorthandLabels:{$count:"count",$sum:"sum",$avg:"avg",$min:"min",$max:"max",$med:"med",$sumSq:"sumSq",$std:"std"},aggregators:{$count:r,$sum:i,$avg:u,$min:o,$max:c,$med:f,$sumSq:a,$std:s}}},{"./lodash":41}],44:[function(n,e,t){"use strict";var r=n("reductio"),i=n("./lodash"),u=n("./reductioAggregators"),o=(n("./expressions"),n("./aggregation"));e.exports=function(e){var t=n("./filters")(e);return function(n){function e(n,t){var r=i.sortBy(i.map(t,function(n,e){return{key:e,value:n}}),function(n){return u.aggregators[n.key]?0:1});return i.forEach(r,function(t){if(u.aggregators[t.key]){var r=c(t.value);return void(n=u.aggregators[t.key](n,r))}return i.isObject(t.value)?void(n=e(n.value(t.key),t.value)):void console.error("Nested selects must be an object",t.key)})}function c(n){return"string"==typeof n||"number"==typeof n?n+"":i.isObject(n)?o.makeFunction(n):void 0}var f=r();n.groupBy;if(e(f,n.select),n.filter){var a=t.makeFunction(n.filter);a&&f.filter(a)}return Promise.resolve(f)}}},{"./aggregation":34,"./expressions":39,"./filters":40,"./lodash":41,"./reductioAggregators":43,reductio:27}],45:[function(n,e,t){"use strict";function r(e){var t={columns:[],filters:{}},r=n("./crossfilter")(t);return r.build(e).then(function(e){return t.cf=e,i.assign(t,{add:r.add,remove:r.remove,column:n("./column")(t),query:n("./query")(t),filter:n("./filters")(t).filter,clear:n("./clear")(t)})})}var i=(n("q"),n("./lodash"));e.exports=r},{"./clear":35,"./column":36,"./crossfilter":37,"./filters":40,"./lodash":41,"./query":42,q:5}]},{},[45])(45)});