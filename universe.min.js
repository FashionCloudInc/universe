!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.universe=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,n,r){(function(e,i){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof i?o=i:"undefined"!=typeof self&&(o=self),o.Promise=e()}}(function(){var t,n,r;return function o(t,e,n){function r(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,o,t,e,n)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,n,r){"use strict";function i(){this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=l}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function s(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}var u;try{throw new Error}catch(c){u=c}var l=t("./schedule"),f=t("./queue"),p=t("./util");i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){p.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},p.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?s.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=s,i.prototype.settlePromises=a),i.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=u},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var p={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,s,void 0,l,p),c._then(a,u,void 0,l,p),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),u=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(u){var c=a._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return o(n).call(c,u)}else if("function"==typeof f){var p=o(f).call(c,u);if(p===s)return p;if(p)return o(n).call(c,u)}else if(r.isObject(u)){for(var h=i(f),d=0;d<h.length;++d){var v=h[d];if(f[v]!=u[v])continue t}return o(n).call(c,u)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,s=t._peekContext,a=t.prototype._peekContext,u=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=s,t.prototype._peekContext=a,t.prototype._promiseCreated=u,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function s(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+N.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function a(t){if(!this.isCancellable())return this;var e=this._onCancel();void 0!==e?N.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function u(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new P(this._peekContext())}function v(t,e){if(H(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=k(t);N.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(t,"__stackCleaned__",!0)}}}function _(t,e,n,r,i){if(void 0===t&&null!==e&&Q){if(void 0!==i&&i._returnedNonUndefined())return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,e)}}function y(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),g(n)}function g(t,e,r){if(it.warnings){var i,o=new q(t);if(e)r._attachExtraTrace(o);else if(it.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var s=k(o);o.stack=s.message+"\n"+s.stack.join("\n")}Z("warning",o)||C(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function x(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function j(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||V.test(r),o=i&&et(r);i&&!o&&(B&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function w(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||V.test(r))break}return n>0&&(e=e.slice(n)),e}function k(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?w(t):["    (No stack trace)"],{message:n,stack:j(e)}}function C(t,e,n){if("undefined"!=typeof console){var r;if(N.isObject(t)){var i=t.stack;r=e+U(i,t)}else r=e+String(t);"function"==typeof I?I(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function A(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){D.throwLater(o)}"unhandledRejection"===t?Z(t,n,r)||i||C(n,"Unhandled rejection "):Z(t,r)}function O(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():N.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+E(e)+">, no stack trace)"}function E(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function F(){return"function"==typeof rt}function S(t){var e=t.match(nt);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function T(t,e){if(F()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){var c=S(i[u]);if(c){n=c.fileName,s=c.line;break}}for(var u=0;u<o.length;++u){var c=S(o[u]);if(c){r=c.fileName,a=c.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||(et=function(t){if($.test(t))return!0;var e=S(t);return!!(e&&e.fileName===n&&s<=e.line&&e.line<=a)})}}function P(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);rt(this,P),e>32&&this.uncycle()}var R,L,I,M=n._getDomain,D=n._async,q=t("./errors").Warning,N=t("./util"),H=N.canAttachTrace,$=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,V=null,U=null,B=!1,K=!(0==N.env("BLUEBIRD_DEBUG")),z=!(0==N.env("BLUEBIRD_WARNINGS")||!K&&!N.env("BLUEBIRD_WARNINGS")),G=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!K&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Q=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(z||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),D.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",R,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",L,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return g(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=M();L="function"==typeof t?null===e?t:e.bind(t):void 0},n.onUnhandledRejectionHandled=function(t){var e=M();R="function"==typeof t?null===e?t:e.bind(t):void 0};var W=function(){};n.longStackTraces=function(){if(D.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!it.longStackTraces&&F()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;it.longStackTraces=!0,W=function(){if(D.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),D.enableTrampoline(),it.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=v,r.activateLongStackTraces(),D.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return it.longStackTraces&&F()};var X=function(){try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!N.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),Y=function(){return N.isNode?function(){return e.emit.apply(e,arguments)}:N.global?function(t){var e="on"+t.toLowerCase(),n=N.global[e];return n?(n.apply(N.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}(),J={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},Z=function(t){var e=!1;try{e=Y.apply(null,arguments)}catch(n){D.throwLater(n),e=!0}var r=!1;try{r=X(t,J[t].apply(null,arguments))}catch(n){D.throwLater(n),r=!0}return r||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&W()),"warnings"in t){var e=t.warnings;it.warnings=!!e,Q=it.warnings,N.isObject(e)&&"wForgottenReturn"in e&&(Q=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!it.cancellation){if(D.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=u,n.prototype._setOnCancel=c,n.prototype._attachCancellationCallback=a,n.prototype._execute=s,tt=f,it.cancellation=!0}"monitoring"in t&&(t.monitoring&&!it.monitoring?(it.monitoring=!0,n.prototype._fireEvent=Z):!t.monitoring&&it.monitoring&&(it.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var tt=p,et=function(){return!1},nt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(P,Error),r.CapturedTrace=P,P.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;t-1>a?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},P.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=k(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(j(i.stack.split("\n"))),i=i._parent;x(r),b(r),N.notEnumerableProp(t,"stack",m(n,r)),N.notEnumerableProp(t,"__stackCleaned__",!0)}};var rt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():O(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,V=t,U=e;var n=Error.captureStackTrace;return et=function(t){return $.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return V=/@/,U=e,B=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(U=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?O(e):e.toString()},null):(V=t,U=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(I=function(t){console.warn(t)},N.isNode&&e.stderr.isTTY?I=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(I=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var it={warnings:z,longStackTraces:!1,cancellation:!1,monitoring:!1};return G&&n.longStackTraces(),{longStackTraces:function(){return it.longStackTraces},warnings:function(){return it.warnings},cancellation:function(){return it.cancellation},monitoring:function(){return it.monitoring},propagateFromFunction:function(){return tt},boundValueFunction:function(){return h},checkForgottenReturns:_,setBounds:T,warn:g,deprecated:y,CapturedTrace:P,fireDomEvent:X,fireGlobalEvent:Y}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),u=a.freeze,c=t("./util"),l=c.inherits,f=c.notEnumerableProp,p=r("Warning","warning"),h=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(_){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<y.length;++g)"function"==typeof Array.prototype[y[g]]&&(v.prototype[y[g]]=Array.prototype[y[g]]);a.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var m=0;v.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:h,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},c=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},p=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:p,keys:a,names:a,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function s(){return u.call(this,this.promise._target()._settledValue())}function a(t){return o(this,t)?void 0:(f.e=t,f)}function u(t){var r=this.promise,u=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?u.call(r._boundValue()):u.call(r._boundValue(),t);if(void 0!==c){r._setReturnedNonUndefined();var p=n(c,r);if(p instanceof e){if(null!=this.cancelPromise){if(p.isCancelled()){var h=new l("late cancellation observer");return r._attachExtraTrace(h),f.e=h,f}p.isPending()&&p._attachCancellationCallback(new i(this))}return p._then(s,a,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var c=t("./util"),l=e.CancellationError,f=c.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,u,u)},e.prototype.tap=function(t){return this._passThrough(t,1,u)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=h(n[o])(t);if(r._popContext(),s===p){r._pushContext();var a=e.reject(p.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function u(t,n,i,o){var s=this._promise=new e(r);s._captureStackTrace(),s._setOnCancel(this),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null}var c=t("./errors"),l=c.TypeError,f=t("./util"),p=f.errorObj,h=f.tryCatch,d=[];f.inherits(u,o),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=function(){this._promise=this._generator=null},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=h(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=h(this._generator["throw"]).call(this._generator,r),this._promise._popContext(),t===p&&t.e===r&&(t=null)}var i=this._promise;this._cleanup(),t===p?i._rejectCallback(t.e,!1):i.cancel()}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(t){var n=this._promise;if(t===p)return this._cleanup(),n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?this._promiseFulfilled(o._value()):0!==(16777216&s)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){
this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:h,this._init$(void 0,-2)}function u(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+l.classString(e));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new a(t,e,o,i).promise()}var c=e._getDomain,l=t("./util"),f=l.tryCatch,p=l.errorObj,h=[];l.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var c=this._promise,l=this._callback,h=c._boundValue();c._pushContext();var d=f(l).call(h,t,n,o),v=c._popContext();if(s.checkForgottenReturns(d,v,null!==a?"Promise.filter":"Promise.map",c),d===p)return this._reject(d.e),!0;var _=i(d,this._promise);if(_ instanceof e){_=_._target();var y=_._bitField;if(0===(50397184&y))return u>=1&&this._inFlight++,r[n]=_,_._proxy(this,-1*(n+1)),!1;if(0===(33554432&y))return 0!==(16777216&y)?(this._reject(_._reason()),!0):(this._cancel(),!0);d=_._value()}r[n]=d}var g=++this._totalResolved;return g>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=s.isArray(c)?a(t).apply(l,c):a(t).call(l,c)}else u=a(t)();var f=r._popContext();return o.checkForgottenReturns(u,f,"Promise.try",r),r._resolveFromSyncValue(u),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,u=t("./errors"),c=u.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===u&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){function n(){}function r(t,e){if("function"!=typeof e)throw new g("expecting a function but got "+h.classString(e));if(t.constructor!==i)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function i(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==b&&(r(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var u,c=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new i.PromiseInspection(this._target())},f=function(t){return i.reject(new g(t))},p={},h=t("./util");u=h.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(i,"_getDomain",u);var d=t("./es5"),v=t("./async"),_=new v;d.defineProperty(i,"_async",{value:_});var y=t("./errors"),g=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var m=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},x={},j={},w=t("./thenables")(i,b),k=t("./promise_array")(i,b,w,f,n),C=t("./context")(i),A=C.create,O=t("./debuggability")(i,C),E=(O.CapturedTrace,t("./finally")(i,w)),F=t("./catch_filter")(j),S=t("./nodeback"),T=h.errorObj,P=h.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!h.isObject(o))return f("expecting an object but got "+h.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,F(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},i.prototype.then=function(t,e){if(O.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(n+=", "+h.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?f("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,x,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new k(this).promise()},i.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,r=P(t)(S(e,n));return r===T&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new k(t).promise()},i.cast=function(t){var e=w(t);return e instanceof i||(e=new i(b),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+h.classString(t));var e=_._schedule;return _._schedule=t,e},i.prototype._then=function(t,e,n,r,o){var s=void 0!==o,a=s?o:new i(b),c=this._target(),l=c._bitField;s||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var f=u();if(0!==(50397184&l)){var p,h,d=c._settlePromiseCtx;0!==(33554432&l)?(h=c._rejectionHandler0,p=t):0!==(16777216&l)?(h=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(d=c._settlePromiseLateCancellationObserver,h=new m("late cancellation observer"),c._attachExtraTrace(h),p=e),_.invoke(d,c,{handler:null===f?p:"function"==typeof p&&f.bind(p),promise:a,receiver:r,value:h})}else c._addCallbacks(t,e,a,r,f);return a},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==p)return void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[s+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(c(),!1);var n=w(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(c());var o=r._bitField;if(0===(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;s>a;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&o))this._fulfill(r._value());else if(0!==(16777216&o))this._reject(r._reason());else{var u=new m("late cancellation observer");r._attachExtraTrace(u),this._reject(u)}}},i.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&O.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},i.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===x?n&&"number"==typeof n.length?o=P(t).apply(this._boundValue(),n):(o=T,o.e=new g("cannot .spread() a non-array: "+h.classString(n))):o=P(t).call(e,n);var s=r._popContext();i=r._bitField,0===(65536&i)&&(o===j?r._reject(n):o===T?r._rejectCallback(o.e,!1):(O.checkForgottenReturns(o,s,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var s=t instanceof i,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),r instanceof E&&r.isFinallyHandler()?(r.cancelPromise=t,P(e).call(r,o)===T&&t._reject(T.e)):e===l?t._fulfill(l.call(r)):r instanceof n?r._promiseCancelled(t):s||t instanceof k?t._cancel():r.cancel()):"function"==typeof e?s?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!==(33554432&a)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):s&&(u&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=c();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():_.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?_.fatalError(t,h.isNode):void((65535&e)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){O.deprecated("Promise.defer","new Promise");var t=new i(b);return{promise:t,resolve:o,reject:s}},h.notEnumerableProp(i,"_makeSelfResolutionError",c),t("./method")(i,b,w,f,O),t("./bind")(i,b,w,O),t("./cancel")(i,k,f,O),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,k,w,b,O),i.Promise=i,t("./map.js")(i,k,f,w,b,O),t("./using.js")(i,f,w,A,b,O),t("./timers.js")(i,b,O),t("./generators.js")(i,f,b,w,n,O),t("./nodeify.js")(i),t("./call_get.js")(i),t("./props.js")(i,k,w,f),t("./race.js")(i,b,w,f),t("./reduce.js")(i,k,f,w,b,O),t("./settle.js")(i,k,O),t("./some.js")(i,k,f),t("./promisify.js")(i,b),t("./any.js")(i),t("./each.js")(i,b),t("./filter.js")(i,b),h.toFastProperties(i),h.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new i(b)),O.setBounds(v.firstLineError,h.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{}}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=t("./util");u.isArray;return u.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function c(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(c,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return void this._promise._rejectCallback(l,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var u=r(t[a],i);u instanceof e?(u=u._target(),s=u._bitField):s=null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!j.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=h.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=h.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],f=t[l],p=r===w?!0:w(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,p)||u.push(l,f)}return s(u,e,n),u}function u(t,r,i,o,s,a){function u(){var i=r;r===p&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof l&&this!==c?this[l]:t,u=d(o,a);try{s.apply(i,v(arguments,u))}catch(f){o._rejectCallback(_(f),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=t;return"string"==typeof l&&(t=o),h.notEnumerableProp(u,"__isPromisified__",!0),u}function c(t,e,n,r,i){for(var o=new RegExp(k(e)+"$"),s=a(t,e,o,n),u=0,c=s.length;c>u;u+=2){var l=s[u],f=s[u+1],d=l+e;if(r===C)t[d]=C(l,p,l,f,e,i);else{var v=r(f,function(){return C(l,p,l,f,e,i)});h.notEnumerableProp(v,"__isPromisified__",!0),t[d]=v}}return h.toFastProperties(t),t}function l(t,e,n){return C(t,e,void 0,t,null,n)}var f,p={},h=t("./util"),d=t("./nodeback"),v=h.withAppended,_=h.maybeWrapAsError,y=h.canEvaluate,g=t("./errors").TypeError,m="Async",b={__isPromisified__:!0},x=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],j=new RegExp("^(?:"+x.join("|")+")$"),w=function(t){return h.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},C=y?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new g("expecting a function but got "+h.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?p:e.context,o=!!e.multiArgs,s=l(t,n,o);return h.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=m);var i=e.filter;"function"!=typeof i&&(i=w);var o=e.promisifier;if("function"!=typeof o&&(o=C),!h.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=h.inheritedDataKeys(t),a=0;a<s.length;++a){var u=t[s[a]];"constructor"!==s[a]&&h.isClass(u)&&(c(u.prototype,r,i,o,n),c(u,r,i,o,n))}return c(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=f(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function s(t){var n,s=r(t);return c(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=t("./util"),c=u.isObject,l=t("./es5");"function"==typeof Map&&(a=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),p=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=p(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var c=new e(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,f=c._reject,p=0,h=t.length;h>p;++p){var d=t[p];(void 0!==d||p in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=p();this._fn=null===s?n:s.bind(n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+h.classString(e));var o=new a(t,e,n,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var p=e._getDomain,h=t("./util"),d=h.tryCatch;h.inherits(a,n),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],29:[function(t,n,r){"use strict";var o,s=t("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(s.isNode&&"undefined"==typeof MutationObserver){var u=i.setImmediate,c=e.nextTick;o=s.isRecentNode?function(t){u.call(i,t)}:function(t){c.call(e,t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:a:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();n.exports=o},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,u=t("./errors").AggregateError,c=s.isArray,l={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){
this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===c){r&&r._pushContext();var u=e.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(s(t)){var u=new e(n);return t._then(u._fulfill,u._reject,void 0,u,null),u}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return c.e=e,c}}function s(t){return f.call(t,"_promise0")}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,f,!0),a=null)}var a=new e(n),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var f=!0,p=u.tryCatch(r).call(t,o,s);return f=!1,a&&p===c&&(a._rejectCallback(p.e,!0,!0),a=null),l}var u=t("./util"),c=u.errorObj,l=u.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function s(t){throw clearTimeout(this.handle),t}var a=t("./util"),u=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var s,a;return void 0!==o?(s=e.resolve(o)._then(c,null,null,t,void 0),r.cancellation()&&o instanceof e&&s._setOnCancel(o)):(s=new e(n),a=setTimeout(function(){s._fulfill()},+t),r.cancellation()&&s._setOnCancel(new i(a))),s._setAsyncGuaranteed(),s};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new u("operation timed out"):new u(e),a.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,a,u=new i(setTimeout(function(){n.isPending()&&f(n,e,a)},t));return r.cancellation()?(a=this.then(),n=a._then(o,s,void 0,u,void 0),n._setOnCancel(u)):n=this._then(o,s,void 0,u,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function u(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,n){function i(){if(s>=c)return l._fulfill();var o=u(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(f){return a(f)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,c=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function p(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function h(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),v=t("./errors").TypeError,_=t("./util").inherits,y=d.errorObj,g=d.tryCatch;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(f,l),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},h.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var u=new h(t),f=0;t>f;++f){var v=o[f];if(l.isDisposer(v)){var _=v;v=v.promise(),v._setDisposable(_)}else{var m=r(v);m instanceof e&&(v=m._then(p,null,null,{resources:u,index:f},void 0))}u[f]=v}for(var b=new Array(u.length),f=0;f<b.length;++f)b[f]=e.resolve(u[f]).reflect();var x=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return y.e=n.error(),y;if(!n.isFulfilled())return void x.cancel();t[e]=n.value()}j._pushContext(),i=g(i);var r=a?i.apply(void 0,t):i(t),o=j._popContext();return s.checkForgottenReturns(r,o,"Promise.using",j),r}),j=x.lastly(function(){var t=new e.PromiseInspection(x);return c(u,t)});return u.promise=j,j._setOnCancel(u),j},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(t,n,r){"use strict";function o(){try{var t=F;return F=null,t.apply(this,arguments)}catch(e){return E.e=e,E}}function s(t){return F=t,o}function a(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function u(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return a(t)?new Error(g(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!A.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function p(t,e,n){if(a(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return A.defineProperty(t,e,r),t}function h(t){throw t}function d(t){try{if("function"==typeof t){var e=A.names(t.prototype),n=A.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=R.test(t+"")&&A.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function v(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function _(t){return L.test(t)}function y(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function g(t){try{return t+""}catch(e){return"[no string representation]"}}function m(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{p(t,"isOperational",!0)}catch(e){}}function x(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function j(t){return m(t)&&A.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function k(t,e,n){for(var r=A.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{A.defineProperty(e,o,A.getDescriptor(t,o))}catch(s){}}}function C(t,n){return q?e.env[t]:n}var A=t("./es5"),O="undefined"==typeof navigator,E={e:{}},F,S="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof i?i:void 0!==this?this:null,T=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},P=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(A.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}t=A.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),R=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return j(t)?t:new Error(g(t))}:function(t){if(j(t))return t;try{throw new Error(g(t))}catch(e){return e}}}(),M=function(t){return A.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var D="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};M=function(t){return A.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?D(t):null}}var q="undefined"!=typeof e&&"[object process]"===w(e).toLowerCase(),N={isClass:d,isIdentifier:_,inheritedDataKeys:P,getDataPropertyOrDefault:f,thrower:h,isArray:A.isArray,asArray:M,notEnumerableProp:p,isPrimitive:a,isObject:u,isError:m,canEvaluate:O,errorObj:E,tryCatch:s,inherits:T,withAppended:l,maybeWrapAsError:c,toFastProperties:v,filledRange:y,toString:g,canAttachTrace:j,ensureErrorObject:I,originatesFromRejection:x,markAsOriginatingFromRejection:b,classString:w,copyDescriptors:k,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:q,env:C,global:S};N.isRecentNode=N.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),N.isNode&&N.toFastProperties(e);try{throw new Error}catch(H){N.lastLineError=H}n.exports=N},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(t,e,n){function r(){l=!1,a.length?c=a.concat(c):f=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(a=c,c=[];++f<e;)a&&a[f].run();f=-1,e=c.length}a=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},c=[],l=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],3:[function(t,e,n){!function(t){function e(t){return t}function n(t,e){for(var n=0,r=e.length,i=new Array(r);r>n;++n)i[n]=t[e[n]];return i}function r(t){function e(e,n,r,i){for(;i>r;){var o=r+i>>>1;t(e[o])<n?r=o+1:i=o}return r}function n(e,n,r,i){for(;i>r;){var o=r+i>>>1;n<t(e[o])?i=o:r=o+1}return r}return n.right=n,n.left=e,n}function i(t){function e(t,e,n){for(var i=n-e,o=(i>>>1)+1;--o>0;)r(t,o,i,e);return t}function n(t,e,n){for(var i,o=n-e;--o>0;)i=t[e],t[e]=t[e+o],t[e+o]=i,r(t,1,o,e);return t}function r(e,n,r,i){for(var o,s=e[--i+n],a=t(s);(o=n<<1)<=r&&(r>o&&t(e[i+o])>t(e[i+o+1])&&o++,!(a<=t(e[i+o])));)e[i+n]=e[i+o],n=o;e[i+n]=s}return e.sort=n,e}function o(t){function e(e,r,i,o){var s,a,u,c,l=new Array(o=Math.min(i-r,o));for(a=0;o>a;++a)l[a]=e[r++];if(n(l,0,o),i>r){s=t(l[0]);do(u=t(c=e[r])>s)&&(l[0]=c,s=t(n(l,0,o)[0]));while(++r<i)}return l}var n=i(t);return e}function s(t){function e(e,n,r){for(var i=n+1;r>i;++i){for(var o=i,s=e[i],a=t(s);o>n&&t(e[o-1])>a;--o)e[o]=e[o-1];e[o]=s}return e}return e}function a(t){function e(t,e,i){return(S>i-e?r:n)(t,e,i)}function n(n,r,i){var o,s=(i-r)/6|0,a=r+s,u=i-1-s,c=r+i-1>>1,l=c-s,f=c+s,p=n[a],h=t(p),d=n[l],v=t(d),_=n[c],y=t(_),g=n[f],m=t(g),b=n[u],x=t(b);h>v&&(o=p,p=d,d=o,o=h,h=v,v=o),m>x&&(o=g,g=b,b=o,o=m,m=x,x=o),h>y&&(o=p,p=_,_=o,o=h,h=y,y=o),v>y&&(o=d,d=_,_=o,o=v,v=y,y=o),h>m&&(o=p,p=g,g=o,o=h,h=m,m=o),y>m&&(o=_,_=g,g=o,o=y,y=m,m=o),v>x&&(o=d,d=b,b=o,o=v,v=x,x=o),v>y&&(o=d,d=_,_=o,o=v,v=y,y=o),m>x&&(o=g,g=b,b=o,o=m,m=x,x=o);var j=d,w=v,k=g,C=m;n[a]=p,n[l]=n[r],n[c]=_,n[f]=n[i-1],n[u]=b;var A=r+1,O=i-2,E=C>=w&&w>=C;if(E)for(var F=A;O>=F;++F){var S=n[F],T=t(S);if(w>T)F!==A&&(n[F]=n[A],n[A]=S),++A;else if(T>w)for(;;){var P=t(n[O]);{if(!(P>w)){if(w>P){n[F]=n[A],n[A++]=n[O],n[O--]=S;break}n[F]=n[O],n[O--]=S;break}O--}}}else for(var F=A;O>=F;F++){var S=n[F],T=t(S);if(w>T)F!==A&&(n[F]=n[A],n[A]=S),++A;else if(T>C)for(;;){var P=t(n[O]);{if(!(P>C)){w>P?(n[F]=n[A],n[A++]=n[O],n[O--]=S):(n[F]=n[O],n[O--]=S);break}if(O--,F>O)break}}}if(n[r]=n[A-1],n[A-1]=j,n[i-1]=n[O+1],n[O+1]=k,e(n,r,A-1),e(n,O+2,i),E)return n;if(a>A&&O>u){for(var R,P;(R=t(n[A]))<=w&&R>=w;)++A;for(;(P=t(n[O]))<=C&&P>=C;)--O;for(var F=A;O>=F;F++){var S=n[F],T=t(S);if(w>=T&&T>=w)F!==A&&(n[F]=n[A],n[A]=S),A++;else if(C>=T&&T>=C)for(;;){var P=t(n[O]);{if(!(C>=P&&P>=C)){w>P?(n[F]=n[A],n[A++]=n[O],n[O--]=S):(n[F]=n[O],n[O--]=S);break}if(O--,F>O)break}}}}return e(n,A,O+1)}var r=s(t);return e}function u(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function c(t,e){for(var n=t.length;e>n;)t[n++]=0;return t}function l(t,e){if(e>32)throw new Error("invalid array width!");return t}function f(t){this.length=t,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=T(t)}function p(t,e){return function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]}}function h(t,e){var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}}function d(t){return[0,t.length]}function v(){return null}function _(){return 0}function y(t){return t+1}function g(t){return t-1}function m(t){return function(e,n){return e+ +t(n)}}function b(t){return function(e,n){return e-t(n)}}function x(){function t(t){var e=E,n=t.length;return n&&(O=O.concat(t),x.lengthen(E+=n),S.forEach(function(r){r(t,e,n)})),A}function r(){for(var t=j(E,E),e=[],n=0,r=0;E>n;++n)x.zero(n)?e.push(n):t[n]=r++;F.forEach(function(t){t(-1,-1,[],e,!0)}),T.forEach(function(e){e(t)});for(var n=0,r=0;E>n;++n)x.zero(n)||(n!==r&&(x.copy(r,n),O[r]=O[n]),++r);O.length=E=r,x.truncate(r)}function s(t){function r(e,r,i){G=e.map(t),Q=Y(w(i),0,i),G=n(G,Q);var o,s=J(G),a=s[0],u=s[1];if(W)for(o=0;i>o;++o)W(G[o],o)||(x[B][Q[o]+r]|=V);else{for(o=0;a>o;++o)x[B][Q[o]+r]|=V;for(o=u;i>o;++o)x[B][Q[o]+r]|=V}if(!r)return K=G,z=Q,et=a,void(nt=u);var c=K,l=z,f=0,p=0;for(K=new Array(E),z=j(E,E),o=0;r>f&&i>p;++o)c[f]<G[p]?(K[o]=c[f],z[o]=l[f++]):(K[o]=G[p],z[o]=Q[p++]+r);for(;r>f;++f,++o)K[o]=c[f],z[o]=l[f];for(;i>p;++p,++o)K[o]=G[p],z[o]=Q[p]+r;s=J(K),et=s[0],nt=s[1]}function s(t,e,n){Z.forEach(function(t){t(G,Q,e,n)}),G=Q=null}function u(t){for(var e,n=0,r=0;E>n;++n)x.zero(e=z[n])||(n!==r&&(K[r]=K[n]),z[r]=t[e],++r);for(K.length=r;E>r;)z[r++]=0;var i=J(K);et=i[0],nt=i[1]}function c(t){var e=t[0],n=t[1];if(W)return W=null,M(function(t,r){return r>=e&&n>r}),et=e,nt=n,X;var r,i,o,s=[],a=[];if(et>e)for(r=e,i=Math.min(et,n);i>r;++r)x[B][o=z[r]]^=V,s.push(o);else if(e>et)for(r=et,i=Math.min(e,nt);i>r;++r)x[B][o=z[r]]^=V,a.push(o);if(n>nt)for(r=Math.max(e,nt),i=n;i>r;++r)x[B][o=z[r]]^=V,s.push(o);else if(nt>n)for(r=Math.max(et,n),i=nt;i>r;++r)x[B][o=z[r]]^=V,a.push(o);return et=e,nt=n,F.forEach(function(t){t(V,B,s,a)}),X}function l(t){return null==t?P():Array.isArray(t)?A(t):"function"==typeof t?R(t):f(t)}function f(t){return c((J=p(C,t))(K))}function A(t){return c((J=h(C,t))(K))}function P(){return c((J=d)(K))}function R(t){return J=d,M(W=t),et=0,nt=E,X}function M(t){var e,n,r,i=[],o=[];for(e=0;E>e;++e)!(x[B][n=z[e]]&V)^!!(r=t(K[e],e))&&(r?(x[B][n]&=U,i.push(n)):(x[B][n]|=V,o.push(n)));F.forEach(function(t){t(V,B,i,o)})}function D(t){for(var e,n=[],r=nt;--r>=et&&t>0;)x.zero(e=z[r])&&(n.push(O[e]),--t);return n}function q(t){for(var e,n=[],r=et;nt>r&&t>0;)x.zero(e=z[r])&&(n.push(O[e]),--t),r++;return n}function N(t){function n(e,n,r,i){function o(){++W===Q&&(g=I(g,G<<=1),M=I(M,G),Q=k(G))}var l,f,p,h,d,_,y=R,g=j(W,Q),m=N,b=H,w=$,C=W,A=0,S=0;for(J&&(m=w=v),J&&(b=w=v),R=new Array(W),W=0,M=C>1?L(M,E):j(E,Q),C&&(p=(f=y[0]).key);i>S&&!((h=t(e[S]))>=h);)++S;for(;i>S;){for(f&&h>=p?(d=f,_=p,g[A]=W,(f=y[++A])&&(p=f.key)):(d={key:h,value:w()},_=h),R[W]=d;!(h>_||(M[l=n[S]+r]=W,d.value=m(d.value,O[l],!0),x.zeroExcept(l,B,U)||(d.value=b(d.value,O[l],!1)),++S>=i));)h=t(e[S]);o()}for(;C>A;)R[g[A]=W]=y[A++],o();if(W>A)for(A=0;r>A;++A)M[A]=g[M[A]];l=F.indexOf(X),W>1?(X=s,Y=u):(!W&&et&&(W=1,R=[{key:null,value:w()}]),1===W?(X=a,Y=c):(X=v,Y=v),M=null),F[l]=X}function r(){if(W>1){for(var t=W,e=R,n=j(t,t),r=0,i=0;E>r;++r)x.zero(r)||(n[M[i]=M[r]]=1,++i);for(R=[],W=0,r=0;t>r;++r)n[r]&&(n[r]=W++,R.push(e[r]));if(W>1)for(var r=0;i>r;++r)M[r]=n[M[r]];else M=null;F[F.indexOf(X)]=W>1?(Y=u,X=s):1===W?(Y=c,X=a):Y=X=v}else if(1===W){if(et)return;for(var r=0;E>r;++r)if(!x.zero(r))return;R=[],W=0,F[F.indexOf(X)]=X=Y=v}}function s(t,e,n,r,i){if(!(t===V&&e===B||J)){var o,s,a,u;for(o=0,a=n.length;a>o;++o)x.zeroExcept(s=n[o],B,U)&&(u=R[M[s]],u.value=N(u.value,O[s]));for(o=0,a=r.length;a>o;++o)x.onlyExcept(s=r[o],B,U,e,t)&&(u=R[M[s]],u.value=H(u.value,O[s],i))}}function a(t,e,n,r,i){if(!(t===V&&e===B||J)){var o,s,a,u=R[0];for(o=0,a=n.length;a>o;++o)x.zeroExcept(s=n[o],B,U)&&(u.value=N(u.value,O[s]));for(o=0,a=r.length;a>o;++o)x.onlyExcept(s=r[o],B,U,e,t)&&(u.value=H(u.value,O[s],i))}}function u(){var t,e;for(t=0;W>t;++t)R[t].value=$();for(t=0;E>t;++t)e=R[M[t]],e.value=N(e.value,O[t],!0);for(t=0;E>t;++t)x.zeroExcept(t,B,U)||(e=R[M[t]],e.value=H(e.value,O[t],!1))}function c(){var t,e=R[0];for(e.value=$(),t=0;E>t;++t)e.value=N(e.value,O[t],!0);for(t=0;E>t;++t)x.zeroExcept(t,B,U)||(e.value=H(e.value,O[t],!1))}function l(){return J&&(Y(),J=!1),R}function f(t){var e=D(l(),0,R.length,t);return q.sort(e,0,e.length)}function p(t,e,n){return N=t,H=e,$=n,J=!0,P}function h(){return p(y,g,_)}function d(t){return p(m(t),b(t),_)}function w(t){function e(e){return t(e.value)}return D=o(e),q=i(e),P}function C(){return w(e)}function A(){return W}function S(){var t=F.indexOf(X);return t>=0&&F.splice(t,1),t=Z.indexOf(n),t>=0&&Z.splice(t,1),t=T.indexOf(r),t>=0&&T.splice(t,1),P}var P={top:f,all:l,reduce:p,reduceCount:h,reduceSum:d,order:w,orderNatural:C,size:A,dispose:S,remove:S};tt.push(P);var R,M,D,q,N,H,$,G=8,Q=k(G),W=0,X=v,Y=v,J=!0,et=t===v;return arguments.length<1&&(t=e),F.push(X),Z.push(n),T.push(r),n(K,z,0,E),h().orderNatural()}function H(){var t=N(v),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t}function $(){tt.forEach(function(t){t.dispose()});var t=S.indexOf(r);return t>=0&&S.splice(t,1),t=S.indexOf(s),t>=0&&S.splice(t,1),t=T.indexOf(u),t>=0&&T.splice(t,1),x.masks[B]&=U,P()}var V,U,B,K,z,G,Q,W,X={filter:l,filterExact:f,filterRange:A,filterFunction:R,filterAll:P,top:D,bottom:q,group:N,groupAll:H,dispose:$,remove:$},Y=a(function(t){return G[t]}),J=d,Z=[],tt=[],et=0,nt=0;S.unshift(r),S.push(s),T.push(u);var rt=x.add();return B=rt.offset,V=rt.one,U=~V,r(O,0,E),s(O,0,E),X}function u(){function t(t,e){var n;if(!h)for(n=e;E>n;++n)u=c(u,O[n],!0),x.zero(n)||(u=l(u,O[n],!1))}function e(t,e,n,r,i){var o,s,a;if(!h){for(o=0,a=n.length;a>o;++o)x.zero(s=n[o])&&(u=c(u,O[s],i));for(o=0,a=r.length;a>o;++o)x.only(s=r[o],e,t)&&(u=l(u,O[s],i))}}function n(){var t;for(u=f(),t=0;E>t;++t)u=c(u,O[t],!0),x.zero(t)||(u=l(u,O[t],!1))}function r(t,e,n){return c=t,l=e,f=n,h=!0,p}function i(){return r(y,g,_)}function o(t){return r(m(t),b(t),_)}function s(){return h&&(n(),h=!1),u}function a(){var n=F.indexOf(e);return n>=0&&F.splice(n),n=S.indexOf(t),n>=0&&S.splice(n),p}var u,c,l,f,p={reduce:r,reduceCount:i,reduceSum:o,value:s,dispose:a,remove:a},h=!0;return F.push(e),S.push(t),t(O,0,E),i()}function c(){return E}function l(){return O}var x,A={add:t,remove:r,dimension:s,groupAll:u,size:c,all:l},O=[],E=0,F=[],S=[],T=[];return x=new f(0),arguments.length?t(arguments[0]):A}function j(t,e){return(257>e?T:65537>e?P:R)(t)}function w(t){for(var e=j(t,t),n=-1;++n<t;)e[n]=n;return e}function k(t){return 8===t?256:16===t?65536:4294967296}x.version="2.0.0-alpha.03",x.permute=n;var C=x.bisect=r(e);C.by=r;var A=x.heap=i(e);A.by=i;var O=x.heapselect=o(e);O.by=o;var E=x.insertionsort=s(e);E.by=s;var F=x.quicksort=a(e);F.by=a;var S=32,T=u,P=u,R=u,L=c,I=l;"undefined"!=typeof Uint8Array&&(T=function(t){return new Uint8Array(t)},P=function(t){return new Uint16Array(t)},R=function(t){return new Uint32Array(t)},L=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},I=function(t,e){var n;switch(e){case 16:n=P(t.length);break;case 32:n=R(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),f.prototype.lengthen=function(t){var e,n;for(e=0,n=this.subarrays;n>e;++e)this[e]=L(this[e],t);this.length=t},f.prototype.add=function(){var t,e,n,r,i;for(r=0,i=this.subarrays;i>r;++r)if(t=this.masks[r],e=this.width-32*r,n=~t&-~t,!(e>=32)||n)return 32>e&&n&1<<e&&(this[r]=I(this[r],e<<=1),this.width=32*r+e),this.masks[r]|=n,{offset:r,one:n};return this[this.subarrays]=T(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},f.prototype.copy=function(t,e){var n,r;for(n=0,r=this.subarrays;r>n;++n)this[n][t]=this[n][e]},f.prototype.truncate=function(t){var e,n;for(e=0,n=this.subarrays;n>e;++e){for(var r=this.length-1;r>=t;r--)this[e][r]=0;this[e].length=t}this.length=t},f.prototype.zero=function(t){var e,n;for(e=0,n=this.subarrays;n>e;++e)if(this[e][t])return!1;return!0},f.prototype.zeroExcept=function(t,e,n){var r,i;for(r=0,i=this.subarrays;i>r;++r)if(r===e?this[r][t]&n:this[r][t])return!1;return!0},f.prototype.only=function(t,e,n){var r,i;for(r=0,i=this.subarrays;i>r;++r)if(this[r][t]!=(r===e?n:0))return!1;return!0},f.prototype.onlyExcept=function(t,e,n,r,i){var o,s,a;for(s=0,a=this.subarrays;a>s;++s)if(o=this[s][t],s===e&&(o&=n),o!=(s===r?i:0))return!1;return!0},t.crossfilter=x}("undefined"!=typeof n&&n||this)},{}],4:[function(t,e,n){e.exports=t("./crossfilter").crossfilter},{"./crossfilter":3}],5:[function(t,e,n){function r(){}var i=t("./_nativeCreate"),o=Object.prototype;r.prototype=i?i(null):o,e.exports=r},{"./_nativeCreate":87}],6:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Map");e.exports=o},{"./_getNative":66,"./_root":89}],7:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_mapClear"),o=t("./_mapDelete"),s=t("./_mapGet"),a=t("./_mapHas"),u=t("./_mapSet");r.prototype.clear=i,r.prototype["delete"]=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},{"./_mapClear":81,"./_mapDelete":82,"./_mapGet":83,"./_mapHas":84,"./_mapSet":85}],8:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Set");e.exports=o},{"./_getNative":66,"./_root":89}],9:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_stackClear"),o=t("./_stackDelete"),s=t("./_stackGet"),a=t("./_stackHas"),u=t("./_stackSet");r.prototype.clear=i,r.prototype["delete"]=o,r.prototype.get=s,r.prototype.has=a,r.prototype.set=u,e.exports=r},{"./_stackClear":91,"./_stackDelete":92,"./_stackGet":93,"./_stackHas":94,"./_stackSet":95}],10:[function(t,e,n){var r=t("./_root"),i=r.Symbol;e.exports=i},{"./_root":89}],11:[function(t,e,n){var r=t("./_root"),i=r.Uint8Array;e.exports=i},{"./_root":89}],12:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"WeakMap");e.exports=o},{"./_getNative":66,"./_root":89}],13:[function(t,e,n){function r(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}e.exports=r},{}],14:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}e.exports=r},{}],15:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}e.exports=r},{}],16:[function(t,e,n){function r(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}e.exports=r},{}],17:[function(t,e,n){function r(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}e.exports=r},{}],18:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}e.exports=r},{}],19:[function(t,e,n){function r(t,e,n){var r=t[e];s.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||(t[e]=n)}var i=t("./eq"),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},{"./eq":98}],20:[function(t,e,n){function r(t,e){var n=i(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():s.call(t,n,1),!0}var i=t("./_assocIndexOf"),o=Array.prototype,s=o.splice;e.exports=r},{"./_assocIndexOf":23}],21:[function(t,e,n){function r(t,e){var n=i(t,e);return 0>n?void 0:t[n][1]}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":23}],22:[function(t,e,n){function r(t,e){return i(t,e)>-1}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":23}],23:[function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=t("./eq");e.exports=r},{"./eq":98}],24:[function(t,e,n){function r(t,e,n){var r=i(t,e);0>r?t.push([e,n]):t[r][1]=n}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":23}],25:[function(t,e,n){function r(t){return"function"==typeof t?t:i}var i=t("./identity");e.exports=r},{"./identity":103}],26:[function(t,e,n){function r(t){return i(t)?t:o(t)}var i=t("./isArray"),o=t("./_stringToPath");e.exports=r},{"./_stringToPath":96,"./isArray":105}],27:[function(t,e,n){var r=t("./_baseForOwn"),i=t("./_createBaseEach"),o=i(r);e.exports=o},{"./_baseForOwn":32,"./_createBaseEach":59}],28:[function(t,e,n){function r(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}e.exports=r},{}],29:[function(t,e,n){function r(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}e.exports=r},{}],30:[function(t,e,n){function r(t,e,n,u){u||(u=[]);for(var c=-1,l=t.length;++c<l;){var f=t[c];e>0&&a(f)&&(n||s(f)||o(f))?e>1?r(f,e-1,n,u):i(u,f):n||(u[u.length]=f)}return u}var i=t("./_arrayPush"),o=t("./isArguments"),s=t("./isArray"),a=t("./isArrayLikeObject");e.exports=r},{"./_arrayPush":16,"./isArguments":104,"./isArray":105,"./isArrayLikeObject":107}],31:[function(t,e,n){var r=t("./_createBaseFor"),i=r();e.exports=i},{"./_createBaseFor":60}],32:[function(t,e,n){function r(t,e){return t&&i(t,e,o)}var i=t("./_baseFor"),o=t("./keys");e.exports=r},{"./_baseFor":31,"./keys":119}],33:[function(t,e,n){function r(t,e){e=o(e,t)?[e+""]:i(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:void 0}var i=t("./_baseCastPath"),o=t("./_isKey");e.exports=r},{"./_baseCastPath":26,"./_isKey":77}],34:[function(t,e,n){function r(t,e){return o.call(t,e)||"object"==typeof t&&e in t&&null===s(t)}var i=Object.prototype,o=i.hasOwnProperty,s=Object.getPrototypeOf;e.exports=r},{}],35:[function(t,e,n){function r(t,e){return e in Object(t)}e.exports=r},{}],36:[function(t,e,n){function r(t,e,n,a,u){return t===e?!0:null==t||null==e||!o(t)&&!s(e)?t!==t&&e!==e:i(t,e,r,n,a,u)}var i=t("./_baseIsEqualDeep"),o=t("./isObject"),s=t("./isObjectLike");e.exports=r},{"./_baseIsEqualDeep":37,"./isObject":113,"./isObjectLike":114}],37:[function(t,e,n){function r(t,e,n,r,_,g){var m=c(t),b=c(e),x=d,j=d;m||(x=u(t),x==h?x=v:x!=v&&(m=f(t))),b||(j=u(e),j==h?j=v:j!=v&&(b=f(e)));var w=x==v&&!l(t),k=j==v&&!l(e),C=x==j;if(C&&!m&&!w)return s(t,e,x,n,r,_);var A=_&p;if(!A){var O=w&&y.call(t,"__wrapped__"),E=k&&y.call(e,"__wrapped__");if(O||E)return n(O?t.value():t,E?e.value():e,r,_,g)}return C?(g||(g=new i),(m?o:a)(t,e,n,r,_,g)):!1}var i=t("./_Stack"),o=t("./_equalArrays"),s=t("./_equalByTag"),a=t("./_equalObjects"),u=t("./_getTag"),c=t("./isArray"),l=t("./_isHostObject"),f=t("./isTypedArray"),p=2,h="[object Arguments]",d="[object Array]",v="[object Object]",_=Object.prototype,y=_.hasOwnProperty;e.exports=r},{"./_Stack":9,"./_equalArrays":61,"./_equalByTag":62,"./_equalObjects":63,"./_getTag":67,"./_isHostObject":74,"./isArray":105,"./isTypedArray":117}],38:[function(t,e,n){function r(t,e,n,r){var u=n.length,c=u,l=!r;if(null==t)return!c;for(t=Object(t);u--;){var f=n[u];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<c;){f=n[u];var p=f[0],h=t[p],d=f[1];if(l&&f[2]){if(void 0===h&&!(p in t))return!1}else{var v=new i,_=r?r(h,d,p,t,e,v):void 0;if(!(void 0===_?o(d,h,r,s|a,v):_))return!1}}return!0}var i=t("./_Stack"),o=t("./_baseIsEqual"),s=1,a=2;e.exports=r},{"./_Stack":9,"./_baseIsEqual":36}],39:[function(t,e,n){function r(t){var e=typeof t;return"function"==e?t:null==t?s:"object"==e?a(t)?o(t[0],t[1]):i(t):u(t)}var i=t("./_baseMatches"),o=t("./_baseMatchesProperty"),s=t("./identity"),a=t("./isArray"),u=t("./property");e.exports=r},{"./_baseMatches":42,"./_baseMatchesProperty":43,"./identity":103,"./isArray":105,"./property":123}],40:[function(t,e,n){function r(t){return i(Object(t))}var i=Object.keys;e.exports=r},{}],41:[function(t,e,n){function r(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=t("./_baseEach"),o=t("./isArrayLike");e.exports=r},{"./_baseEach":27,"./isArrayLike":106}],42:[function(t,e,n){function r(t){var e=o(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(void 0!==r||n in Object(t))}}return function(n){return n===t||i(n,t,e)}}var i=t("./_baseIsMatch"),o=t("./_getMatchData");e.exports=r},{"./_baseIsMatch":38,"./_getMatchData":65}],43:[function(t,e,n){function r(t,e){return function(n){var r=o(n,t);return void 0===r&&r===e?s(n,t):i(e,r,void 0,a|u)}}var i=t("./_baseIsEqual"),o=t("./get"),s=t("./hasIn"),a=1,u=2;e.exports=r},{"./_baseIsEqual":36,"./get":101,"./hasIn":102}],44:[function(t,e,n){function r(t,e,n){var r=-1,c=o;
e=i(e.length?e:Array(1),function(t){return c(t)});var l=s(t,function(t,n,o){var s=i(e,function(e){return e(t)});return{criteria:s,index:++r,value:t}});return a(l,function(t,e){return u(t,e,n)})}var i=t("./_arrayMap"),o=t("./_baseIteratee"),s=t("./_baseMap"),a=t("./_baseSortBy"),u=t("./_compareMultiple");e.exports=r},{"./_arrayMap":15,"./_baseIteratee":39,"./_baseMap":41,"./_baseSortBy":50,"./_compareMultiple":55}],45:[function(t,e,n){function r(t,e){return t=Object(t),i(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}var i=t("./_arrayReduce");e.exports=r},{"./_arrayReduce":17}],46:[function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}e.exports=r},{}],47:[function(t,e,n){function r(t){return function(e){return i(e,t)}}var i=t("./_baseGet");e.exports=r},{"./_baseGet":33}],48:[function(t,e,n){function r(t,e){for(var n=t?e.length:0,r=n-1;n--;){var c=e[n];if(r==n||c!=f){var f=c;if(o(c))l.call(t,c,1);else if(s(c,t))delete t[c];else{var p=i(c),h=u(t,p);null!=h&&delete h[a(p)]}}}return t}var i=t("./_baseCastPath"),o=t("./_isIndex"),s=t("./_isKey"),a=t("./last"),u=t("./_parent"),c=Array.prototype,l=c.splice;e.exports=r},{"./_baseCastPath":26,"./_isIndex":75,"./_isKey":77,"./_parent":88,"./last":120}],49:[function(t,e,n){function r(t,e,n){var r=-1,i=t.length;0>e&&(e=-e>i?0:i+e),n=n>i?i:n,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}e.exports=r},{}],50:[function(t,e,n){function r(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}e.exports=r},{}],51:[function(t,e,n){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}e.exports=r},{}],52:[function(t,e,n){function r(t,e){return i(e,function(e){return[e,t[e]]})}var i=t("./_arrayMap");e.exports=r},{"./_arrayMap":15}],53:[function(t,e,n){function r(t){return t&&t.Object===Object?t:null}e.exports=r},{}],54:[function(t,e,n){function r(t,e){if(t!==e){var n=null===t,r=void 0===t,i=t===t,o=null===e,s=void 0===e,a=e===e;if(t>e&&!o||!i||n&&!s&&a||r&&a)return 1;if(e>t&&!n||!a||o&&!r&&i||s&&i)return-1}return 0}e.exports=r},{}],55:[function(t,e,n){function r(t,e,n){for(var r=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++r<a;){var c=i(o[r],s[r]);if(c){if(r>=u)return c;var l=n[r];return c*("desc"==l?-1:1)}}return t.index-e.index}var i=t("./_compareAscending");e.exports=r},{"./_compareAscending":54}],56:[function(t,e,n){function r(t,e,n){return i(t,e,n)}var i=t("./_copyObjectWith");e.exports=r},{"./_copyObjectWith":57}],57:[function(t,e,n){function r(t,e,n,r){n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):t[a];i(n,a,u)}return n}var i=t("./_assignValue");e.exports=r},{"./_assignValue":19}],58:[function(t,e,n){function r(t){return o(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s="function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=3>o?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e})}var i=t("./_isIterateeCall"),o=t("./rest");e.exports=r},{"./_isIterateeCall":76,"./rest":125}],59:[function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&r(a[s],s,a)!==!1;);return n}}var i=t("./isArrayLike");e.exports=r},{"./isArrayLike":106}],60:[function(t,e,n){function r(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(n(o[u],u,o)===!1)break}return e}}e.exports=r},{}],61:[function(t,e,n){function r(t,e,n,r,a,u){var c=-1,l=a&s,f=a&o,p=t.length,h=e.length;if(p!=h&&!(l&&h>p))return!1;var d=u.get(t);if(d)return d==e;var v=!0;for(u.set(t,e);++c<p;){var _=t[c],y=e[c];if(r)var g=l?r(y,_,c,e,t,u):r(_,y,c,t,e,u);if(void 0!==g){if(g)continue;v=!1;break}if(f){if(!i(e,function(t){return _===t||n(_,t,r,a,u)})){v=!1;break}}else if(_!==y&&!n(_,y,r,a,u)){v=!1;break}}return u["delete"](t),v}var i=t("./_arraySome"),o=1,s=2;e.exports=r},{"./_arraySome":18}],62:[function(t,e,n){function r(t,e,n,r,b,j){switch(n){case m:return!(t.byteLength!=e.byteLength||!r(new o(t),new o(e)));case l:case f:return+t==+e;case p:return t.name==e.name&&t.message==e.message;case d:return t!=+t?e!=+e:t==+e;case v:case y:return t==e+"";case h:var w=s;case _:var k=j&c;return w||(w=a),(k||t.size==e.size)&&r(w(t),w(e),b,j|u);case g:return!!i&&x.call(t)==x.call(e)}return!1}var i=t("./_Symbol"),o=t("./_Uint8Array"),s=t("./_mapToArray"),a=t("./_setToArray"),u=1,c=2,l="[object Boolean]",f="[object Date]",p="[object Error]",h="[object Map]",d="[object Number]",v="[object RegExp]",_="[object Set]",y="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",b=i?i.prototype:void 0,x=i?b.valueOf:void 0;e.exports=r},{"./_Symbol":10,"./_Uint8Array":11,"./_mapToArray":86,"./_setToArray":90}],63:[function(t,e,n){function r(t,e,n,r,a,u){var c=a&s,l=o(t),f=l.length,p=o(e),h=p.length;if(f!=h&&!c)return!1;for(var d=f;d--;){var v=l[d];if(!(c?v in e:i(e,v)))return!1}var _=u.get(t);if(_)return _==e;var y=!0;u.set(t,e);for(var g=c;++d<f;){v=l[d];var m=t[v],b=e[v];if(r)var x=c?r(b,m,v,e,t,u):r(m,b,v,t,e,u);if(!(void 0===x?m===b||n(m,b,r,a,u):x)){y=!1;break}g||(g="constructor"==v)}if(y&&!g){var j=t.constructor,w=e.constructor;j!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof j&&j instanceof j&&"function"==typeof w&&w instanceof w)&&(y=!1)}return u["delete"](t),y}var i=t("./_baseHas"),o=t("./keys"),s=2;e.exports=r},{"./_baseHas":34,"./keys":119}],64:[function(t,e,n){var r=t("./_baseProperty"),i=r("length");e.exports=i},{"./_baseProperty":46}],65:[function(t,e,n){function r(t){for(var e=o(t),n=e.length;n--;)e[n][2]=i(e[n][1]);return e}var i=t("./_isStrictComparable"),o=t("./toPairs");e.exports=r},{"./_isStrictComparable":80,"./toPairs":129}],66:[function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return i(n)?n:void 0}var i=t("./isNative");e.exports=r},{"./isNative":111}],67:[function(t,e,n){function r(t){return h.call(t)}var i=t("./_Map"),o=t("./_Set"),s=t("./_WeakMap"),a="[object Map]",u="[object Object]",c="[object Set]",l="[object WeakMap]",f=Object.prototype,p=Function.prototype.toString,h=f.toString,d=i?p.call(i):"",v=o?p.call(o):"",_=s?p.call(s):"";(i&&r(new i)!=a||o&&r(new o)!=c||s&&r(new s)!=l)&&(r=function(t){var e=h.call(t),n=e==u?t.constructor:null,r="function"==typeof n?p.call(n):"";if(r)switch(r){case d:return a;case v:return c;case _:return l}return e}),e.exports=r},{"./_Map":6,"./_Set":8,"./_WeakMap":12}],68:[function(t,e,n){function r(t,e,n){if(null==t)return!1;var r=n(t,e);r||u(e)||(e=i(e),t=p(t,e),null!=t&&(e=f(e),r=n(t,e)));var h=t?t.length:void 0;return r||!!h&&c(h)&&a(e,h)&&(s(t)||l(t)||o(t))}var i=t("./_baseCastPath"),o=t("./isArguments"),s=t("./isArray"),a=t("./_isIndex"),u=t("./_isKey"),c=t("./isLength"),l=t("./isString"),f=t("./last"),p=t("./_parent");e.exports=r},{"./_baseCastPath":26,"./_isIndex":75,"./_isKey":77,"./_parent":88,"./isArguments":104,"./isArray":105,"./isLength":110,"./isString":115,"./last":120}],69:[function(t,e,n){function r(t,e){return i(t,e)&&delete t[e]}var i=t("./_hashHas");e.exports=r},{"./_hashHas":71}],70:[function(t,e,n){function r(t,e){if(i){var n=t[e];return n===o?void 0:n}return a.call(t,e)?t[e]:void 0}var i=t("./_nativeCreate"),o="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=r},{"./_nativeCreate":87}],71:[function(t,e,n){function r(t,e){return i?void 0!==t[e]:s.call(t,e)}var i=t("./_nativeCreate"),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},{"./_nativeCreate":87}],72:[function(t,e,n){function r(t,e,n){t[e]=i&&void 0===n?o:n}var i=t("./_nativeCreate"),o="__lodash_hash_undefined__";e.exports=r},{"./_nativeCreate":87}],73:[function(t,e,n){function r(t){var e=t?t.length:void 0;return a(e)&&(s(t)||u(t)||o(t))?i(e,String):null}var i=t("./_baseTimes"),o=t("./isArguments"),s=t("./isArray"),a=t("./isLength"),u=t("./isString");e.exports=r},{"./_baseTimes":51,"./isArguments":104,"./isArray":105,"./isLength":110,"./isString":115}],74:[function(t,e,n){function r(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}e.exports=r},{}],75:[function(t,e,n){function r(t,e){return t="number"==typeof t||o.test(t)?+t:-1,e=null==e?i:e,t>-1&&t%1==0&&e>t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=r},{}],76:[function(t,e,n){function r(t,e,n){if(!a(n))return!1;var r=typeof e;return("number"==r?o(n)&&s(e,n.length):"string"==r&&e in n)?i(n[e],t):!1}var i=t("./eq"),o=t("./isArrayLike"),s=t("./_isIndex"),a=t("./isObject");e.exports=r},{"./_isIndex":75,"./eq":98,"./isArrayLike":106,"./isObject":113}],77:[function(t,e,n){function r(t,e){return"number"==typeof t?!0:!i(t)&&(s.test(t)||!o.test(t)||null!=e&&t in Object(e))}var i=t("./isArray"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},{"./isArray":105}],78:[function(t,e,n){function r(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}e.exports=r},{}],79:[function(t,e,n){function r(t){var e=t&&t.constructor,n=i(e)&&e.prototype||o;return t===n}var i=t("./isFunction"),o=Object.prototype;e.exports=r},{"./isFunction":109}],80:[function(t,e,n){function r(t){return t===t&&!i(t)}var i=t("./isObject");e.exports=r},{"./isObject":113}],81:[function(t,e,n){function r(){this.__data__={hash:new i,map:o?new o:[],string:new i}}var i=t("./_Hash"),o=t("./_Map");e.exports=r},{"./_Hash":5,"./_Map":6}],82:[function(t,e,n){function r(t){var e=this.__data__;return a(t)?s("string"==typeof t?e.string:e.hash,t):i?e.map["delete"](t):o(e.map,t)}var i=t("./_Map"),o=t("./_assocDelete"),s=t("./_hashDelete"),a=t("./_isKeyable");e.exports=r},{"./_Map":6,"./_assocDelete":20,"./_hashDelete":69,"./_isKeyable":78}],83:[function(t,e,n){function r(t){var e=this.__data__;return a(t)?s("string"==typeof t?e.string:e.hash,t):i?e.map.get(t):o(e.map,t)}var i=t("./_Map"),o=t("./_assocGet"),s=t("./_hashGet"),a=t("./_isKeyable");e.exports=r},{"./_Map":6,"./_assocGet":21,"./_hashGet":70,"./_isKeyable":78}],84:[function(t,e,n){function r(t){var e=this.__data__;return a(t)?s("string"==typeof t?e.string:e.hash,t):i?e.map.has(t):o(e.map,t)}var i=t("./_Map"),o=t("./_assocHas"),s=t("./_hashHas"),a=t("./_isKeyable");e.exports=r},{"./_Map":6,"./_assocHas":22,"./_hashHas":71,"./_isKeyable":78}],85:[function(t,e,n){function r(t,e){var n=this.__data__;return a(t)?s("string"==typeof t?n.string:n.hash,t,e):i?n.map.set(t,e):o(n.map,t,e),this}var i=t("./_Map"),o=t("./_assocSet"),s=t("./_hashSet"),a=t("./_isKeyable");e.exports=r},{"./_Map":6,"./_assocSet":24,"./_hashSet":72,"./_isKeyable":78}],86:[function(t,e,n){function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}e.exports=r},{}],87:[function(t,e,n){var r=t("./_getNative"),i=r(Object,"create");e.exports=i},{"./_getNative":66}],88:[function(t,e,n){function r(t,e){return 1==e.length?t:o(t,i(e,0,-1))}var i=t("./_baseSlice"),o=t("./get");e.exports=r},{"./_baseSlice":49,"./get":101}],89:[function(t,e,n){(function(r){var i=t("./_checkGlobal"),o={"function":!0,object:!0},s=o[typeof n]&&n&&!n.nodeType?n:void 0,a=o[typeof e]&&e&&!e.nodeType?e:void 0,u=i(s&&a&&"object"==typeof r&&r),c=i(o[typeof self]&&self),l=i(o[typeof window]&&window),f=i(o[typeof this]&&this),p=u||l!==(f&&f.window)&&l||c||f||Function("return this")();e.exports=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_checkGlobal":53}],90:[function(t,e,n){function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}e.exports=r},{}],91:[function(t,e,n){function r(){this.__data__={array:[],map:null}}e.exports=r},{}],92:[function(t,e,n){function r(t){var e=this.__data__,n=e.array;return n?i(n,t):e.map["delete"](t)}var i=t("./_assocDelete");e.exports=r},{"./_assocDelete":20}],93:[function(t,e,n){function r(t){var e=this.__data__,n=e.array;return n?i(n,t):e.map.get(t)}var i=t("./_assocGet");e.exports=r},{"./_assocGet":21}],94:[function(t,e,n){function r(t){var e=this.__data__,n=e.array;return n?i(n,t):e.map.has(t)}var i=t("./_assocHas");e.exports=r},{"./_assocHas":22}],95:[function(t,e,n){function r(t,e){var n=this.__data__,r=n.array;r&&(r.length<s-1?o(r,t,e):(n.array=null,n.map=new i(r)));var a=n.map;return a&&a.set(t,e),this}var i=t("./_MapCache"),o=t("./_assocSet"),s=200;e.exports=r},{"./_MapCache":7,"./_assocSet":24}],96:[function(t,e,n){function r(t){var e=[];return i(t).replace(o,function(t,n,r,i){e.push(r?i.replace(s,"$1"):n||t)}),e}var i=t("./toString"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;e.exports=r},{"./toString":130}],97:[function(t,e,n){var r=t("./_copyObject"),i=t("./_createAssigner"),o=t("./keys"),s=i(function(t,e){r(e,o(e),t)});e.exports=s},{"./_copyObject":56,"./_createAssigner":58,"./keys":119}],98:[function(t,e,n){function r(t,e){return t===e||t!==t&&e!==e}e.exports=r},{}],99:[function(t,e,n){function r(t,e){if(e=a(e,3),u(t)){var n=s(t,e);return n>-1?t[n]:void 0}return o(t,e,i)}var i=t("./_baseEach"),o=t("./_baseFind"),s=t("./_baseFindIndex"),a=t("./_baseIteratee"),u=t("./isArray");e.exports=r},{"./_baseEach":27,"./_baseFind":28,"./_baseFindIndex":29,"./_baseIteratee":39,"./isArray":105}],100:[function(t,e,n){function r(t,e){return"function"==typeof e&&a(t)?i(t,e):s(t,o(e))}var i=t("./_arrayEach"),o=t("./_baseCastFunction"),s=t("./_baseEach"),a=t("./isArray");e.exports=r},{"./_arrayEach":14,"./_baseCastFunction":25,"./_baseEach":27,"./isArray":105}],101:[function(t,e,n){function r(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}var i=t("./_baseGet");e.exports=r},{"./_baseGet":33}],102:[function(t,e,n){function r(t,e){return o(t,e,i)}var i=t("./_baseHasIn"),o=t("./_hasPath");e.exports=r},{"./_baseHasIn":35,"./_hasPath":68}],103:[function(t,e,n){function r(t){return t}e.exports=r},{}],104:[function(t,e,n){function r(t){return i(t)&&a.call(t,"callee")&&(!c.call(t,"callee")||u.call(t)==o)}var i=t("./isArrayLikeObject"),o="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,u=s.toString,c=s.propertyIsEnumerable;e.exports=r},{"./isArrayLikeObject":107}],105:[function(t,e,n){var r=Array.isArray;e.exports=r},{}],106:[function(t,e,n){function r(t){return null!=t&&!("function"==typeof t&&o(t))&&s(i(t))}var i=t("./_getLength"),o=t("./isFunction"),s=t("./isLength");e.exports=r},{"./_getLength":64,"./isFunction":109,"./isLength":110}],107:[function(t,e,n){function r(t){return o(t)&&i(t)}var i=t("./isArrayLike"),o=t("./isObjectLike");e.exports=r},{"./isArrayLike":106,"./isObjectLike":114}],108:[function(t,e,n){function r(t){return t===!0||t===!1||i(t)&&a.call(t)==o}var i=t("./isObjectLike"),o="[object Boolean]",s=Object.prototype,a=s.toString;e.exports=r},{"./isObjectLike":114}],109:[function(t,e,n){function r(t){var e=i(t)?u.call(t):"";return e==o||e==s}var i=t("./isObject"),o="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,u=a.toString;e.exports=r},{"./isObject":113}],110:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&i>=t}var i=9007199254740991;e.exports=r},{}],111:[function(t,e,n){function r(t){return null==t?!1:i(t)?p.test(l.call(t)):s(t)&&(o(t)?p:u).test(t)}var i=t("./isFunction"),o=t("./_isHostObject"),s=t("./isObjectLike"),a=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,f=c.hasOwnProperty,p=RegExp("^"+l.call(f).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{"./_isHostObject":74,"./isFunction":109,"./isObjectLike":114}],112:[function(t,e,n){function r(t){return"number"==typeof t||i(t)&&a.call(t)==o}var i=t("./isObjectLike"),o="[object Number]",s=Object.prototype,a=s.toString;e.exports=r},{"./isObjectLike":114}],113:[function(t,e,n){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=r},{}],114:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}e.exports=r},{}],115:[function(t,e,n){function r(t){return"string"==typeof t||!i(t)&&o(t)&&u.call(t)==s}var i=t("./isArray"),o=t("./isObjectLike"),s="[object String]",a=Object.prototype,u=a.toString;e.exports=r},{"./isArray":105,"./isObjectLike":114}],116:[function(t,e,n){function r(t){return"symbol"==typeof t||i(t)&&a.call(t)==o}var i=t("./isObjectLike"),o="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=r},{"./isObjectLike":114}],117:[function(t,e,n){function r(t){return o(t)&&i(t.length)&&!!F[T.call(t)]}var i=t("./isLength"),o=t("./isObjectLike"),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",v="[object RegExp]",_="[object Set]",y="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",b="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",w="[object Int16Array]",k="[object Int32Array]",C="[object Uint8Array]",A="[object Uint8ClampedArray]",O="[object Uint16Array]",E="[object Uint32Array]",F={};F[b]=F[x]=F[j]=F[w]=F[k]=F[C]=F[A]=F[O]=F[E]=!0,F[s]=F[a]=F[m]=F[u]=F[c]=F[l]=F[f]=F[p]=F[h]=F[d]=F[v]=F[_]=F[y]=F[g]=!1;var S=Object.prototype,T=S.toString;e.exports=r},{"./isLength":110,"./isObjectLike":114}],118:[function(t,e,n){function r(t){return void 0===t}e.exports=r},{}],119:[function(t,e,n){function r(t){var e=c(t);if(!e&&!a(t))return o(t);var n=s(t),r=!!n,l=n||[],f=l.length;for(var p in t)!i(t,p)||r&&("length"==p||u(p,f))||e&&"constructor"==p||l.push(p);return l}var i=t("./_baseHas"),o=t("./_baseKeys"),s=t("./_indexKeys"),a=t("./isArrayLike"),u=t("./_isIndex"),c=t("./_isPrototype");e.exports=r},{"./_baseHas":34,"./_baseKeys":40,"./_indexKeys":73,"./_isIndex":75,"./_isPrototype":79,"./isArrayLike":106}],120:[function(t,e,n){function r(t){var e=t?t.length:0;return e?t[e-1]:void 0}e.exports=r},{}],121:[function(t,e,n){function r(t,e){var n=a(t)?i:s;return n(t,o(e,3))}var i=t("./_arrayMap"),o=t("./_baseIteratee"),s=t("./_baseMap"),a=t("./isArray");e.exports=r},{"./_arrayMap":15,"./_baseIteratee":39,"./_baseMap":41,"./isArray":105}],122:[function(t,e,n){var r=t("./_baseFlatten"),i=t("./_basePick"),o=t("./rest"),s=o(function(t,e){return null==t?{}:i(t,r(e,1))});e.exports=s},{"./_baseFlatten":30,"./_basePick":45,"./rest":125}],123:[function(t,e,n){function r(t){return s(t)?i(t):o(t)}var i=t("./_baseProperty"),o=t("./_basePropertyDeep"),s=t("./_isKey");e.exports=r},{"./_baseProperty":46,"./_basePropertyDeep":47,"./_isKey":77}],124:[function(t,e,n){function r(t,e){var n=[];if(!t||!t.length)return n;var r=-1,s=[],a=t.length;for(e=i(e,3);++r<a;){var u=t[r];e(u,r,t)&&(n.push(u),s.push(r))}return o(t,s),n}var i=t("./_baseIteratee"),o=t("./_basePullAt");e.exports=r},{"./_baseIteratee":39,"./_basePullAt":48}],125:[function(t,e,n){function r(t,e){if("function"!=typeof t)throw new TypeError(s);return e=a(void 0===e?t.length-1:o(e),0),function(){for(var n=arguments,r=-1,o=a(n.length-e,0),s=Array(o);++r<o;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var u=Array(e+1);for(r=-1;++r<e;)u[r]=n[r];return u[e]=s,i(t,this,u)}}var i=t("./_apply"),o=t("./toInteger"),s="Expected a function",a=Math.max;e.exports=r},{"./_apply":13,"./toInteger":127}],126:[function(t,e,n){var r=t("./_baseFlatten"),i=t("./_baseOrderBy"),o=t("./_isIterateeCall"),s=t("./rest"),a=s(function(t,e){if(null==t)return[];var n=e.length;return n>1&&o(t,e[0],e[1])?e=[]:n>2&&o(e[0],e[1],e[2])&&(e.length=1),i(t,r(e,1),[])});e.exports=a},{"./_baseFlatten":30,"./_baseOrderBy":44,"./_isIterateeCall":76,"./rest":125}],127:[function(t,e,n){function r(t){if(!t)return 0===t?t:0;if(t=i(t),t===o||t===-o){var e=0>t?-1:1;return e*s}var n=t%1;return t===t?n?t-n:t:0}var i=t("./toNumber"),o=1/0,s=1.7976931348623157e308;e.exports=r},{"./toNumber":128}],128:[function(t,e,n){function r(t){if(o(t)){var e=i(t.valueOf)?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=c.test(t);return n||l.test(t)?f(t.slice(2),n?2:8):u.test(t)?s:+t}var i=t("./isFunction"),o=t("./isObject"),s=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;e.exports=r},{"./isFunction":109,"./isObject":113}],129:[function(t,e,n){function r(t){return i(t,o(t))}var i=t("./_baseToPairs"),o=t("./keys");e.exports=r},{"./_baseToPairs":52,"./keys":119}],130:[function(t,e,n){function r(t){if("string"==typeof t)return t;if(null==t)return"";if(o(t))return i?u.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}var i=t("./_Symbol"),o=t("./isSymbol"),s=1/0,a=i?i.prototype:void 0,u=i?a.toString:void 0;e.exports=r},{"./_Symbol":10,"./isSymbol":116}],131:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{dup:3}],132:[function(t,e,n){arguments[4][4][0].apply(n,arguments)},{"./crossfilter":131,dup:4}],133:[function(t,e,n){function r(t,e){function n(t){if("string"==typeof t){var e=t,n=function(t){return t[e]};return n}return t}function o(t){if("string"==typeof t){var e=t,n=function(t){return+t[e]};return n}return t}t.count=function(n){return arguments.length?(e.count=n,t):e.count},t.sum=function(n){return arguments.length?(n=o(n),e.sum=n,t):e.sum},t.avg=function(n){return arguments.length?(n=o(n),"function"==typeof n?(e.sum&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),e.sum=n,e.avg=!0,e.count=!0):e.avg=n,t):e.avg},t.exception=function(r){return arguments.length?(r=n(r),e.exceptionAccessor=r,t):e.exceptionAccessor},t.filter=function(n){return arguments.length?(e.filter=n,t):e.filter},t.valueList=function(r){return arguments.length?(r=n(r),e.valueList=r,t):e.valueList},t.median=function(n){return arguments.length?(n=o(n),"function"==typeof n&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=n),e.median=n,t):e.median},t.min=function(n){return arguments.length?(n=o(n),"function"==typeof n&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=n),e.min=n,t):e.min},t.max=function(n){return arguments.length?(n=o(n),"function"==typeof n&&(e.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),e.valueList=n),e.max=n,t):e.max},t.exceptionCount=function(r){return arguments.length?(r=n(r),"function"==typeof r?(e.sum&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),e.exceptionAccessor=r,e.exceptionCount=!0):e.exceptionCount=r,t):e.exceptionCount},t.exceptionSum=function(n){return arguments.length?(n=o(n),e.exceptionSum=n,t):e.exceptionSum},t.histogramValue=function(n){return arguments.length?(n=o(n),e.histogramValue=n,t):e.histogramValue},t.histogramBins=function(n){return arguments.length?(e.histogramThresholds=n,t):e.histogramThresholds},t.std=function(n){return arguments.length?(n=o(n),"function"==typeof n?(e.sumOfSquares=n,e.sum=n,e.count=!0,e.std=!0):e.std=n,t):e.std},t.sumOfSq=function(n){return arguments.length?(n=o(n),e.sumOfSquares=n,t):e.sumOfSquares},t.value=function(t,n){return arguments.length&&"string"==typeof t?(e.values||(e.values={}),e.values[t]={},e.values[t].parameters=i(),r(e.values[t],e.values[t].parameters),n&&(e.values[t].accessor=n),e.values[t]):void console.error("'value' requires a string argument.")},t.nest=function(r){return arguments.length?(r.map(n),e.nestKeys=r,t):e.nestKeys},t.alias=function(n){return arguments.length?(e.aliasKeys=n,t):e.aliasKeys},t.aliasProp=function(n){return arguments.length?(e.aliasPropKeys=n,t):e.aliasPropKeys},t.groupAll=function(n){return arguments.length?(e.groupAll=n,t):e.groupAll},t.dataList=function(n){return arguments.length?(e.dataList=n,t):e.dataList}}var i=t("./parameters.js"),o={build:r};e.exports=o},{"./parameters.js":149}],134:[function(t,e,n){var r={initial:function(t,e,n){return function(r){t&&(r=t(r));for(var i in n)e(r)[i]=function(){return n[i](e(r))};return r}}};e.exports=r},{}],135:[function(t,e,n){var r={add:function(t,e,n){return function(r,i,o){e&&e(r,i,o);for(var s in t)n(r)[s]=t[s](n(r),i);return r}}};e.exports=r},{}],136:[function(t,e,n){var r={add:function(t,e,n){return function(t,r,i){return e&&e(t,r,i),n(t).count>0?n(t).avg=n(t).sum/n(t).count:n(t).avg=0,t}},remove:function(t,e,n){return function(t,r,i){return e&&e(t,r,i),n(t).count>0?n(t).avg=n(t).sum/n(t).count:n(t).avg=0,t}},initial:function(t,e){return function(n){return n=t(n),e(n).avg=0,n}}};e.exports=r},{}],137:[function(t,e,n){function r(t,e,n){n||(n=function(t){return t});var j={reduceAdd:e.reduceAdd,reduceRemove:e.reduceRemove,reduceInitial:e.reduceInitial};(t.count||t.std)&&(e.reduceAdd=o.add(e.reduceAdd,n),e.reduceRemove=o.remove(e.reduceRemove,n),e.reduceInitial=o.initial(e.reduceInitial,n)),t.sum&&(e.reduceAdd=s.add(t.sum,e.reduceAdd,n),e.reduceRemove=s.remove(t.sum,e.reduceRemove,n),e.reduceInitial=s.initial(e.reduceInitial,n)),t.avg&&(t.count&&t.sum?(e.reduceAdd=a.add(t.sum,e.reduceAdd,n),e.reduceRemove=a.remove(t.sum,e.reduceRemove,n),e.reduceInitial=a.initial(e.reduceInitial,n)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),t.exceptionCount&&(t.exceptionAccessor?(e.reduceAdd=h.add(t.exceptionAccessor,e.reduceAdd,n),e.reduceRemove=h.remove(t.exceptionAccessor,e.reduceRemove,n),e.reduceInitial=h.initial(e.reduceInitial,n)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),t.exceptionSum&&(t.exceptionAccessor?(e.reduceAdd=d.add(t.exceptionAccessor,t.exceptionSum,e.reduceAdd,n),e.reduceRemove=d.remove(t.exceptionAccessor,t.exceptionSum,e.reduceRemove,n),e.reduceInitial=d.initial(e.reduceInitial,n)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(t.valueList||t.median||t.min||t.max)&&(e.reduceAdd=p.add(t.valueList,e.reduceAdd,n),e.reduceRemove=p.remove(t.valueList,e.reduceRemove,n),e.reduceInitial=p.initial(e.reduceInitial,n)),t.dataList&&(e.reduceAdd=x.add(t.dataList,e.reduceAdd,n),e.reduceRemove=x.remove(t.dataList,e.reduceRemove,n),e.reduceInitial=x.initial(e.reduceInitial,n)),t.median&&(e.reduceAdd=u.add(e.reduceAdd,n),e.reduceRemove=u.remove(e.reduceRemove,n),e.reduceInitial=u.initial(e.reduceInitial,n)),t.min&&(e.reduceAdd=c.add(e.reduceAdd,n),e.reduceRemove=c.remove(e.reduceRemove,n),e.reduceInitial=c.initial(e.reduceInitial,n)),t.max&&(e.reduceAdd=l.add(e.reduceAdd,n),e.reduceRemove=l.remove(e.reduceRemove,n),e.reduceInitial=l.initial(e.reduceInitial,n)),t.exceptionAccessor&&(e.reduceAdd=f.add(t.exceptionAccessor,e.reduceAdd,n),e.reduceRemove=f.remove(t.exceptionAccessor,e.reduceRemove,n),e.reduceInitial=f.initial(e.reduceInitial,n)),t.histogramValue&&t.histogramThresholds&&(e.reduceAdd=v.add(t.histogramValue,e.reduceAdd,n),e.reduceRemove=v.remove(t.histogramValue,e.reduceRemove,n),e.reduceInitial=v.initial(t.histogramThresholds,e.reduceInitial,n)),t.sumOfSquares&&(e.reduceAdd=_.add(t.sumOfSquares,e.reduceAdd,n),e.reduceRemove=_.remove(t.sumOfSquares,e.reduceRemove,n),e.reduceInitial=_.initial(e.reduceInitial,n)),t.std&&(t.sumOfSquares&&t.sum?(e.reduceAdd=y.add(e.reduceAdd,n),e.reduceRemove=y.remove(e.reduceRemove,n),e.reduceInitial=y.initial(e.reduceInitial,n)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),t.nestKeys&&(e.reduceAdd=g.add(t.nestKeys,e.reduceAdd,n),e.reduceRemove=g.remove(t.nestKeys,e.reduceRemove,n),e.reduceInitial=g.initial(e.reduceInitial,n)),t.aliasKeys&&(e.reduceInitial=m.initial(e.reduceInitial,n,t.aliasKeys)),t.aliasPropKeys&&(e.reduceAdd=b.add(t.aliasPropKeys,e.reduceAdd,n),e.reduceRemove=b.add(t.aliasPropKeys,e.reduceRemove,n)),t.filter&&(e.reduceAdd=i.add(t.filter,e.reduceAdd,j.reduceAdd,n),e.reduceRemove=i.remove(t.filter,e.reduceRemove,j.reduceRemove,n)),t.values&&Object.getOwnPropertyNames(t.values).forEach(function(i){var o=function(t){return function(e){return e=t(e),n(e)[i]={},e}};e.reduceInitial=o(e.reduceInitial),r(t.values[i].parameters,e,function(t){return t[i]})})}var i=t("./filter.js"),o=t("./count.js"),s=t("./sum.js"),a=t("./avg.js"),u=t("./median.js"),c=t("./min.js"),l=t("./max.js"),f=t("./value-count.js"),p=t("./value-list.js"),h=t("./exception-count.js"),d=t("./exception-sum.js"),v=t("./histogram.js"),_=t("./sum-of-squares.js"),y=t("./std.js"),g=t("./nest.js"),m=t("./alias.js"),b=t("./aliasProp.js"),x=t("./data-list.js"),j={build:r};e.exports=j},{"./alias.js":134,"./aliasProp.js":135,"./avg.js":136,"./count.js":139,"./data-list.js":140,"./exception-count.js":141,"./exception-sum.js":142,"./filter.js":143,"./histogram.js":144,"./max.js":145,"./median.js":146,"./min.js":147,"./nest.js":148,"./std.js":154,"./sum-of-squares.js":155,"./sum.js":156,"./value-count.js":157,"./value-list.js":158}],138:[function(t,e,n){var r=function(t){return function(e){return e[t]}};_grouper=function(t,e){return t||(t=function(t){return t}),function(n,r){e&&e(n,r);var i=t(n),o=t(r);return"undefined"!=typeof o.count&&(i.count+=o.count),"undefined"!=typeof o.sum&&(i.sum+=o.sum),"undefined"!=typeof o.avg&&(i.avg=i.sum/i.count),n}},reductio_cap=function(t,e,n){var i=(e.reduceInitial(),n.values?Object.keys(n.values):[]),o=_grouper();if(i.length)for(var s=0;s<i.length;++s)o=_grouper(r(i[s]),o);return function(n,r){if(!arguments.length)return t();if(n===1/0||!n)return t();var i=t(),s=n-1;if(i.length<=n)return i;var a=i.slice(0,s),u={key:r||"Others"};u.value=e.reduceInitial();for(var c=s;c<i.length;++c)o(u.value,i[c].value);return a.push(u),a}},e.exports=reductio_cap},{}],139:[function(t,e,n){var r={add:function(t,e){return function(n,r,i){return t&&t(n,r,i),e(n).count++,n}},remove:function(t,e){return function(n,r,i){return t&&t(n,r,i),e(n).count--,n}},initial:function(t,e){return function(n){return t&&(n=t(n)),e(n).count=0,n}}};e.exports=r},{}],140:[function(t,e,n){var r={add:function(t,e,n){return function(t,r,i){return e&&e(t,r,i),n(t).dataList.push(r),t}},remove:function(t,e,n){return function(t,r,i){return e&&e(t,r,i),n(t).dataList.splice(n(t).dataList.indexOf(r),1),t}},initial:function(t,e){return function(n){return t&&(n=t(n)),e(n).dataList=[],n}}};e.exports=r},{}],141:[function(t,e,n){var r={add:function(t,e,n){var r,i;return function(o,s,a){return e&&e(o,s,a),r=n(o).bisect(n(o).values,t(s),0,n(o).values.length),i=n(o).values[r],i&&i[0]===t(s)&&0!==i[1]||n(o).exceptionCount++,o}},remove:function(t,e,n){var r,i;return function(o,s,a){return e&&e(o,s,a),r=n(o).bisect(n(o).values,t(s),0,n(o).values.length),i=n(o).values[r],i&&i[0]===t(s)&&1===i[1]&&n(o).exceptionCount--,o}},initial:function(t,e){return function(n){return n=t(n),e(n).exceptionCount=0,n}}};e.exports=r},{}],142:[function(t,e,n){var r={add:function(t,e,n,r){var i,o;return function(s,a,u){return n&&n(s,a,u),i=r(s).bisect(r(s).values,t(a),0,r(s).values.length),o=r(s).values[i],o&&o[0]===t(a)&&0!==o[1]||(r(s).exceptionSum=r(s).exceptionSum+e(a)),s}},remove:function(t,e,n,r){var i,o;return function(s,a,u){return n&&n(s,a,u),i=r(s).bisect(r(s).values,t(a),0,r(s).values.length),o=r(s).values[i],o&&o[0]===t(a)&&1===o[1]&&(r(s).exceptionSum=r(s).exceptionSum-e(a)),s}},initial:function(t,e){return function(n){return n=t(n),e(n).exceptionSum=0,n}}};e.exports=r},{}],143:[function(t,e,n){var r={add:function(t,e,n){return function(r,i,o){return t(i,o)?e&&e(r,i,o):n&&n(r,i,o),r}},remove:function(t,e,n){return function(r,i,o){return t(i,o)?e&&e(r,i,o):n&&n(r,i,o),r}}};e.exports=r},{}],144:[function(t,e,n){var r=t("crossfilter"),i={add:function(t,e,n){var i,o=r.bisect.by(function(t){return t}).left,s=r.bisect.by(function(t){return t.x}).right;return function(r,a,u){return e&&e(r,a,u),i=n(r).histogram[s(n(r).histogram,t(a),0,n(r).histogram.length)-1],i.y++,i.splice(o(i,t(a),0,i.length),0,t(a)),r}},remove:function(t,e,n){var i,o=r.bisect.by(function(t){return t}).left,s=r.bisect.by(function(t){return t.x}).right;return function(r,a,u){return e&&e(r,a,u),i=n(r).histogram[s(n(r).histogram,t(a),0,n(r).histogram.length)-1],i.y--,i.splice(o(i,t(a),0,i.length),1),r}},initial:function(t,e,n){return function(r){r=e(r),n(r).histogram=[];
for(var i=[],o=1;o<t.length;o++)i=[],i.x=t[o-1],i.dx=t[o]-t[o-1],i.y=0,n(r).histogram.push(i);return r}}};e.exports=i},{crossfilter:132}],145:[function(t,e,n){var r={add:function(t,e){return function(n,r,i){return t&&t(n,r,i),e(n).max=e(n).valueList[e(n).valueList.length-1],n}},remove:function(t,e){return function(n,r,i){return t&&t(n,r,i),0===e(n).valueList.length?(e(n).max=void 0,n):(e(n).max=e(n).valueList[e(n).valueList.length-1],n)}},initial:function(t,e){return function(n){return n=t(n),e(n).max=void 0,n}}};e.exports=r},{}],146:[function(t,e,n){var r={add:function(t,e){var n;return function(r,i,o){return t&&t(r,i,o),n=Math.floor(e(r).valueList.length/2),e(r).valueList.length%2?e(r).median=e(r).valueList[n]:e(r).median=(e(r).valueList[n-1]+e(r).valueList[n])/2,r}},remove:function(t,e){var n;return function(r,i,o){return t&&t(r,i,o),n=Math.floor(e(r).valueList.length/2),0===e(r).valueList.length?(e(r).median=void 0,r):(1===e(r).valueList.length||e(r).valueList.length%2?e(r).median=e(r).valueList[n]:e(r).median=(e(r).valueList[n-1]+e(r).valueList[n])/2,r)}},initial:function(t,e){return function(n){return n=t(n),e(n).median=void 0,n}}};e.exports=r},{}],147:[function(t,e,n){var r={add:function(t,e){return function(n,r,i){return t&&t(n,r,i),e(n).min=e(n).valueList[0],n}},remove:function(t,e){return function(n,r,i){return t&&t(n,r,i),0===e(n).valueList.length?(e(n).min=void 0,n):(e(n).min=e(n).valueList[0],n)}},initial:function(t,e){return function(n){return n=t(n),e(n).min=void 0,n}}};e.exports=r},{}],148:[function(t,e,n){var r=(t("crossfilter"),{add:function(t,e,n){var r,i;return function(o,s,a){return e&&e(o,s,a),r=n(o).nest,t.forEach(function(t){i=r.filter(function(e){return e.key===t(s)})[0],i?r=i.values:(i=[],r.push({key:t(s),values:i}),r=i)}),r.push(s),o}},remove:function(t,e,n){var r;return function(i,o,s){return e&&e(i,o,s),r=n(i).nest,t.forEach(function(t){r=r.filter(function(e){return e.key===t(o)})[0].values}),r.splice(r.indexOf(o),1),i}},initial:function(t,e){return function(n){return n=t(n),e(n).nest=[],n}}});e.exports=r},{crossfilter:132}],149:[function(t,e,n){var r=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1}};e.exports=r},{}],150:[function(t,e,n){function r(t){return function(e,n,r){e.post=function(){var i=function(){return i.all()};i.all=function(){return e.all()};var o=t.postprocessors;return Object.keys(o).forEach(function(t){i[t]=function(){var e=i.all,s=[].slice.call(arguments);return i.all=function(){return o[t](e,r,n).apply(null,s)},i}}),i}}}e.exports=r},{}],151:[function(t,e,n){e.exports=function(e){e.postprocessors={},e.registerPostProcessor=function(t,n){e.postprocessors[t]=n},e.registerPostProcessor("cap",t("./cap")),e.registerPostProcessor("sortBy",t("./sortBy"))}},{"./cap":138,"./sortBy":153}],152:[function(t,e,n){function r(){function t(t){if(n={reduceAdd:function(t){return t},reduceRemove:function(t){return t},reduceInitial:function(){return{}}},i.build(e,n),e.groupAll)if(t.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var r,o,s,c,l,f=u.bisect.by(function(t){return t.key}).left;t.reduce(function(t,i,a){for(s=e.groupAll(i),c=s.length,o=0;c>o;o++)l=s[o],r=f(t,l,0,t.length),t[r]&&t[r].key===l||t.splice(r,0,{key:l,value:n.reduceInitial()}),n.reduceAdd(t[r].value,i,a);return t},function(t,i,a){for(s=e.groupAll(i),c=s.length,o=0;c>o;o++)r=f(t,s[o],0,t.length),n.reduceRemove(t[r].value,i,a);return t},function(){return[]}),t.all||(t.all=function(){return this.value()})}else t.reduce(n.reduceAdd,n.reduceRemove,n.reduceInitial);return a(t,e,n),t}var e=s(),n={};return o.build(t,e),t}var i=t("./build.js"),o=t("./accessors.js"),s=t("./parameters.js"),a=t("./postprocess"),u=t("crossfilter");t("./postprocessors")(r),a=a(r),e.exports=r},{"./accessors.js":133,"./build.js":137,"./parameters.js":149,"./postprocess":150,"./postprocessors":151,crossfilter:132}],153:[function(t,e,n){function r(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}var i=function(t){if("function"==typeof t)return t;if(~t.indexOf(".")){var e=t.split(".");return function(t){return e.reduce(function(t,e){return t[e]},t)}}return function(e){return e[t]}},o=function(t,e){return function(n,r){return e(t(n),t(r))}};({}).toString;e.exports=function(t){return function(e,n){return 1===arguments.length&&(n=r),t().sort(o(i(e),n))}}},{}],154:[function(t,e,n){var r={add:function(t,e){return function(n,r,i){if(t&&t(n,r,i),e(n).count>0){e(n).std=0;var o=e(n).sumOfSq-e(n).sum*e(n).sum/e(n).count;o>0&&(e(n).std=Math.sqrt(o/(e(n).count-1)))}else e(n).std=0;return n}},remove:function(t,e){return function(n,r,i){if(t&&t(n,r,i),e(n).count>0){e(n).std=0;var o=e(n).sumOfSq-e(n).sum*e(n).sum/e(n).count;o>0&&(e(n).std=Math.sqrt(o/(e(n).count-1)))}else e(n).std=0;return n}},initial:function(t,e){return function(n){return n=t(n),e(n).std=0,n}}};e.exports=r},{}],155:[function(t,e,n){var r={add:function(t,e,n){return function(r,i,o){return e&&e(r,i,o),n(r).sumOfSq=n(r).sumOfSq+t(i)*t(i),r}},remove:function(t,e,n){return function(r,i,o){return e&&e(r,i,o),n(r).sumOfSq=n(r).sumOfSq-t(i)*t(i),r}},initial:function(t,e){return function(n){return n=t(n),e(n).sumOfSq=0,n}}};e.exports=r},{}],156:[function(t,e,n){var r={add:function(t,e,n){return function(r,i,o){return e&&e(r,i,o),n(r).sum=n(r).sum+t(i),r}},remove:function(t,e,n){return function(r,i,o){return e&&e(r,i,o),n(r).sum=n(r).sum-t(i),r}},initial:function(t,e){return function(n){return n=t(n),e(n).sum=0,n}}};e.exports=r},{}],157:[function(t,e,n){var r=t("crossfilter"),i={add:function(t,e,n){var r,i;return function(o,s,a){return e&&e(o,s,a),r=n(o).bisect(n(o).values,t(s),0,n(o).values.length),i=n(o).values[r],i&&i[0]===t(s)?i[1]++:n(o).values.splice(r,0,[t(s),1]),o}},remove:function(t,e,n){var r;return function(i,o,s){return e&&e(i,o,s),r=n(i).bisect(n(i).values,t(o),0,n(i).values.length),n(i).values[r][1]--,i}},initial:function(t,e){return function(n){return n=t(n),e(n).values=[],e(n).bisect=r.bisect.by(function(t){return t[0]}).left,n}}};e.exports=i},{crossfilter:132}],158:[function(t,e,n){var r=t("crossfilter"),i={add:function(t,e,n){var i,o=r.bisect.by(function(t){return t}).left;return function(r,s,a){return e&&e(r,s,a),i=o(n(r).valueList,t(s),0,n(r).valueList.length),n(r).valueList.splice(i,0,t(s)),r}},remove:function(t,e,n){var i,o=r.bisect.by(function(t){return t}).left;return function(r,s,a){return e&&e(r,s,a),i=o(n(r).valueList,t(s),0,n(r).valueList.length),n(r).valueList.splice(i,1),r}},initial:function(t,e){return function(n){return n=t(n),e(n).valueList=[],n}}};e.exports=i},{crossfilter:132}],159:[function(t,e,n){"use strict";function r(t){var e=i(t).reverse();return function(t){return e.reduce(function(t,e){return e(t)},t)}}function i(t){var e=h.isObject(t)?o(t):t;if(h.isString(t))return function(e){return e[t]};if(h.isArray(t)){var n=h.map(t,i);return function(t){return n.map(function(e){return e(t)})}}if(e.key){if(d[e.key])return[d[e.key],i(e.value)];console.error("Could not find aggregration method",e)}return[]}function o(t){for(var e in t)if(t.hasOwnProperty(e))return{key:e,value:t[e]}}function s(t){return t.reduce(function(t,e){return t+e})}function a(t){return t.reduce(function(t,e){return t+e})/t.length}function u(t){return Math.max.apply(null,t)}function c(t){return Math.min.apply(null,t)}function l(t){return t.length}function f(t){return t[0]}function p(t){return t[t.length-1]}var h=t("./lodash");e.exports={makeFunction:r};var d={$sum:s,$avg:a,$max:u,$min:c,$count:l,$first:f,$last:p}},{"./lodash":167}],160:[function(t,e,n){"use strict";var r=t("bluebird"),i=t("./lodash");e.exports=function(t){return function(){return r.all(i.map(t.columns,function(t){return r.resolve(t.dimension.dispose())})).then(function(){return t.columns=[],t})}}},{"./lodash":167,bluebird:1}],161:[function(t,e,n){"use strict";var r=t("bluebird"),i=t("./lodash");e.exports=function(e){function n(t){return i.isNumber(t)?"number":i.isBoolean(t)?"bool":i.isArray(t)?"array":i.isObject(t)?"object":"string"}function o(t){var o=i.isObject(t)?t:{key:t};return r["try"](function(){return r.resolve(e.cf.all())}).then(function(t){var r;if(i.isArray(o.key)){if(o.complex=!0,r=i.map(i.pick(t[0],o.key)),r.length!==o.key.length)throw new Error("Column key does not exist in data!",o.key)}else r=t[0][o.key];if(!o.complex&&o.key!==!0&&"undefined"==typeof r)throw new Error("Column key does not exist in data!",o.key);return i.find(e.columns,{key:o.key})&&console.info("Column has already been defined",arguments),o.type=o.key===!0?"all":o.complex?"complex":o.array?"array":n(r),s(o.key,o.type)}).then(function(t){return o.dimension=t,e.columns.push(o),e})}var s=t("./dimension")(e);return function(t){return(t===!0||i.isUndefined(t))&&(t={key:!0}),i.isArray(t)||(t=[t]),r.all(i.map(t,o)).reflect().then(function(t){return e})}}},{"./dimension":163,"./lodash":167,bluebird:1}],162:[function(t,e,n){"use strict";function r(t){return s.isArray(t)?i.resolve(o(t)):t&&"function"==typeof t.dimension?i.resolve(t):i.reject(new Error("No Crossfilter data or instance found!"))}var i=t("bluebird"),o=t("crossfilter2"),s=t("./lodash");e.exports=r},{"./lodash":167,bluebird:1,crossfilter2:4}],163:[function(t,e,n){"use strict";var r=t("bluebird"),i=t("./lodash");e.exports=function(t){return function(e,n){var o;if(i.isArray(e)){var s=i.map(e,function(t){return"d['"+t+"']"});o=new Function("d","return "+JSON.stringify(s).replace(/\"/g,""))}else o=e===!0?function(t,e){return e}:function(t){return t[e]};return r.resolve(t.cf.dimension(o,"array"==n))}}},{"./lodash":167,bluebird:1}],164:[function(t,e,n){"use strict";var r=t("./lodash");e.exports=function(t){return function(e){return e=r.isArray(e)?e:[e],e.forEach(function(e){var n=r.remove(t.columns,{key:r.isObject(e)?e.key:e})[0];n.dimension.dispose()}),t}}},{"./lodash":167}],165:[function(t,e,n){"use strict";function r(t,e){return t[e]}function i(t,e){e=e(t);for(var n=0;n<e.length;n++)if(!e[n])return!1;return!0}function o(t,e){e=e(t);for(var n=0;n<e.length;n++)if(e[n])return!0;return!1}function s(t,e){e=e(t);for(var n=0;n<e.length;n++)if(e[n])return!1;return!0}function a(t,e){return t===e()}function u(t,e){return t>e()}function c(t,e){return t>=e()}function l(t,e){return t<e()}function f(t,e){return t<=e()}function p(t,e){return t!==e()}function h(t,e){return("undefined"==typeof t?"undefined":y(t))===e()}function d(t,e){return t.indexOf(e())>-1}function v(t,e){return-1===t.indexOf(e())}function _(t,e){return t.length===e()}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};e.exports={$field:r,$and:i,$or:o,$not:s,$eq:a,$gt:u,$gte:c,$lt:l,$lte:f,$ne:p,$type:h,$in:d,$nin:v,$size:_}},{}],166:[function(t,e,n){"use strict";var r=t("bluebird"),i=t("./lodash"),o=t("./expressions");e.exports=function(t){function e(e,n){var o;if(!i.isArray(e)&&n){var s={};s[e]=n,o=[s]}return t.filters={},r.resolve(t)}function n(t){var e;return i.isString(t)||i.isNumber(t)?function(e){return"undefined"==typeof e?t:o.$eq(e,function(){return t})}:i.isArray(t)?(e=i.map(t,n),function(t){return e.map(function(e){return e(t)})}):i.isObject(t)?(e=i.map(t,function(t,e){var r=n(t);return o[e]?function(t){return o[e](t,r)}:function(t){return t=t[e],r(t,r)}}),function(t){return o.$and(t,function(t){return i.map(e,function(e){return e(t)})})}):(console.log("no expression found for ",t),function(){})}return{filter:e,makeFunction:n}}},{"./expressions":165,"./lodash":167,bluebird:1}],167:[function(t,e,n){"use strict";var r=t("lodash/assign"),i=t("lodash/find"),o=t("lodash/remove"),s=t("lodash/isArray"),a=t("lodash/isObject"),u=t("lodash/isBoolean"),c=t("lodash/isString"),l=t("lodash/isNumber"),f=t("lodash/get"),p=t("lodash/map"),h=t("lodash/sortBy"),d=t("lodash/forEach"),v=t("lodash/isUndefined"),_=t("lodash/pick");e.exports={assign:r,find:i,remove:o,isArray:s,isObject:function(t){return a(t)&&!s(t)},isBoolean:u,isString:c,isNumber:l,get:f,map:p,sortBy:h,forEach:d,isUndefined:v,pick:_}},{"lodash/assign":97,"lodash/find":99,"lodash/forEach":100,"lodash/get":101,"lodash/isArray":105,"lodash/isBoolean":108,"lodash/isNumber":112,"lodash/isObject":113,"lodash/isString":115,"lodash/isUndefined":118,"lodash/map":121,"lodash/pick":122,"lodash/remove":124,"lodash/sortBy":126}],168:[function(t,e,n){"use strict";var r=t("bluebird"),i=t("./lodash");e.exports=function(e){var n=t("./reductiofy")(e);return function(t){"undefined"==typeof t&&(t={}),"undefined"==typeof t.select&&(t.select={$count:!0}),t.groupBy=t.groupBy||!0;var o=i.find(e.columns,{key:t.groupBy});return r["try"](function(){return o?o:e.column({key:t.groupBy,type:i.isUndefined(t.type)?null:t.type,array:!!t.array}).then(function(e){return i.find(e.columns,{key:t.groupBy})})}).then(function(t){return o=t,r.resolve(o.dimension.group())}).then(function(r){var i=n(t);return i(r),{universe:e,data:r.all(),crossfilter:e.cf,dimension:o.dimension,group:r}})}}},{"./lodash":167,"./reductiofy":170,bluebird:1}],169:[function(t,e,n){"use strict";function r(t,e){return t.count(!0)}function i(t,e){return t.sum(e)}function o(t,e){return t.avg(e)}function s(t,e){return t.min(e)}function a(t,e){return t.max(e)}function u(t,e){return t.median(e)}function c(t,e){return t.sumOfSq(e)}function l(t,e){return t.std(e)}t("./lodash");e.exports={shorthandLabels:{$count:"count",$sum:"sum",$avg:"avg",$min:"min",$max:"max",$med:"med",$sumSq:"sumSq",$std:"std"},aggregators:{$count:r,$sum:i,$avg:o,$min:s,$max:a,$med:u,$sumSq:c,$std:l}}},{"./lodash":167}],170:[function(t,e,n){"use strict";var r=t("reductio"),i=t("./lodash"),o=t("./reductioAggregators"),s=(t("./expressions"),t("./aggregation"));e.exports=function(e){var n=t("./filters")(e);return function(t){function e(t,e){var r=n.makeFunction(e);r&&t.filter(r)}function a(t,e){var n=i.sortBy(i.map(e,function(t,e){return{key:e,value:t}}),function(t){return o.aggregators[t.key]?0:1});return i.map(n,function(e){if(o.aggregators[e.key]){var n=u(e.value);return void(t=o.aggregators[e.key](t,n))}return i.isObject(e.value)?void(t=a(t.value(e.key),e.value)):void console.error("Nested selects must be an object",e.key)})}function u(t){return"string"==typeof t||"number"==typeof t?t+"":i.isObject(t)?s.makeFunction(t):void 0}var c=r();t.groupBy;return t.filter&&e(c,t.filter),a(c,t.select),c}}},{"./aggregation":159,"./expressions":165,"./filters":166,"./lodash":167,"./reductioAggregators":169,reductio:152}],171:[function(t,e,n){"use strict";function r(e){return o(e).then(function(e){var n={cf:e,columns:[],filters:{}};return i.assign(n,{column:t("./column")(n),query:t("./query")(n),filter:t("./filters")(n).filter,dispose:t("./dispose")(n),clear:t("./clear")(n)})})}var i=t("./lodash"),o=t("./crossfilter");e.exports=r},{"./clear":160,"./column":161,"./crossfilter":162,"./dispose":164,"./filters":166,"./lodash":167,"./query":168}]},{},[171])(171)});