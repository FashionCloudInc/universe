!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.universe=e()}}(function(){var e;return function n(e,t,r){function o(u,s){if(!t[u]){if(!e[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=t[u]={exports:{}};e[u][0].call(f.exports,function(n){var t=e[u][1][n];return o(t?t:n)},f,f.exports,n,e,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){n.exports=e("./src/crossfilter").crossfilter},{"./src/crossfilter":5}],2:[function(e,n,t){n.exports={_args:[[{name:"crossfilter2",raw:"crossfilter2@1.4.0-alpha.06",rawSpec:"1.4.0-alpha.06",scope:null,spec:"1.4.0-alpha.6",type:"version"},"/Users/jayson/workspace/components/universe"]],_from:"crossfilter2@1.4.0-alpha.6",_id:"crossfilter2@1.4.0-alpha.6",_inCache:!0,_installable:!0,_location:"/crossfilter2",_nodeVersion:"5.10.1",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/crossfilter2-1.4.0-alpha.6.tgz_1463519571786_0.49269671249203384"},_npmUser:{email:"esjewett@gmail.com",name:"esjewett"},_npmVersion:"3.8.3",_phantomChildren:{},_requested:{name:"crossfilter2",raw:"crossfilter2@1.4.0-alpha.06",rawSpec:"1.4.0-alpha.06",scope:null,spec:"1.4.0-alpha.6",type:"version"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/crossfilter2/-/crossfilter2-1.4.0-alpha.6.tgz",_shasum:"f0197c6fab2d6a583b51254bfc6357093f80521b",_shrinkwrap:null,_spec:"crossfilter2@1.4.0-alpha.06",_where:"/Users/jayson/workspace/components/universe",author:{name:"Mike Bostock",url:"http://bost.ocks.org/mike"},bugs:{url:"https://github.com/crossfilter/crossfilter/issues"},contributors:[{name:"Jason Davies",url:"http://www.jasondavies.com/"}],dependencies:{"lodash.result":"^4.4.0"},description:"Fast multidimensional filtering for coordinated views.",devDependencies:{browserify:"^13.0.0",d3:"3.5","package-json-versionify":"1.0.2","uglify-js":"2.4.0",vows:"0.7.0"},directories:{},dist:{shasum:"f0197c6fab2d6a583b51254bfc6357093f80521b",tarball:"https://registry.npmjs.org/crossfilter2/-/crossfilter2-1.4.0-alpha.6.tgz"},files:["src","index.js","crossfilter.js","crossfilter.min.js"],gitHead:"509a96798f5153a58d1b6cae5fb3e7893129ce7c",homepage:"http://crossfilter.github.com/crossfilter/",keywords:["analytics","visualization","crossfilter"],main:"./index.js",maintainers:[{email:"esjewett@gmail.com",name:"esjewett"},{email:"gordon@woodhull.com",name:"gordonwoodhull"},{email:"tannerlinsley@gmail.com",name:"tannerlinsley"}],name:"crossfilter2",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/crossfilter/crossfilter.git"},scripts:{benchmark:"node test/benchmark.js",build:"browserify index.js -t package-json-versionify --standalone crossfilter -o crossfilter.js && uglifyjs --compress --mangle --screw-ie8 crossfilter.js -o crossfilter.min.js",clean:"rm -f crossfilter.js crossfilter.min.js",test:"vows --verbose"},version:"1.4.0-alpha.6"}},{}],3:[function(e,n,t){function r(e){for(var n=new Array(e),t=-1;++t<e;)n[t]=0;return n}function o(e,n){for(var t=e.length;t<n;)e[t++]=0;return e}function i(e,n){if(n>32)throw new Error("invalid array width!");return e}function u(e){this.length=e,this.subarrays=1,this.width=8,this.masks={0:0},this[0]=crossfilter_array8(e)}"undefined"!=typeof Uint8Array&&(crossfilter_array8=function(e){return new Uint8Array(e)},crossfilter_array16=function(e){return new Uint16Array(e)},crossfilter_array32=function(e){return new Uint32Array(e)},crossfilter_arrayLengthen=function(e,n){if(e.length>=n)return e;var t=new e.constructor(n);return t.set(e),t},crossfilter_arrayWiden=function(e,n){var t;switch(n){case 16:t=crossfilter_array16(e.length);break;case 32:t=crossfilter_array32(e.length);break;default:throw new Error("invalid array width!")}return t.set(e),t}),u.prototype.lengthen=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)this[n]=crossfilter_arrayLengthen(this[n],e);this.length=e},u.prototype.add=function(){var e,n,t,r,o;for(r=0,o=this.subarrays;r<o;++r)if(e=this.masks[r],n=this.width-32*r,t=~e&-~e,!(n>=32)||t)return n<32&&t&1<<n&&(this[r]=crossfilter_arrayWiden(this[r],n<<=1),this.width=32*r+n),this.masks[r]|=t,{offset:r,one:t};return this[this.subarrays]=crossfilter_array8(this.length),this.masks[this.subarrays]=1,this.width+=8,{offset:this.subarrays++,one:1}},u.prototype.copy=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)this[t][e]=this[t][n]},u.prototype.truncate=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n){for(var r=this.length-1;r>=e;r--)this[n][r]=0;this[n].length=e}this.length=e},u.prototype.zero=function(e){var n,t;for(n=0,t=this.subarrays;n<t;++n)if(this[n][e])return!1;return!0},u.prototype.zeroExcept=function(e,n,t){var r,o;for(r=0,o=this.subarrays;r<o;++r)if(r===n?this[r][e]&t:this[r][e])return!1;return!0},u.prototype.zeroExceptMask=function(e,n){var t,r;for(t=0,r=this.subarrays;t<r;++t)if(this[t][e]&n[t])return!1;return!0},u.prototype.only=function(e,n,t){var r,o;for(r=0,o=this.subarrays;r<o;++r)if(this[r][e]!=(r===n?t:0))return!1;return!0},u.prototype.onlyExcept=function(e,n,t,r,o){var i,u,s;for(u=0,s=this.subarrays;u<s;++u)if(i=this[u][e],u===n&&(i&=t),i!=(u===r?o:0))return!1;return!0},n.exports={array8:r,array16:r,array32:r,arrayLengthen:o,arrayWiden:i,bitarray:u}},{}],4:[function(e,n,t){function r(e){function n(n,t,r,o){for(;r<o;){var i=r+o>>>1;e(n[i])<t?r=i+1:o=i}return r}function t(n,t,r,o){for(;r<o;){var i=r+o>>>1;t<e(n[i])?o=i:r=i+1}return r}return t.right=t,t.left=n,t}var o=e("./identity");n.exports=r(o),n.exports.by=r},{"./identity":9}],5:[function(e,n,t){function r(){function e(e){var n=R,t=e.length;return t&&(E=E.concat(e),S.lengthen(R+=t),$.forEach(function(r){r(e,n,t)}),_("dataAdded")),L}function n(){for(var e=o(R,R),n=[],t=0,r=0;t<R;++t)S.zero(t)?n.push(t):e[t]=r++;q.forEach(function(e){e(-1,-1,[],n,!0)}),I.forEach(function(n){n(e)});for(var t=0,r=0;t<R;++t)S.zero(t)||(t!==r&&(S.copy(r,t),E[r]=E[t]),++r);E.length=R=r,S.truncate(r),_("dataRemoved")}function t(e,n){var t,r,o,i,u=Array(S.subarrays);for(t=0;t<S.subarrays;t++)u[t]=-1;if(n)for(r=0,i=n.length;r<i;r++)o=n[r].id(),u[o>>7]&=~(1<<(63&o));return S.zeroExceptMask(e,u)}function r(e,n){function t(t,r,s){if(n){for(fe=0,x=0,k=[],i=0;i<t.length;i++)for(x=0,k=e(t[i]);x<k.length;x++)fe++;G=[],X=u(t.length),ee=o(fe,1),ne=[];var c=u(fe);for(l=0,i=0;i<t.length;i++)if(k=e(t[i]),k.length)for(X[i]=k.length,x=0;x<k.length;x++)G.push(k[x]),c[l]=i,l++;else X[i]=0,ne.push(i);var f=oe(u(fe),0,fe);G=g(G,f),Y=g(c,f)}else G=t.map(e),Y=oe(u(s),0,s),G=g(G,Y);n&&(s=fe);var p=ie(G),d=p[0],v=p[1];if(te)for(i=0;i<s;++i)te(G[i],i)||(S[K][Y[i]+r]|=B,n&&(ee[i]=1));else{for(i=0;i<d;++i)S[K][Y[i]+r]|=B,n&&(ee[i]=1);for(i=v;i<s;++i)S[K][Y[i]+r]|=B,n&&(ee[i]=1)}if(!r)return Q=G,W=Y,H=X,Z=ee,ae=d,void(ce=v);var h=Q,m=W,y=Z;if(i0=0,i1=0,n&&(old_n0=r,r=h.length,s=fe),Q=n?new Array(r+s):new Array(R),W=n?new Array(r+s):o(R,R),n&&(Z=o(r+s,1)),n){var b=H.length;H=a.arrayLengthen(H,R);for(var x=0;x+b<R;x++)H[x+b]=X[x]}for(i=0;i0<r&&i1<s;++i)h[i0]<G[i1]?(Q[i]=h[i0],n&&(Z[i]=y[i0]),W[i]=m[i0++]):(Q[i]=G[i1],n&&(Z[i]=y[i1]),W[i]=Y[i1++]+(n?old_n0:r));for(;i0<r;++i0,++i)Q[i]=h[i0],n&&(Z[i]=y[i0]),W[i]=m[i0];for(;i1<s;++i1,++i)Q[i]=G[i1],n&&(Z[i]=y[i1]),W[i]=Y[i1]+(n?old_n0:r);p=ie(Q),ae=p[0],ce=p[1]}function r(e,n,t){ue.forEach(function(e){e(G,Y,n,t)}),G=Y=null}function y(e){for(var n,t=0,r=0;t<R;++t)S.zero(n=W[t])||(t!==r&&(Q[r]=Q[t]),W[r]=e[n],++r);for(Q.length=r;r<R;)W[r++]=0;var o=ie(Q);ae=o[0],ce=o[1]}function j(e){var t=e[0],r=e[1];if(te)return te=null,P(function(e,n){return t<=n&&n<r},0===e[0]&&e[1]===W.length),ae=t,ce=r,re;var o,i,u,s=[],a=[],c=[],f=[];if(t<ae)for(o=t,i=Math.min(ae,r);o<i;++o)s.push(W[o]),c.push(o);else if(t>ae)for(o=ae,i=Math.min(t,ce);o<i;++o)a.push(W[o]),f.push(o);if(r>ce)for(o=Math.max(t,ce),i=r;o<i;++o)s.push(W[o]),c.push(o);else if(r<ce)for(o=Math.max(ae,r),i=ce;o<i;++o)a.push(W[o]),f.push(o);if(n){var l=[],p=[];for(o=0;o<s.length;o++)H[s[o]]++,Z[c[o]]=0,1===H[s[o]]&&(S[K][s[o]]^=B,l.push(s[o]));for(o=0;o<a.length;o++)H[a[o]]--,Z[f[o]]=1,0===H[a[o]]&&(S[K][a[o]]^=B,p.push(a[o]));if(s=l,a=p,0===e[0]&&e[1]===W.length)for(o=0;o<ne.length;o++)S[K][u=ne[o]]&B&&(S[K][u]^=B,s.push(u));else for(o=0;o<ne.length;o++)S[K][u=ne[o]]&B||(S[K][u]^=B,a.push(u))}else{for(o=0;o<s.length;o++)S[K][s[o]]^=B;for(o=0;o<a.length;o++)S[K][a[o]]^=B}return ae=t,ce=r,q.forEach(function(e){e(B,K,s,a)}),_("filtered"),re}function A(e){return null==e?T():Array.isArray(e)?L(e):"function"==typeof e?C(e):O(e)}function O(e){return j((ie=c.filterExact(m,e))(Q))}function L(e){return j((ie=c.filterRange(m,e))(Q))}function T(){return j((ie=c.filterAll)(Q))}function C(e){return te=e,ie=c.filterAll,P(e,!1),ae=0,ce=R,re}function P(e,t){var r,o,i,u=[],s=[],a=[],c=[],f=W.length;if(!n)for(r=0;r<f;++r)!(S[K][o=W[r]]&B)^!!(i=e(Q[r],r))&&(i?u.push(o):s.push(o));if(n)for(r=0;r<f;++r)e(Q[r],r)?(u.push(W[r]),a.push(r)):(s.push(W[r]),c.push(r));if(n){var l=[],p=[];for(r=0;r<u.length;r++)1===Z[a[r]]&&(H[u[r]]++,Z[a[r]]=0,1===H[u[r]]&&(S[K][u[r]]^=B,l.push(u[r])));for(r=0;r<s.length;r++)0===Z[c[r]]&&(H[s[r]]--,Z[c[r]]=1,0===H[s[r]]&&(S[K][s[r]]^=B,p.push(s[r])));if(u=l,s=p,t)for(r=0;r<ne.length;r++)S[K][o=ne[r]]&B&&(S[K][o]^=B,u.push(o));else for(r=0;r<ne.length;r++)S[K][o=ne[r]]&B||(S[K][o]^=B,s.push(o))}else{for(r=0;r<u.length;r++)S[K][u[r]]&B&&(S[K][u[r]]&=V);for(r=0;r<s.length;r++)S[K][s[r]]&B||(S[K][s[r]]|=B)}q.forEach(function(e){e(B,K,u,s)}),_("filtered")}function z(e,t){var r,o=[],i=ce,u=0;for(t&&t>0&&(u=t);--i>=ae&&e>0;)S.zero(r=W[i])&&(u>0?--u:(o.push(E[r]),--e));if(n)for(i=0;i<ne.length&&e>0;i++)S.zero(r=ne[i])&&(u>0?--u:(o.push(E[r]),--e));return o}function N(e,t){var r,o,i=[],u=0;if(t&&t>0&&(u=t),n)for(r=0;r<ne.length&&e>0;r++)S.zero(o=ne[r])&&(u>0?--u:(i.push(E[o]),--e));for(r=ae;r<ce&&e>0;)S.zero(o=W[r])&&(u>0?--u:(i.push(E[o]),--e)),r++;return i}function F(e){function t(t,r,f,d){function v(){return n?void J++:void(++J===D&&(A=a.arrayWiden(A,M<<=1),C=a.arrayWiden(C,M),D=s(M)))}n&&(n0old=f,f=Q.length-t.length,d=t.length);var h,y,b,x,j,w,k=T,A=n?[]:o(J,D),O=N,_=F,L=U,$=J,I=0,P=0;for(H&&(O=L=p),H&&(_=L=p),T=new Array(J),J=0,C=n?$>1?C:[]:$>1?a.arrayLengthen(C,R):o(R,D),$&&(b=(y=k[0]).key);P<d&&!((x=e(t[P]))>=x);)++P;for(;P<d;){for(y&&b<=x?(j=y,w=b,A[I]=J,(y=k[++I])&&(b=y.key)):(j={key:x,value:L()},w=x),T[J]=j;x<=w&&(h=r[P]+(n?n0old:f),n?C[h]?C[h].push(J):C[h]=[J]:C[h]=J,j.value=O(j.value,E[h],!0),S.zeroExcept(h,K,V)||(j.value=_(j.value,E[h],!1)),!(++P>=d));)x=e(t[P]);v()}for(;I<$;)T[A[I]=J]=k[I++],v();if(n)for(i=0;i<R;i++)C[i]||(C[i]=[]);if(J>I)if(n)C=g(C,A,!0);else for(I=0;I<f;++I)C[I]=A[C[I]];h=q.indexOf(G),J>1?(G=u,Y=l):(!J&&X&&(J=1,T=[{key:null,value:L()}]),1===J?(G=c,Y=m):(G=p,Y=p),C=null),q[h]=G}function r(){if(J>1){for(var e=J,n=T,t=o(e,e),r=0,i=0;r<R;++r)S.zero(r)||(t[C[i]=C[r]]=1,++i);for(T=[],J=0,r=0;r<e;++r)t[r]&&(t[r]=J++,T.push(n[r]));if(J>1)for(var r=0;r<i;++r)C[r]=t[C[r]];else C=null;q[q.indexOf(G)]=J>1?(Y=l,G=u):1===J?(Y=m,G=c):Y=G=p}else if(1===J){if(X)return;for(var r=0;r<R;++r)if(!S.zero(r))return;T=[],J=0,q[q.indexOf(G)]=G=Y=p}}function u(e,t,r,o,i){if(!(e===B&&t===K||H)){var u,s,a,c,f;if(n){for(u=0,c=r.length;u<c;++u)if(S.zeroExcept(a=r[u],K,V))for(s=0;s<C[a].length;s++)f=T[C[a][s]],f.value=N(f.value,E[a],!1,s);for(u=0,c=o.length;u<c;++u)if(S.onlyExcept(a=o[u],K,V,t,e))for(s=0;s<C[a].length;s++)f=T[C[a][s]],f.value=F(f.value,E[a],i,s)}else{for(u=0,c=r.length;u<c;++u)S.zeroExcept(a=r[u],K,V)&&(f=T[C[a]],f.value=N(f.value,E[a],!1));for(u=0,c=o.length;u<c;++u)S.onlyExcept(a=o[u],K,V,t,e)&&(f=T[C[a]],f.value=F(f.value,E[a],i))}}}function c(e,n,t,r,o){if(!(e===B&&n===K||H)){var i,u,s,a=T[0];for(i=0,s=t.length;i<s;++i)S.zeroExcept(u=t[i],K,V)&&(a.value=N(a.value,E[u],!1));for(i=0,s=r.length;i<s;++i)S.onlyExcept(u=r[i],K,V,n,e)&&(a.value=F(a.value,E[u],o))}}function l(){var e,t,r;for(e=0;e<J;++e)T[e].value=U();if(n){for(e=0;e<R;++e)for(t=0;t<C[e].length;t++)r=T[C[e][t]],r.value=N(r.value,E[e],!0,t);for(e=0;e<R;++e)if(!S.zeroExcept(e,K,V))for(t=0;t<C[e].length;t++)r=T[C[e][t]],r.value=F(r.value,E[e],!1,t)}else{for(e=0;e<R;++e)r=T[C[e]],r.value=N(r.value,E[e],!0);for(e=0;e<R;++e)S.zeroExcept(e,K,V)||(r=T[C[e]],r.value=F(r.value,E[e],!1))}}function m(){var e,n=T[0];for(n.value=U(),e=0;e<R;++e)n.value=N(n.value,E[e],!0);for(e=0;e<R;++e)S.zeroExcept(e,K,V)||(n.value=F(n.value,E[e],!1))}function y(){return H&&(Y(),H=!1),T}function b(e){var n=P(y(),0,T.length,e);return z.sort(n,0,n.length)}function j(e,n,t){return N=e,F=n,U=t,H=!0,$}function w(){return j(x.reduceIncrement,x.reduceDecrement,d)}function k(e){return j(x.reduceAdd(e),x.reduceSubtract(e),d)}function A(e){function n(n){return e(n.value)}return P=v.by(n),z=h.by(n),$}function O(){return A(f)}function _(){return J}function L(){var e=q.indexOf(G);return e>=0&&q.splice(e,1),e=ue.indexOf(t),e>=0&&ue.splice(e,1),e=I.indexOf(r),e>=0&&I.splice(e,1),$}var $={top:b,all:y,reduce:j,reduceCount:w,reduceSum:k,order:A,orderNatural:O,size:_,dispose:L,remove:L};se.push($);var T,C,P,z,N,F,U,M=8,D=s(M),J=0,G=p,Y=p,H=!0,X=e===p;return arguments.length<1&&(e=f),q.push(G),ue.push(t),I.push(r),t(Q,W,0,R),w().orderNatural()}function U(){var e=F(p),n=e.all;return delete e.all,delete e.top,delete e.order,delete e.orderNatural,delete e.size,e.value=function(){return n()[0].value},e}function M(){se.forEach(function(e){e.dispose()});var e=$.indexOf(t);return e>=0&&$.splice(e,1),e=$.indexOf(r),e>=0&&$.splice(e,1),e=I.indexOf(y),e>=0&&I.splice(e,1),S.masks[K]&=V,T()}if("string"==typeof e){var D=e;e=function(e){return w(e,D)}}var B,V,K,J,Q,W,G,Y,H,X,Z,ee,ne,te,re={filter:A,filterExact:O,filterRange:L,filterFunction:C,filterAll:T,top:z,bottom:N,group:F,groupAll:U,dispose:M,remove:M,accessor:e,id:function(){return J}},oe=b.by(function(e){return G[e]}),ie=c.filterAll,ue=[],se=[],ae=0,ce=0,fe=0;$.unshift(t),$.push(r),I.push(y);var le=S.add();return K=le.offset,B=le.one,V=~B,J=K<<7|Math.log(B)/Math.log(2),t(E,0,R),r(E,0,R),re}function y(){function e(e,n){var t;if(!v)for(t=n;t<R;++t)a=c(a,E[t],!0),S.zero(t)||(a=f(a,E[t],!1))}function n(e,n,t,r,o){var i,u,s;if(!v){for(i=0,s=t.length;i<s;++i)S.zero(u=t[i])&&(a=c(a,E[u],o));for(i=0,s=r.length;i<s;++i)S.only(u=r[i],n,e)&&(a=f(a,E[u],o))}}function t(){var e;for(a=l(),e=0;e<R;++e)a=c(a,E[e],!0),S.zero(e)||(a=f(a,E[e],!1))}function r(e,n,t){return c=e,f=n,l=t,v=!0,p}function o(){return r(x.reduceIncrement,x.reduceDecrement,d)}function i(e){return r(x.reduceAdd(e),x.reduceSubtract(e),d)}function u(){return v&&(t(),v=!1),a}function s(){var t=q.indexOf(n);return t>=0&&q.splice(t),t=$.indexOf(e),t>=0&&$.splice(t),p}var a,c,f,l,p={reduce:r,reduceCount:o,reduceSum:i,value:u,dispose:s,remove:s},v=!0;return q.push(n),$.push(e),e(E,0,R),o()}function j(){return R}function A(){return E}function O(e){return"function"!=typeof e?void console.warn("onChange callback parameter must be a function!"):(T.push(e),function(){T.splice(T.indexOf(e),1)})}function _(e){for(var n=0;n<T.length;n++)T[n](e)}var S,L={add:e,remove:n,dimension:r,groupAll:y,size:j,all:A,onChange:O,isElementFiltered:t},E=[],R=0,q=[],$=[],I=[],T=[];return S=new a.bitarray(0),arguments.length?e(arguments[0]):L}function o(e,n){return(n<257?a.array8:n<65537?a.array16:a.array32)(e)}function u(e){for(var n=o(e,e),t=-1;++t<e;)n[t]=t;return n}function s(e){return 8===e?256:16===e?65536:4294967296}var a=e("./array"),c=e("./filter"),f=e("./identity"),p=e("./null"),d=e("./zero"),v=e("./heapselect"),h=e("./heap"),m=e("./bisect"),y=e("./insertionsort"),g=e("./permute"),b=e("./quicksort"),x=e("./reduce"),j=e("./../package.json"),w=e("lodash.result");t.crossfilter=r,t.crossfilter.heap=h,t.crossfilter.heapselect=v,t.crossfilter.bisect=m,t.crossfilter.insertionsort=y,t.crossfilter.permute=g,t.crossfilter.quicksort=b,t.crossfilter.version=j.version},{"./../package.json":2,"./array":3,"./bisect":4,"./filter":6,"./heap":7,"./heapselect":8,"./identity":9,"./insertionsort":10,"./null":11,"./permute":12,"./quicksort":13,"./reduce":14,"./zero":15,"lodash.result":18}],6:[function(e,n,t){function r(e,n){return function(t){var r=t.length;return[e.left(t,n,0,r),e.right(t,n,0,r)]}}function o(e,n){var t=n[0],r=n[1];return function(n){var o=n.length;return[e.left(n,t,0,o),e.left(n,r,0,o)]}}function i(e){return[0,e.length]}n.exports={filterExact:r,filterRange:o,filterAll:i}},{}],7:[function(e,n,t){function r(e){function n(e,n,t){for(var o=t-n,i=(o>>>1)+1;--i>0;)r(e,i,o,n);return e}function t(e,n,t){for(var o,i=t-n;--i>0;)o=e[n],e[n]=e[n+i],e[n+i]=o,r(e,1,i,n);return e}function r(n,t,r,o){for(var i,u=n[--o+t],s=e(u);(i=t<<1)<=r&&(i<r&&e(n[o+i])>e(n[o+i+1])&&i++,!(s<=e(n[o+i])));)n[o+t]=n[o+i],t=i;n[o+t]=u}return n.sort=t,n}var o=e("./identity");n.exports=r(o),n.exports.by=r},{"./identity":9}],8:[function(e,n,t){function r(e){function n(n,r,o,i){var u,s,a,c,f=new Array(i=Math.min(o-r,i));for(s=0;s<i;++s)f[s]=n[r++];if(t(f,0,i),r<o){u=e(f[0]);do(a=e(c=n[r])>u)&&(f[0]=c,u=e(t(f,0,i)[0]));while(++r<o)}return f}var t=i.by(e);return n}var o=e("./identity"),i=e("./heap");n.exports=r(o),n.exports.by=r},{"./heap":7,"./identity":9}],9:[function(e,n,t){function r(e){return e}n.exports=r},{}],10:[function(e,n,t){function r(e){function n(n,t,r){for(var o=t+1;o<r;++o){for(var i=o,u=n[o],s=e(u);i>t&&e(n[i-1])>s;--i)n[i]=n[i-1];n[i]=u}return n}return n}var o=e("./identity");n.exports=r(o),n.exports.by=r},{"./identity":9}],11:[function(e,n,t){function r(){return null}n.exports=r},{}],12:[function(e,n,t){function r(e,n,t){for(var r=0,o=n.length,i=t?JSON.parse(JSON.stringify(e)):new Array(o);r<o;++r)i[r]=e[n[r]];return i}n.exports=r},{}],13:[function(e,n,t){function r(e){function n(e,n,o){return(o-n<u?r:t)(e,n,o)}function t(t,r,o){var i,u=(o-r)/6|0,s=r+u,a=o-1-u,c=r+o-1>>1,f=c-u,l=c+u,p=t[s],d=e(p),v=t[f],h=e(v),m=t[c],y=e(m),g=t[l],b=e(g),x=t[a],j=e(x);d>h&&(i=p,p=v,v=i,i=d,d=h,h=i),b>j&&(i=g,g=x,x=i,i=b,b=j,j=i),d>y&&(i=p,p=m,m=i,i=d,d=y,y=i),h>y&&(i=v,v=m,m=i,i=h,h=y,y=i),d>b&&(i=p,p=g,g=i,i=d,d=b,b=i),y>b&&(i=m,m=g,g=i,i=y,y=b,b=i),h>j&&(i=v,v=x,x=i,i=h,h=j,j=i),h>y&&(i=v,v=m,m=i,i=h,h=y,y=i),b>j&&(i=g,g=x,x=i,i=b,b=j,j=i);var w=v,k=h,A=g,O=b;t[s]=p,t[f]=t[r],t[c]=m,t[l]=t[o-1],t[a]=x;var _=r+1,S=o-2,L=k<=O&&k>=O;if(L)for(var E=_;E<=S;++E){var R=t[E],q=e(R);if(q<k)E!==_&&(t[E]=t[_],t[_]=R),++_;else if(q>k)for(;;){var $=e(t[S]);{if(!($>k)){if($<k){t[E]=t[_],t[_++]=t[S],t[S--]=R;break}t[E]=t[S],t[S--]=R;break}S--}}}else for(var E=_;E<=S;E++){var R=t[E],q=e(R);if(q<k)E!==_&&(t[E]=t[_],t[_]=R),++_;else if(q>O)for(;;){var $=e(t[S]);{if(!($>O)){$<k?(t[E]=t[_],t[_++]=t[S],t[S--]=R):(t[E]=t[S],t[S--]=R);break}if(S--,S<E)break}}}if(t[r]=t[_-1],t[_-1]=w,t[o-1]=t[S+1],t[S+1]=A,n(t,r,_-1),n(t,S+2,o),L)return t;if(_<s&&S>a){for(var I,$;(I=e(t[_]))<=k&&I>=k;)++_;for(;($=e(t[S]))<=O&&$>=O;)--S;for(var E=_;E<=S;E++){var R=t[E],q=e(R);if(q<=k&&q>=k)E!==_&&(t[E]=t[_],t[_]=R),_++;else if(q<=O&&q>=O)for(;;){var $=e(t[S]);{if(!($<=O&&$>=O)){$<k?(t[E]=t[_],t[_++]=t[S],t[S--]=R):(t[E]=t[S],t[S--]=R);break}if(S--,S<E)break}}}}return n(t,_,S+1)}var r=i.by(e);return n}var o=e("./identity"),i=e("./insertionsort"),u=32;n.exports=r(o),n.exports.by=r},{"./identity":9,"./insertionsort":10}],14:[function(e,n,t){function r(e){return e+1}function o(e){return e-1}function i(e){return function(n,t){return n+ +e(t)}}function u(e){return function(n,t){return n-e(t)}}n.exports={reduceIncrement:r,reduceDecrement:o,reduceAdd:i,reduceSubtract:u}},{}],15:[function(e,n,t){function r(){return 0}n.exports=r},{}],16:[function(e,n,t){(function(r){function o(e){return e&&e.Object===Object?e:null}function i(e){var n=!1;if(null!=e&&"function"!=typeof e.toString)try{n=!!(e+"")}catch(t){}return n}function u(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function s(){this.__data__=ue?ue(null):{}}function a(e){return this.has(e)&&delete this.__data__[e]}function c(e){var n=this.__data__;if(ue){var t=n[e];return t===z?void 0:t}return ne.call(n,e)?n[e]:void 0}function f(e){var n=this.__data__;return ue?void 0!==n[e]:ne.call(n,e)}function l(e,n){var t=this.__data__;return t[e]=ue&&void 0===n?z:n,this}function p(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function d(){this.__data__=[]}function v(e){var n=this.__data__,t=A(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():oe.call(n,t,1),!0}function h(e){var n=this.__data__,t=A(n,e);return t<0?void 0:n[t][1]}function m(e){return A(this.__data__,e)>-1}function y(e,n){var t=this.__data__,r=A(t,e);return r<0?t.push([e,n]):t[r][1]=n,this}function g(e){var n=-1,t=e?e.length:0;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function b(){this.__data__={hash:new u,map:new(ie||p),string:new u}}function x(e){return O(this,e)["delete"](e)}function j(e){return O(this,e).get(e)}function w(e){return O(this,e).has(e)}function k(e,n){return O(this,e).set(e,n),this}function A(e,n){for(var t=e.length;t--;)if(R(e[t][0],n))return t;return-1}function O(e,n){var t=e.__data__;return S(n)?t["string"==typeof n?"string":"hash"]:t.map}function _(e,n){var t=e[n];return I(t)?t:void 0}function S(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}function L(e){if(null!=e){try{return ee.call(e)}catch(n){}try{return e+""}catch(n){}}return""}function E(e,n){if("function"!=typeof e||n&&"function"!=typeof n)throw new TypeError(P);var t=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var u=e.apply(this,r);return t.cache=i.set(o,u),u};return t.cache=new(E.Cache||g),t}function R(e,n){return e===n||e!==e&&n!==n}function q(e){var n=$(e)?te.call(e):"";return n==N||n==F}function $(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function I(e){if(!$(e))return!1;var n=q(e)||i(e)?re:B;return n.test(L(e))}function T(e){return null==e?"":C(e)}var C=e("lodash._basetostring"),P="Expected a function",z="__lodash_hash_undefined__",N="[object Function]",F="[object GeneratorFunction]",U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,M=/[\\^$.*+?()[\]{}|]/g,D=/\\(\\)?/g,B=/^\[object .+?Constructor\]$/,V={"function":!0,object:!0},K=V[typeof t]&&t&&!t.nodeType?t:void 0,J=V[typeof n]&&n&&!n.nodeType?n:void 0,Q=o(K&&J&&"object"==typeof r&&r),W=o(V[typeof self]&&self),G=o(V[typeof window]&&window),Y=o(V[typeof this]&&this),H=Q||G!==(Y&&Y.window)&&G||W||Y||Function("return this")(),X=Array.prototype,Z=Object.prototype,ee=Function.prototype.toString,ne=Z.hasOwnProperty,te=Z.toString,re=RegExp("^"+ee.call(ne).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=X.splice,ie=_(H,"Map"),ue=_(Object,"create");u.prototype.clear=s,u.prototype["delete"]=a,u.prototype.get=c,u.prototype.has=f,u.prototype.set=l,p.prototype.clear=d,p.prototype["delete"]=v,p.prototype.get=h,p.prototype.has=m,p.prototype.set=y,g.prototype.clear=b,g.prototype["delete"]=x,g.prototype.get=j,g.prototype.has=w,g.prototype.set=k;var se=E(function(e){var n=[];return T(e).replace(U,function(e,t,r,o){n.push(r?o.replace(D,"$1"):t||e)}),n});E.Cache=g,n.exports=se}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._basetostring":17}],17:[function(e,n,t){(function(e){function r(e){return e&&e.Object===Object?e:null}function o(e){if("string"==typeof e)return e;if(u(e))return j?j.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}function i(e){return!!e&&"object"==typeof e}function u(e){return"symbol"==typeof e||i(e)&&g.call(e)==a}var s=1/0,a="[object Symbol]",c={"function":!0,object:!0},f=c[typeof t]&&t&&!t.nodeType?t:void 0,l=c[typeof n]&&n&&!n.nodeType?n:void 0,p=r(f&&l&&"object"==typeof e&&e),d=r(c[typeof self]&&self),v=r(c[typeof window]&&window),h=r(c[typeof this]&&this),m=p||v!==(h&&h.window)&&v||d||h||Function("return this")(),y=Object.prototype,g=y.toString,b=m.Symbol,x=b?b.prototype:void 0,j=x?x.toString:void 0;n.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,n,t){function r(e){return x(e)?e:l(e)}function o(e,n){if(x(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!c(e))||(y.test(e)||!m.test(e)||null!=n&&e in Object(n))}function i(e){if("string"==typeof e||c(e))return e;var n=e+"";return"0"==n&&1/e==-p?"-0":n}function u(e){var n=s(e)?b.call(e):"";return n==d||n==v}function s(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function a(e){return!!e&&"object"==typeof e}function c(e){return"symbol"==typeof e||a(e)&&b.call(e)==h}function f(e,n,t){n=o(n,e)?[n]:r(n);var s=-1,a=n.length;for(a||(e=void 0,a=1);++s<a;){var c=null==e?void 0:e[i(n[s])];void 0===c&&(s=a,c=t),e=u(c)?c.call(e):c}return e}var l=e("lodash._stringtopath"),p=1/0,d="[object Function]",v="[object GeneratorFunction]",h="[object Symbol]",m=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/,g=Object.prototype,b=g.toString,x=Array.isArray;n.exports=f},{"lodash._stringtopath":16}],19:[function(e,n,t){function r(){p&&f&&(p=!1,f.length?l=f.concat(l):d=-1,l.length&&o())}function o(){if(!p){var e=s(r);p=!0;for(var n=l.length;n;){for(f=l,l=[];++d<n;)f&&f[d].run();d=-1,n=l.length}f=null,p=!1,a(e)}}function i(e,n){this.fun=e,this.array=n}function u(){}var s,a,c=n.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var f,l=[],p=!1,d=-1;c.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];l.push(new i(e,n)),1!==l.length||p||s(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=u,c.addListener=u,c.once=u,c.off=u,c.removeListener=u,c.removeAllListeners=u,c.emit=u,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],20:[function(n,t,r){(function(n){!function(n){"use strict";if("function"==typeof bootstrap)bootstrap("promise",n);else if("object"==typeof r&&"object"==typeof t)t.exports=n();else if("function"==typeof e&&e.amd)e(n);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=n}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var o="undefined"!=typeof window?window:self,i=o.Q;o.Q=n(),o.Q.noConflict=function(){return o.Q=i,this}}}(function(){"use strict";function e(e){return function(){return G.apply(e,arguments)}}function t(e){return e===Object(e)}function r(e){return"[object StopIteration]"===re(e)||e instanceof K}function o(e,n){if(D&&n.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(oe)===-1){for(var t=[],r=n;r;r=r.source)r.stack&&t.unshift(r.stack);t.unshift(e.stack);var o=t.join("\n"+oe+"\n");e.stack=i(o)}}function i(e){for(var n=e.split("\n"),t=[],r=0;r<n.length;++r){var o=n[r];a(o)||u(o)||!o||t.push(o)}return t.join("\n")}function u(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function s(e){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(n)return[n[1],Number(n[2])];var t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function a(e){var n=s(e);if(!n)return!1;var t=n[0],r=n[1];return t===V&&r>=J&&r<=ce}function c(){if(D)try{throw new Error}catch(e){var n=e.stack.split("\n"),t=n[0].indexOf("@")>0?n[1]:n[2],r=s(t);if(!r)return;return V=r[0],r[1]}}function f(e,n,t){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+t+" instead.",new Error("").stack),e.apply(e,arguments)}}function l(e){return e instanceof h?e:b(e)?L(e):S(e)}function p(){function e(e){n=e,i.source=e,H(t,function(n,t){l.nextTick(function(){e.promiseDispatch.apply(e,t)})},void 0),t=void 0,r=void 0}var n,t=[],r=[],o=ee(p.prototype),i=ee(h.prototype);if(i.promiseDispatch=function(e,o,i){var u=Y(arguments);t?(t.push(u),"when"===o&&i[1]&&r.push(i[1])):l.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(t)return i;var e=y(n);return g(e)&&(n=e),e},i.inspect=function(){return n?n.inspect():{state:"pending"}},l.longStackSupport&&D)try{throw new Error}catch(u){i.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(t){n||e(l(t))},o.fulfill=function(t){n||e(S(t))},o.reject=function(t){n||e(_(t))},o.notify=function(e){n||H(r,function(n,t){l.nextTick(function(){t(e)})},void 0)},o}function d(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var n=p();try{e(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function v(e){return d(function(n,t){for(var r=0,o=e.length;r<o;r++)l(e[r]).then(n,t)})}function h(e,n,t){void 0===n&&(n=function(e){return _(new Error("Promise does not support operation: "+e))}),void 0===t&&(t=function(){return{state:"unknown"}});var r=ee(h.prototype);if(r.promiseDispatch=function(t,o,i){var u;try{u=e[o]?e[o].apply(r,i):n.call(r,o,i)}catch(s){u=_(s)}t&&t(u)},r.inspect=t,t){var o=t();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var e=t();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function m(e,n,t,r){return l(e).then(n,t,r)}function y(e){if(g(e)){var n=e.inspect();if("fulfilled"===n.state)return n.value}return e}function g(e){return e instanceof h}function b(e){return t(e)&&"function"==typeof e.then}function x(e){return g(e)&&"pending"===e.inspect().state}function j(e){return!g(e)||"fulfilled"===e.inspect().state}function w(e){return g(e)&&"rejected"===e.inspect().state}function k(){ie.length=0,ue.length=0,ae||(ae=!0)}function A(e,t){ae&&("object"==typeof n&&"function"==typeof n.emit&&l.nextTick.runAfter(function(){X(ue,e)!==-1&&(n.emit("unhandledRejection",t,e),se.push(e))}),ue.push(e),t&&"undefined"!=typeof t.stack?ie.push(t.stack):ie.push("(no stack) "+t))}function O(e){if(ae){var t=X(ue,e);t!==-1&&("object"==typeof n&&"function"==typeof n.emit&&l.nextTick.runAfter(function(){var r=X(se,e);r!==-1&&(n.emit("rejectionHandled",ie[t],e),se.splice(r,1))}),ue.splice(t,1),ie.splice(t,1))}}function _(e){var n=h({when:function(n){return n&&O(this),n?n(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return A(n,e),n}function S(e){return h({when:function(){return e},get:function(n){return e[n]},set:function(n,t){e[n]=t},"delete":function(n){delete e[n]},post:function(n,t){return null===n||void 0===n?e.apply(void 0,t):e[n].apply(e,t)},apply:function(n,t){return e.apply(n,t)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function L(e){var n=p();return l.nextTick(function(){try{e.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function E(e){return h({isDef:function(){}},function(n,t){return C(e,n,t)},function(){return l(e).inspect()})}function R(e,n,t){return l(e).spread(n,t)}function q(e){return function(){function n(e,n){var u;if("undefined"==typeof StopIteration){try{u=t[e](n)}catch(s){return _(s)}return u.done?l(u.value):m(u.value,o,i)}try{u=t[e](n)}catch(s){return r(s)?l(s.value):_(s)}return m(u,o,i)}var t=e.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function $(e){l.done(l.async(e)())}function I(e){throw new K(e)}function T(e){return function(){return R([this,P(arguments)],function(n,t){return e.apply(n,t)})}}function C(e,n,t){
return l(e).dispatch(n,t)}function P(e){return m(e,function(e){var n=0,t=p();return H(e,function(r,o,i){var u;g(o)&&"fulfilled"===(u=o.inspect()).state?e[i]=u.value:(++n,m(o,function(r){e[i]=r,0===--n&&t.resolve(e)},t.reject,function(e){t.notify({index:i,value:e})}))},void 0),0===n&&t.resolve(e),t.promise})}function z(e){if(0===e.length)return l.resolve();var n=l.defer(),t=0;return H(e,function(r,o,i){function u(e){n.resolve(e)}function s(){t--,0===t&&n.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function a(e){n.notify({index:i,value:e})}var c=e[i];t++,m(c,u,s,a)},void 0),n.promise}function N(e){return m(e,function(e){return e=Z(e,l),m(P(Z(e,function(e){return m(e,Q,Q)})),function(){return e})})}function F(e){return l(e).allSettled()}function U(e,n){return l(e).then(void 0,void 0,n)}function M(e,n){return l(e).nodeify(n)}var D=!1;try{throw new Error}catch(B){D=!!B.stack}var V,K,J=c(),Q=function(){},W=function(){function e(){for(var e,n;r.next;)r=r.next,e=r.task,r.task=void 0,n=r.domain,n&&(r.domain=void 0,n.enter()),t(e,n);for(;a.length;)e=a.pop(),t(e);i=!1}function t(n,t){try{n()}catch(r){if(s)throw t&&t.exit(),setTimeout(e,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}var r={task:void 0,next:null},o=r,i=!1,u=void 0,s=!1,a=[];if(W=function(e){o=o.next={task:e,domain:s&&n.domain,next:null},i||(i=!0,u())},"object"==typeof n&&"[object process]"===n.toString()&&n.nextTick)s=!0,u=function(){n.nextTick(e)};else if("function"==typeof setImmediate)u="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var c=new MessageChannel;c.port1.onmessage=function(){u=f,c.port1.onmessage=e,e()};var f=function(){c.port2.postMessage(0)};u=function(){setTimeout(e,0),f()}}else u=function(){setTimeout(e,0)};return W.runAfter=function(e){a.push(e),i||(i=!0,u())},W}(),G=Function.call,Y=e(Array.prototype.slice),H=e(Array.prototype.reduce||function(e,n){var t=0,r=this.length;if(1===arguments.length)for(;;){if(t in this){n=this[t++];break}if(++t>=r)throw new TypeError}for(;t<r;t++)t in this&&(n=e(n,this[t],t));return n}),X=e(Array.prototype.indexOf||function(e){for(var n=0;n<this.length;n++)if(this[n]===e)return n;return-1}),Z=e(Array.prototype.map||function(e,n){var t=this,r=[];return H(t,function(o,i,u){r.push(e.call(n,i,u,t))},void 0),r}),ee=Object.create||function(e){function n(){}return n.prototype=e,new n},ne=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var n=[];for(var t in e)ne(e,t)&&n.push(t);return n},re=e(Object.prototype.toString);K="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var oe="From previous event:";l.resolve=l,l.nextTick=W,l.longStackSupport=!1,"object"==typeof n&&n&&n.env&&n.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=p,p.prototype.makeNodeResolver=function(){var e=this;return function(n,t){n?e.reject(n):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(t)}},l.Promise=d,l.promise=d,d.race=v,d.all=P,d.reject=_,d.resolve=l,l.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},l.join=function(e,n){return l(e).join(n)},h.prototype.join=function(e){return l([this,e]).spread(function(e,n){if(e===n)return e;throw new Error("Can't join: not the same: "+e+" "+n)})},l.race=v,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,n,t){function r(n){try{return"function"==typeof e?e(n):n}catch(t){return _(t)}}function i(e){if("function"==typeof n){o(e,s);try{return n(e)}catch(t){return _(t)}}return _(e)}function u(e){return"function"==typeof t?t(e):e}var s=this,a=p(),c=!1;return l.nextTick(function(){s.promiseDispatch(function(e){c||(c=!0,a.resolve(r(e)))},"when",[function(e){c||(c=!0,a.resolve(i(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var n,t=!1;try{n=u(e)}catch(r){if(t=!0,!l.onerror)throw r;l.onerror(r)}t||a.notify(n)}]),a.promise},l.tap=function(e,n){return l(e).tap(n)},h.prototype.tap=function(e){return e=l(e),this.then(function(n){return e.fcall(n).thenResolve(n)})},l.when=m,h.prototype.thenResolve=function(e){return this.then(function(){return e})},l.thenResolve=function(e,n){return l(e).thenResolve(n)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},l.thenReject=function(e,n){return l(e).thenReject(n)},l.nearer=y,l.isPromise=g,l.isPromiseAlike=b,l.isPending=x,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=j,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ie=[],ue=[],se=[],ae=!0;l.resetUnhandledRejections=k,l.getUnhandledReasons=function(){return ie.slice()},l.stopUnhandledRejectionTracking=function(){k(),ae=!1},k(),l.reject=_,l.fulfill=S,l.master=E,l.spread=R,h.prototype.spread=function(e,n){return this.all().then(function(n){return e.apply(void 0,n)},n)},l.async=q,l.spawn=$,l["return"]=I,l.promised=T,l.dispatch=C,h.prototype.dispatch=function(e,n){var t=this,r=p();return l.nextTick(function(){t.promiseDispatch(r.resolve,e,n)}),r.promise},l.get=function(e,n){return l(e).dispatch("get",[n])},h.prototype.get=function(e){return this.dispatch("get",[e])},l.set=function(e,n,t){return l(e).dispatch("set",[n,t])},h.prototype.set=function(e,n){return this.dispatch("set",[e,n])},l.del=l["delete"]=function(e,n){return l(e).dispatch("delete",[n])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},l.mapply=l.post=function(e,n,t){return l(e).dispatch("post",[n,t])},h.prototype.mapply=h.prototype.post=function(e,n){return this.dispatch("post",[e,n])},l.send=l.mcall=l.invoke=function(e,n){return l(e).dispatch("post",[n,Y(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},l.fapply=function(e,n){return l(e).dispatch("apply",[void 0,n])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,Y(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},l.fbind=function(e){var n=l(e),t=Y(arguments,1);return function(){return n.dispatch("apply",[this,t.concat(Y(arguments))])}},h.prototype.fbind=function(){var e=this,n=Y(arguments);return function(){return e.dispatch("apply",[this,n.concat(Y(arguments))])}},l.keys=function(e){return l(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=P,h.prototype.all=function(){return P(this)},l.any=z,h.prototype.any=function(){return z(this)},l.allResolved=f(N,"allResolved","allSettled"),h.prototype.allResolved=function(){return N(this)},l.allSettled=F,h.prototype.allSettled=function(){return this.then(function(e){return P(Z(e,function(e){function n(){return e.inspect()}return e=l(e),e.then(n,n)}))})},l.fail=l["catch"]=function(e,n){return l(e).then(void 0,n)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},l.progress=U,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},l.fin=l["finally"]=function(e,n){return l(e)["finally"](n)},h.prototype.fin=h.prototype["finally"]=function(e){return e=l(e),this.then(function(n){return e.fcall().then(function(){return n})},function(n){return e.fcall().then(function(){throw n})})},l.done=function(e,n,t,r){return l(e).done(n,t,r)},h.prototype.done=function(e,t,r){var i=function(e){l.nextTick(function(){if(o(e,u),!l.onerror)throw e;l.onerror(e)})},u=e||t||r?this.then(e,t,r):this;"object"==typeof n&&n&&n.domain&&(i=n.domain.bind(i)),u.then(void 0,i)},l.timeout=function(e,n,t){return l(e).timeout(n,t)},h.prototype.timeout=function(e,n){var t=p(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+e+" ms"),n.code="ETIMEDOUT"),t.reject(n)},e);return this.then(function(e){clearTimeout(r),t.resolve(e)},function(e){clearTimeout(r),t.reject(e)},t.notify),t.promise},l.delay=function(e,n){return void 0===n&&(n=e,e=void 0),l(e).delay(n)},h.prototype.delay=function(e){return this.then(function(n){var t=p();return setTimeout(function(){t.resolve(n)},e),t.promise})},l.nfapply=function(e,n){return l(e).nfapply(n)},h.prototype.nfapply=function(e){var n=p(),t=Y(e);return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},l.nfcall=function(e){var n=Y(arguments,1);return l(e).nfapply(n)},h.prototype.nfcall=function(){var e=Y(arguments),n=p();return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},l.nfbind=l.denodeify=function(e){var n=Y(arguments,1);return function(){var t=n.concat(Y(arguments)),r=p();return t.push(r.makeNodeResolver()),l(e).fapply(t).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),l.denodeify.apply(void 0,e)},l.nbind=function(e,n){var t=Y(arguments,2);return function(){function r(){return e.apply(n,arguments)}var o=t.concat(Y(arguments)),i=p();return o.push(i.makeNodeResolver()),l(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),l.nbind.apply(void 0,e)},l.nmapply=l.npost=function(e,n,t){return l(e).npost(n,t)},h.prototype.nmapply=h.prototype.npost=function(e,n){var t=Y(n||[]),r=p();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},l.nsend=l.nmcall=l.ninvoke=function(e,n){var t=Y(arguments,2),r=p();return t.push(r.makeNodeResolver()),l(e).dispatch("post",[n,t]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var n=Y(arguments,1),t=p();return n.push(t.makeNodeResolver()),this.dispatch("post",[e,n]).fail(t.reject),t.promise},l.nodeify=M,h.prototype.nodeify=function(e){return e?void this.then(function(n){l.nextTick(function(){e(null,n)})},function(n){l.nextTick(function(){e(n)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ce=c();return l})}).call(this,n("_process"))},{_process:19}],21:[function(e,n,t){arguments[4][1][0].apply(t,arguments)},{"./src/crossfilter":25,dup:1}],22:[function(e,n,t){n.exports={_args:[[{name:"crossfilter2",raw:"crossfilter2@^1.4.0-alpha.05",rawSpec:"^1.4.0-alpha.05",scope:null,spec:">=1.4.0-alpha.5 <2.0.0",type:"range"},"/Users/jayson/workspace/components/universe/node_modules/reductio"]],_from:"crossfilter2@>=1.4.0-alpha.5 <2.0.0",_id:"crossfilter2@1.4.0-alpha.6",_inCache:!0,_installable:!0,_location:"/reductio/crossfilter2",_nodeVersion:"5.10.1",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/crossfilter2-1.4.0-alpha.6.tgz_1463519571786_0.49269671249203384"},_npmUser:{email:"esjewett@gmail.com",name:"esjewett"},_npmVersion:"3.8.3",_phantomChildren:{},_requested:{name:"crossfilter2",raw:"crossfilter2@^1.4.0-alpha.05",rawSpec:"^1.4.0-alpha.05",scope:null,spec:">=1.4.0-alpha.5 <2.0.0",type:"range"},_requiredBy:["/reductio"],_resolved:"https://registry.npmjs.org/crossfilter2/-/crossfilter2-1.4.0-alpha.6.tgz",_shasum:"f0197c6fab2d6a583b51254bfc6357093f80521b",_shrinkwrap:null,_spec:"crossfilter2@^1.4.0-alpha.05",_where:"/Users/jayson/workspace/components/universe/node_modules/reductio",author:{name:"Mike Bostock",url:"http://bost.ocks.org/mike"},bugs:{url:"https://github.com/crossfilter/crossfilter/issues"},contributors:[{name:"Jason Davies",url:"http://www.jasondavies.com/"}],dependencies:{"lodash.result":"^4.4.0"},description:"Fast multidimensional filtering for coordinated views.",devDependencies:{browserify:"^13.0.0",d3:"3.5","package-json-versionify":"1.0.2","uglify-js":"2.4.0",vows:"0.7.0"},directories:{},dist:{shasum:"f0197c6fab2d6a583b51254bfc6357093f80521b",tarball:"https://registry.npmjs.org/crossfilter2/-/crossfilter2-1.4.0-alpha.6.tgz"},files:["src","index.js","crossfilter.js","crossfilter.min.js"],gitHead:"509a96798f5153a58d1b6cae5fb3e7893129ce7c",homepage:"http://crossfilter.github.com/crossfilter/",keywords:["analytics","visualization","crossfilter"],main:"./index.js",maintainers:[{email:"esjewett@gmail.com",name:"esjewett"},{email:"gordon@woodhull.com",name:"gordonwoodhull"},{email:"tannerlinsley@gmail.com",name:"tannerlinsley"}],name:"crossfilter2",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+ssh://git@github.com/crossfilter/crossfilter.git"},scripts:{benchmark:"node test/benchmark.js",build:"browserify index.js -t package-json-versionify --standalone crossfilter -o crossfilter.js && uglifyjs --compress --mangle --screw-ie8 crossfilter.js -o crossfilter.min.js",clean:"rm -f crossfilter.js crossfilter.min.js",test:"vows --verbose"},version:"1.4.0-alpha.6"}},{}],23:[function(e,n,t){arguments[4][3][0].apply(t,arguments)},{dup:3}],24:[function(e,n,t){arguments[4][4][0].apply(t,arguments)},{"./identity":29,dup:4}],25:[function(e,n,t){arguments[4][5][0].apply(t,arguments)},{"./../package.json":22,"./array":23,"./bisect":24,"./filter":26,"./heap":27,"./heapselect":28,"./identity":29,"./insertionsort":30,"./null":31,"./permute":32,"./quicksort":33,"./reduce":34,"./zero":35,dup:5,"lodash.result":18}],26:[function(e,n,t){arguments[4][6][0].apply(t,arguments)},{dup:6}],27:[function(e,n,t){arguments[4][7][0].apply(t,arguments)},{"./identity":29,dup:7}],28:[function(e,n,t){arguments[4][8][0].apply(t,arguments)},{"./heap":27,"./identity":29,dup:8}],29:[function(e,n,t){arguments[4][9][0].apply(t,arguments)},{dup:9}],30:[function(e,n,t){arguments[4][10][0].apply(t,arguments)},{"./identity":29,dup:10}],31:[function(e,n,t){arguments[4][11][0].apply(t,arguments)},{dup:11}],32:[function(e,n,t){arguments[4][12][0].apply(t,arguments)},{dup:12}],33:[function(e,n,t){arguments[4][13][0].apply(t,arguments)},{"./identity":29,"./insertionsort":30,dup:13}],34:[function(e,n,t){arguments[4][14][0].apply(t,arguments)},{dup:14}],35:[function(e,n,t){arguments[4][15][0].apply(t,arguments)},{dup:15}],36:[function(e,n,t){function r(e,n){function t(e){if("string"==typeof e){var n=e,t=function(e){return e[n]};return t}return e}function i(e){if("string"==typeof e){var n=e,t=function(e){return+e[n]};return t}return e}e.fromObject=function(t){return arguments.length?(_assign(n,t),e):n},e.toObject=function(){return n},e.count=function(t,r){return arguments.length?(r||(r="count"),n.count=r,e):n.count},e.sum=function(t){return arguments.length?(t=i(t),n.sum=t,e):n.sum},e.avg=function(t){return arguments.length?(t=i(t),"function"==typeof t?(n.sum&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),n.sum=t,n.avg=!0,n.count="count"):n.avg=t,e):n.avg},e.exception=function(r){return arguments.length?(r=t(r),n.exceptionAccessor=r,e):n.exceptionAccessor},e.filter=function(t){return arguments.length?(n.filter=t,e):n.filter},e.valueList=function(r){return arguments.length?(r=t(r),n.valueList=r,e):n.valueList},e.median=function(t){return arguments.length?(t=i(t),"function"==typeof t&&(n.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),n.valueList=t),n.median=t,e):n.median},e.min=function(t){return arguments.length?(t=i(t),"function"==typeof t&&(n.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),n.valueList=t),n.min=t,e):n.min},e.max=function(t){return arguments.length?(t=i(t),"function"==typeof t&&(n.valueList&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),n.valueList=t),n.max=t,e):n.max},e.exceptionCount=function(r){return arguments.length?(r=t(r),"function"==typeof r?(n.sum&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),n.exceptionAccessor=r,n.exceptionCount=!0):n.exceptionCount=r,e):n.exceptionCount},e.exceptionSum=function(t){return arguments.length?(t=i(t),n.exceptionSum=t,e):n.exceptionSum},e.histogramValue=function(t){return arguments.length?(t=i(t),n.histogramValue=t,e):n.histogramValue},e.histogramBins=function(t){return arguments.length?(n.histogramThresholds=t,e):n.histogramThresholds},e.std=function(t){return arguments.length?(t=i(t),"function"==typeof t?(n.sumOfSquares=t,n.sum=t,n.count="count",n.std=!0):n.std=t,e):n.std},e.sumOfSq=function(t){return arguments.length?(t=i(t),n.sumOfSquares=t,e):n.sumOfSquares},e.value=function(e,t){return arguments.length&&"string"==typeof e?(n.values||(n.values={}),n.values[e]={},n.values[e].parameters=o(),r(n.values[e],n.values[e].parameters),t&&(n.values[e].accessor=t),n.values[e]):void console.error("'value' requires a string argument.")},e.nest=function(r){return arguments.length?(r.map(t),n.nestKeys=r,e):n.nestKeys},e.alias=function(t){return arguments.length?(n.aliasKeys=t,e):n.aliasKeys},e.aliasProp=function(t){return arguments.length?(n.aliasPropKeys=t,e):n.aliasPropKeys},e.groupAll=function(t){return arguments.length?(n.groupAll=t,e):n.groupAll},e.dataList=function(t){return arguments.length?(n.dataList=t,e):n.dataList},e.custom=function(t){return arguments.length?(n.custom=t,e):n.custom}}var o=e("./parameters.js");_assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;++t){var r=arguments[t];if(null!=r)for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])}return n};var i={build:r};n.exports=i},{"./parameters.js":53}],37:[function(e,n,t){var r={initial:function(e,n,t){return function(r){function o(e){return function(){return t[e](n(r))}}e&&(r=e(r));for(var i in t)n(r)[i]=o(i);return r}}};n.exports=r},{}],38:[function(e,n,t){var r={add:function(e,n,t){return function(r,o,i){n&&n(r,o,i);for(var u in e)t(r)[u]=e[u](t(r),o);return r}}};n.exports=r},{}],39:[function(e,n,t){var r={add:function(e,n,t){return function(e,r,o){return n&&n(e,r,o),t(e).count>0?t(e).avg=t(e).sum/t(e).count:t(e).avg=0,e}},remove:function(e,n,t){return function(e,r,o){return n&&n(e,r,o),t(e).count>0?t(e).avg=t(e).sum/t(e).count:t(e).avg=0,e}},initial:function(e,n){return function(t){return t=e(t),n(t).avg=0,t}}};n.exports=r},{}],40:[function(e,n,t){function r(e,n,t){t||(t=function(e){return e});var k={reduceAdd:n.reduceAdd,reduceRemove:n.reduceRemove,reduceInitial:n.reduceInitial};(e.count||e.std)&&(n.reduceAdd=i.add(n.reduceAdd,t,e.count),n.reduceRemove=i.remove(n.reduceRemove,t,e.count),n.reduceInitial=i.initial(n.reduceInitial,t,e.count)),e.sum&&(n.reduceAdd=u.add(e.sum,n.reduceAdd,t),n.reduceRemove=u.remove(e.sum,n.reduceRemove,t),n.reduceInitial=u.initial(n.reduceInitial,t)),e.avg&&(e.count&&e.sum?(n.reduceAdd=s.add(e.sum,n.reduceAdd,t),n.reduceRemove=s.remove(e.sum,n.reduceRemove,t),n.reduceInitial=s.initial(n.reduceInitial,t)):console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true).")),e.exceptionCount&&(e.exceptionAccessor?(n.reduceAdd=d.add(e.exceptionAccessor,n.reduceAdd,t),n.reduceRemove=d.remove(e.exceptionAccessor,n.reduceRemove,t),n.reduceInitial=d.initial(n.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),e.exceptionSum&&(e.exceptionAccessor?(n.reduceAdd=v.add(e.exceptionAccessor,e.exceptionSum,n.reduceAdd,t),n.reduceRemove=v.remove(e.exceptionAccessor,e.exceptionSum,n.reduceRemove,t),n.reduceInitial=v.initial(n.reduceInitial,t)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(e.valueList||e.median||e.min||e.max)&&(n.reduceAdd=p.add(e.valueList,n.reduceAdd,t),n.reduceRemove=p.remove(e.valueList,n.reduceRemove,t),n.reduceInitial=p.initial(n.reduceInitial,t)),e.dataList&&(n.reduceAdd=j.add(e.dataList,n.reduceAdd,t),n.reduceRemove=j.remove(e.dataList,n.reduceRemove,t),n.reduceInitial=j.initial(n.reduceInitial,t)),e.median&&(n.reduceAdd=a.add(n.reduceAdd,t),n.reduceRemove=a.remove(n.reduceRemove,t),n.reduceInitial=a.initial(n.reduceInitial,t)),e.min&&(n.reduceAdd=c.add(n.reduceAdd,t),n.reduceRemove=c.remove(n.reduceRemove,t),n.reduceInitial=c.initial(n.reduceInitial,t)),e.max&&(n.reduceAdd=f.add(n.reduceAdd,t),n.reduceRemove=f.remove(n.reduceRemove,t),n.reduceInitial=f.initial(n.reduceInitial,t)),e.exceptionAccessor&&(n.reduceAdd=l.add(e.exceptionAccessor,n.reduceAdd,t),n.reduceRemove=l.remove(e.exceptionAccessor,n.reduceRemove,t),n.reduceInitial=l.initial(n.reduceInitial,t)),e.histogramValue&&e.histogramThresholds&&(n.reduceAdd=h.add(e.histogramValue,n.reduceAdd,t),n.reduceRemove=h.remove(e.histogramValue,n.reduceRemove,t),n.reduceInitial=h.initial(e.histogramThresholds,n.reduceInitial,t)),e.sumOfSquares&&(n.reduceAdd=m.add(e.sumOfSquares,n.reduceAdd,t),n.reduceRemove=m.remove(e.sumOfSquares,n.reduceRemove,t),n.reduceInitial=m.initial(n.reduceInitial,t)),e.std&&(e.sumOfSquares&&e.sum?(n.reduceAdd=y.add(n.reduceAdd,t),n.reduceRemove=y.remove(n.reduceRemove,t),n.reduceInitial=y.initial(n.reduceInitial,t)):console.error("You must set .sumOfSq(accessor) and define a .sum(accessor) to use .std(true). Or use .std(accessor).")),e.custom&&(n.reduceAdd=w.add(n.reduceAdd,t,e.custom.add),n.reduceRemove=w.remove(n.reduceRemove,t,e.custom.remove),n.reduceInitial=w.initial(n.reduceInitial,t,e.custom.initial)),e.nestKeys&&(n.reduceAdd=g.add(e.nestKeys,n.reduceAdd,t),n.reduceRemove=g.remove(e.nestKeys,n.reduceRemove,t),n.reduceInitial=g.initial(n.reduceInitial,t)),e.aliasKeys&&(n.reduceInitial=b.initial(n.reduceInitial,t,e.aliasKeys)),e.aliasPropKeys&&(n.reduceAdd=x.add(e.aliasPropKeys,n.reduceAdd,t),n.reduceRemove=x.add(e.aliasPropKeys,n.reduceRemove,t)),e.filter&&(n.reduceAdd=o.add(e.filter,n.reduceAdd,k.reduceAdd,t),n.reduceRemove=o.remove(e.filter,n.reduceRemove,k.reduceRemove,t)),e.values&&Object.getOwnPropertyNames(e.values).forEach(function(o){var i=function(e){return function(n){return n=e(n),t(n)[o]={},n}};n.reduceInitial=i(n.reduceInitial),r(e.values[o].parameters,n,function(e){return e[o]})})}var o=e("./filter.js"),i=e("./count.js"),u=e("./sum.js"),s=e("./avg.js"),a=e("./median.js"),c=e("./min.js"),f=e("./max.js"),l=e("./value-count.js"),p=e("./value-list.js"),d=e("./exception-count.js"),v=e("./exception-sum.js"),h=e("./histogram.js"),m=e("./sum-of-squares.js"),y=e("./std.js"),g=e("./nest.js"),b=e("./alias.js"),x=e("./aliasProp.js"),j=e("./data-list.js"),w=e("./custom.js"),k={build:r};n.exports=k},{"./alias.js":37,"./aliasProp.js":38,"./avg.js":39,"./count.js":42,"./custom.js":43,"./data-list.js":44,"./exception-count.js":45,"./exception-sum.js":46,"./filter.js":47,"./histogram.js":48,"./max.js":49,"./median.js":50,"./min.js":51,"./nest.js":52,"./std.js":58,"./sum-of-squares.js":59,"./sum.js":60,"./value-count.js":61,"./value-list.js":62}],41:[function(e,n,t){var r=function(e){return function(n){return n[e]}};_grouper=function(e,n){return e||(e=function(e){return e}),function(t,r){n&&n(t,r);var o=e(t),i=e(r);return"undefined"!=typeof i.count&&(o.count+=i.count),"undefined"!=typeof i.sum&&(o.sum+=i.sum),"undefined"!=typeof i.avg&&(o.avg=o.sum/o.count),t}},reductio_cap=function(e,n,t){var o=(n.reduceInitial(),t.values?Object.keys(t.values):[]),i=_grouper();if(o.length)for(var u=0;u<o.length;++u)i=_grouper(r(o[u]),i);return function(t,r){if(!arguments.length)return e();if(t===1/0||!t)return e();var o=e(),u=t-1;if(o.length<=t)return o;var s=o.slice(0,u),a={key:r||"Others"};a.value=n.reduceInitial();for(var c=u;c<o.length;++c)i(a.value,o[c].value);return s.push(a),s}},n.exports=reductio_cap},{}],42:[function(e,n,t){var r={add:function(e,n,t){return function(r,o,i){return e&&e(r,o,i),n(r)[t]++,r}},remove:function(e,n,t){return function(r,o,i){return e&&e(r,o,i),n(r)[t]--,r}},initial:function(e,n,t){return function(r){return e&&(r=e(r)),n(r)[t]=0,r}}};n.exports=r},{}],43:[function(e,n,t){var r={add:function(e,n,t){return function(n,r,o){return e&&e(n,r,o),t(n,r)}},remove:function(e,n,t){return function(n,r,o){return e&&e(n,r,o),t(n,r)}},initial:function(e,n,t){return function(n){return e&&(n=e(n)),t(n)}}};n.exports=r},{}],44:[function(e,n,t){var r={add:function(e,n,t){return function(e,r,o){return n&&n(e,r,o),t(e).dataList.push(r),e}},remove:function(e,n,t){return function(e,r,o){return n&&n(e,r,o),t(e).dataList.splice(t(e).dataList.indexOf(r),1),e}},initial:function(e,n){return function(t){return e&&(t=e(t)),n(t).dataList=[],t}}};n.exports=r},{}],45:[function(e,n,t){var r={add:function(e,n,t){var r,o;return function(i,u,s){return n&&n(i,u,s),r=t(i).bisect(t(i).values,e(u),0,t(i).values.length),o=t(i).values[r],o&&o[0]===e(u)&&0!==o[1]||t(i).exceptionCount++,i}},remove:function(e,n,t){var r,o;return function(i,u,s){return n&&n(i,u,s),r=t(i).bisect(t(i).values,e(u),0,t(i).values.length),o=t(i).values[r],o&&o[0]===e(u)&&1===o[1]&&t(i).exceptionCount--,i}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionCount=0,t}}};n.exports=r},{}],46:[function(e,n,t){var r={add:function(e,n,t,r){var o,i;return function(u,s,a){return t&&t(u,s,a),o=r(u).bisect(r(u).values,e(s),0,r(u).values.length),i=r(u).values[o],i&&i[0]===e(s)&&0!==i[1]||(r(u).exceptionSum=r(u).exceptionSum+n(s)),u}},remove:function(e,n,t,r){var o,i;return function(u,s,a){return t&&t(u,s,a),o=r(u).bisect(r(u).values,e(s),0,r(u).values.length),i=r(u).values[o],i&&i[0]===e(s)&&1===i[1]&&(r(u).exceptionSum=r(u).exceptionSum-n(s)),u}},initial:function(e,n){return function(t){return t=e(t),n(t).exceptionSum=0,t}}};n.exports=r},{}],47:[function(e,n,t){var r={add:function(e,n,t){return function(r,o,i){return e(o,i)?n&&n(r,o,i):t&&t(r,o,i),r}},remove:function(e,n,t){return function(r,o,i){return e(o,i)?n&&n(r,o,i):t&&t(r,o,i),r}}};n.exports=r},{}],48:[function(e,n,t){var r=e("crossfilter2"),o={add:function(e,n,t){var o,i=r.bisect.by(function(e){return e}).left,u=r.bisect.by(function(e){return e.x}).right;return function(r,s,a){return n&&n(r,s,a),o=t(r).histogram[u(t(r).histogram,e(s),0,t(r).histogram.length)-1],o.y++,o.splice(i(o,e(s),0,o.length),0,e(s)),r}},remove:function(e,n,t){var o,i=r.bisect.by(function(e){return e}).left,u=r.bisect.by(function(e){return e.x}).right;return function(r,s,a){return n&&n(r,s,a),o=t(r).histogram[u(t(r).histogram,e(s),0,t(r).histogram.length)-1],o.y--,o.splice(i(o,e(s),0,o.length),1),r}},initial:function(e,n,t){return function(r){r=n(r),t(r).histogram=[];for(var o=[],i=1;i<e.length;i++)o=[],o.x=e[i-1],o.dx=e[i]-e[i-1],o.y=0,t(r).histogram.push(o);return r}}};n.exports=o},{crossfilter2:21}],49:[function(e,n,t){var r={add:function(e,n){return function(t,r,o){return e&&e(t,r,o),n(t).max=n(t).valueList[n(t).valueList.length-1],t}},remove:function(e,n){return function(t,r,o){return e&&e(t,r,o),0===n(t).valueList.length?(n(t).max=void 0,t):(n(t).max=n(t).valueList[n(t).valueList.length-1],t)}},initial:function(e,n){return function(t){return t=e(t),n(t).max=void 0,t}}};n.exports=r},{}],50:[function(e,n,t){var r={add:function(e,n){var t;return function(r,o,i){return e&&e(r,o,i),t=Math.floor(n(r).valueList.length/2),n(r).valueList.length%2?n(r).median=n(r).valueList[t]:n(r).median=(n(r).valueList[t-1]+n(r).valueList[t])/2,r}},remove:function(e,n){var t;return function(r,o,i){return e&&e(r,o,i),t=Math.floor(n(r).valueList.length/2),0===n(r).valueList.length?(n(r).median=void 0,r):(1===n(r).valueList.length||n(r).valueList.length%2?n(r).median=n(r).valueList[t]:n(r).median=(n(r).valueList[t-1]+n(r).valueList[t])/2,r)}},initial:function(e,n){return function(t){return t=e(t),n(t).median=void 0,t}}};n.exports=r},{}],51:[function(e,n,t){var r={add:function(e,n){return function(t,r,o){return e&&e(t,r,o),n(t).min=n(t).valueList[0],t}},remove:function(e,n){return function(t,r,o){return e&&e(t,r,o),0===n(t).valueList.length?(n(t).min=void 0,t):(n(t).min=n(t).valueList[0],t)}},initial:function(e,n){return function(t){return t=e(t),n(t).min=void 0,t}}};n.exports=r},{}],52:[function(e,n,t){var r=(e("crossfilter2"),{add:function(e,n,t){var r,o;return function(i,u,s){return n&&n(i,u,s),r=t(i).nest,e.forEach(function(e){o=r.filter(function(n){return n.key===e(u)})[0],o?r=o.values:(o=[],r.push({key:e(u),values:o}),r=o)}),r.push(u),i}},remove:function(e,n,t){var r;return function(o,i,u){return n&&n(o,i,u),r=t(o).nest,e.forEach(function(e){r=r.filter(function(n){return n.key===e(i)})[0].values}),r.splice(r.indexOf(i),1),o}},initial:function(e,n){return function(t){return t=e(t),n(t).nest=[],t}}});n.exports=r},{crossfilter2:21}],53:[function(e,n,t){var r=function(){return{order:!1,avg:!1,count:!1,sum:!1,exceptionAccessor:!1,exceptionCount:!1,exceptionSum:!1,filter:!1,valueList:!1,median:!1,histogramValue:!1,min:!1,max:!1,histogramThresholds:!1,std:!1,sumOfSquares:!1,values:!1,nestKeys:!1,aliasKeys:!1,aliasPropKeys:!1,groupAll:!1,dataList:!1,custom:!1}};n.exports=r},{}],54:[function(e,n,t){function r(e){return function(n,t,r){n.post=function(){var o=function(){return o.all()};o.all=function(){return n.all()};var i=e.postprocessors;return Object.keys(i).forEach(function(e){o[e]=function(){var n=o.all,u=[].slice.call(arguments);return o.all=function(){return i[e](n,r,t).apply(null,u)},o}}),o}}}n.exports=r},{}],55:[function(e,n,t){n.exports=function(n){n.postprocessors={},n.registerPostProcessor=function(e,t){n.postprocessors[e]=t},n.registerPostProcessor("cap",e("./cap")),n.registerPostProcessor("sortBy",e("./sortBy"))}},{"./cap":41,"./sortBy":57}],56:[function(e,n,t){function r(){function e(e){if(t={reduceAdd:function(e){return e},reduceRemove:function(e){return e},reduceInitial:function(){return{}}},o.build(n,t),n.groupAll)if(e.top)console.warn("'groupAll' is defined but attempting to run on a standard dimension.group(). Must run on dimension.groupAll().");else{var r,i,u,c,f,l=a.bisect.by(function(e){return e.key}).left;e.reduce(function(e,o,s){for(u=n.groupAll(o),c=u.length,i=0;i<c;i++)f=u[i],r=l(e,f,0,e.length),e[r]&&e[r].key===f||e.splice(r,0,{key:f,value:t.reduceInitial()}),t.reduceAdd(e[r].value,o,s);return e},function(e,o,s){for(u=n.groupAll(o),c=u.length,i=0;i<c;i++)r=l(e,u[i],0,e.length),t.reduceRemove(e[r].value,o,s);return e},function(){return[]}),e.all||(e.all=function(){return this.value()})}else e.reduce(t.reduceAdd,t.reduceRemove,t.reduceInitial);return s(e,n,t),e}var n=u(),t={};return i.build(e,n),e}var o=e("./build.js"),i=e("./accessors.js"),u=e("./parameters.js"),s=e("./postprocess"),a=e("crossfilter2");e("./postprocessors")(r),s=s(r),n.exports=r},{"./accessors.js":36,"./build.js":40,"./parameters.js":53,"./postprocess":54,"./postprocessors":55,crossfilter2:21}],57:[function(e,n,t){function r(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}var o=function(e){if("function"==typeof e)return e;if(~e.indexOf(".")){var n=e.split(".");return function(e){return n.reduce(function(e,n){return e[n]},e)}}return function(n){return n[e]}},i=function(e,n){return function(t,r){return n(e(t),e(r))}};({}).toString;n.exports=function(e){return function(n,t){return 1===arguments.length&&(t=r),e().sort(i(o(n),t))}}},{}],58:[function(e,n,t){var r={add:function(e,n){return function(t,r,o){if(e&&e(t,r,o),n(t).count>0){n(t).std=0;var i=n(t).sumOfSq-n(t).sum*n(t).sum/n(t).count;i>0&&(n(t).std=Math.sqrt(i/(n(t).count-1)))}else n(t).std=0;return t}},remove:function(e,n){return function(t,r,o){if(e&&e(t,r,o),n(t).count>0){n(t).std=0;var i=n(t).sumOfSq-n(t).sum*n(t).sum/n(t).count;i>0&&(n(t).std=Math.sqrt(i/(n(t).count-1)))}else n(t).std=0;return t}},initial:function(e,n){return function(t){return t=e(t),n(t).std=0,t}}};n.exports=r},{}],59:[function(e,n,t){var r={add:function(e,n,t){return function(r,o,i){return n&&n(r,o,i),t(r).sumOfSq=t(r).sumOfSq+e(o)*e(o),r}},remove:function(e,n,t){return function(r,o,i){return n&&n(r,o,i),t(r).sumOfSq=t(r).sumOfSq-e(o)*e(o),r}},initial:function(e,n){return function(t){return t=e(t),n(t).sumOfSq=0,t}}};n.exports=r},{}],60:[function(e,n,t){var r={add:function(e,n,t){return function(r,o,i){return n&&n(r,o,i),t(r).sum=t(r).sum+e(o),r}},remove:function(e,n,t){return function(r,o,i){return n&&n(r,o,i),t(r).sum=t(r).sum-e(o),r}},initial:function(e,n){return function(t){return t=e(t),n(t).sum=0,t}}};n.exports=r},{}],61:[function(e,n,t){
var r=e("crossfilter2"),o={add:function(e,n,t){var r,o;return function(i,u,s){return n&&n(i,u,s),r=t(i).bisect(t(i).values,e(u),0,t(i).values.length),o=t(i).values[r],o&&o[0]===e(u)?o[1]++:t(i).values.splice(r,0,[e(u),1]),i}},remove:function(e,n,t){var r;return function(o,i,u){return n&&n(o,i,u),r=t(o).bisect(t(o).values,e(i),0,t(o).values.length),t(o).values[r][1]--,o}},initial:function(e,n){return function(t){return t=e(t),n(t).values=[],n(t).bisect=r.bisect.by(function(e){return e[0]}).left,t}}};n.exports=o},{crossfilter2:21}],62:[function(e,n,t){var r=e("crossfilter2"),o={add:function(e,n,t){var o,i=r.bisect.by(function(e){return e}).left;return function(r,u,s){return n&&n(r,u,s),o=i(t(r).valueList,e(u),0,t(r).valueList.length),t(r).valueList.splice(o,0,e(u)),r}},remove:function(e,n,t){var o,i=r.bisect.by(function(e){return e}).left;return function(r,u,s){return n&&n(r,u,s),o=i(t(r).valueList,e(u),0,t(r).valueList.length),t(r).valueList.splice(o,1),r}},initial:function(e,n){return function(t){return t=e(t),n(t).valueList=[],t}}};n.exports=o},{crossfilter2:21}],63:[function(e,n,t){"use strict";function r(e){function n(){var n=o(e);return function(e){return n(e)}}if("string"==typeof e){if(!u(e))return e;e=a(e)}return"number"==typeof e?e:x.isObject(e)?n():void 0}function o(e){if(e=x.isObject(e)?i(e):e,x.isString(e))return u(e)?o(a(e)):function(n){return n[e]};if(x.isArray(e)){var n=x.map(e,o);return function(e){return n.map(function(n){return n(e)})}}if(e.key){if(j[e.key]){var t=o(e.value);return function(n){return j[e.key](t(n))}}console.error("Could not find aggregration method",e)}return[]}function i(e){var n,t=[];for(var r in e)if({}.hasOwnProperty.call(e,r)){n={key:r,value:e[r]};var o={};o[r]=e[r],t.push(o)}return t.length>1?t:n}function u(e){return["$","("].indexOf(e.charAt(0))>-1}function s(e){var n=[],t=e.indexOf("("),r=e.indexOf(")"),o=t>-1?e.substring(0,t):e;return!!j[o]&&(t>-1&&r>-1&&r>t&&(n=e.substring(t+1,r).split(",")),{aggregator:j[o],params:n})}function a(e){function n(e){return e=e.replace(" ",""),'"'+e.replace(t,function(e,t){if(r.test(t))return"$"===t.charAt(0)?'":{"'+t.replace(r,function(e){return","===e?',"':n(e).trim()})+"}":':["'+t.replace(r,function(){return'","'})+'"]'})}var t=/\((.+)\)/g,r=/(?:\([^\(\)]*\))|(,)/g;return JSON.parse("{"+n(e)+"}")}function c(e){return e.reduce(function(e,n){return e+n},0)}function f(e){return e.reduce(function(e,n){return e+n},0)/e.length}function l(e){return Math.max.apply(null,e)}function p(e){return Math.min.apply(null,e)}function d(e){return e.length}function v(e){return e[0]}function h(e){return e[e.length-1]}function m(e,n){return e[n]}function y(e,n){return e[e.length-n]}function g(e,n){return e[Math.round(e.length*(n/100))]}function b(e,n){return e.map(function(e){return e[n]})}var x=e("./lodash"),j={$sum:c,$avg:f,$max:l,$min:p,$count:d,$first:v,$last:h,$get:m,$nth:m,$nthLast:y,$nthPct:g,$map:b};n.exports={makeValueAccessor:r,aggregators:j,extractKeyValOrArray:i,parseAggregatorParams:s}},{"./lodash":71}],64:[function(e,n,t){"use strict";var r=e("q"),o=e("./lodash");n.exports=function(e){return function(n){function t(n){var t=[];n.removeListeners&&(t=o.map(n.removeListeners,function(e){return r.resolve(e())}));var i=n.complex?JSON.stringify(n.key):n.key;return delete e.filters[i],n.dimension&&t.push(r.resolve(n.dimension.dispose())),r.all(t)}return n&&(n=o.isArray(n)?n:[n]),n?r.all(o.map(n,function(n){o.isObject(n)&&(n=n.key);var r=o.remove(e.columns,function(e){return o.isArray(n)?!o.xor(e.key,n).length:e.key===n?!e.dynamicReference:void 0})[0];r&&t(r)})).then(function(){return e}):r.all(o.map(e.columns,t)).then(function(){return e.columns=[],e})}}},{"./lodash":71,q:20}],65:[function(e,n,t){"use strict";var r=e("q"),o=e("./lodash");n.exports=function(n){function t(e){return o.isUndefined(e)&&(e=!0),o.isArray(e)||(e=[e]),r.all(o.map(e,s)).then(function(){return n})}function i(e){return o.find(n.columns,function(n){return o.isArray(e)?!o.xor(n.key,e).length:n.key===e})}function u(e){return o.isNumber(e)?"number":o.isBoolean(e)?"bool":o.isArray(e)?"array":o.isObject(e)?"object":"string"}function s(e){var t=o.isObject(e)?e:{key:e},s=i(t.key);return s?(s.temporary=!1,s.dynamicReference&&(s.dynamicReference=!1),s.promise.then(function(){return n})):(t.queries=[],n.columns.push(t),t.promise=r["try"](function(){return r.resolve(n.cf.all())}).then(function(e){var n;if(o.isArray(t.key)){if(t.complex=!0,n=o.values(o.pick(e[0],t.key)),n.length!==t.key.length)throw new Error("Column key does not exist in data!",t.key)}else n=e[0][t.key];if(!t.complex&&t.key!==!0&&"undefined"==typeof n)throw new Error("Column key does not exist in data!",t.key);return t.type=t.key===!0?"all":t.complex?"complex":t.array?"array":u(n),a.make(t.key,t.type)}).then(function(e){function i(e){if(t.key===!0)return r.resolve();var n=a.makeAccessor(t.key);return t.values=t.values||[],r["try"](function(){return e&&e.added?r.resolve(e.added):r.resolve(t.dimension.bottom(1/0))}).then(function(e){var r;r="complex"===t.type?o.flatten(o.map(e,n)):"array"===t.type?o.flatten(o.map(e,n)):o.map(e,n),t.values=o.uniq(t.values.concat(r))})}t.dimension=e,t.filterCount=0;var u=n.onDataChange(i);return t.removeListeners=[u],i()}),t.promise.then(function(){return n}))}var a=e("./dimension")(n),c=t;return c.find=i,c}},{"./dimension":68,"./lodash":71,q:20}],66:[function(e,n,t){"use strict";var r=e("q"),o=e("crossfilter2"),i=e("./lodash");n.exports=function(e){function n(e){return i.isArray(e)?r.resolve(o(e)):e&&"function"==typeof e.dimension?r.resolve(e):r.reject(new Error("No Crossfilter data or instance found!"))}function t(n){return e.options.generatedColumns?i.map(n,function(n){return i.forEach(e.options.generatedColumns,function(e,t){n[t]=e(n)}),n}):n}function u(n){return n=t(n),r["try"](function(){return r.resolve(e.cf.add(n))}).then(function(){return r.serial(i.map(e.dataListeners,function(e){return function(){return e({added:n})}}))}).then(function(){return e})}function s(){return r["try"](function(){return r.resolve(e.cf.remove())}).then(function(){return e})}return{build:n,generateColumns:t,add:u,remove:s}}},{"./lodash":71,crossfilter2:1,q:20}],67:[function(e,n,t){"use strict";var r=e("q");n.exports=function(e){return function(){return e.clear().then(function(){return e.cf.dataListeners=[],e.cf.filterListeners=[],r.resolve(e.cf.remove())}).then(function(){return e})}}},{q:20}],68:[function(e,n,t){"use strict";var r=e("q"),o=e("./lodash");n.exports=function(e){function n(n,o){var i=t(n);return r.resolve(e.cf.dimension(i,"array"===o))}function t(e){var n;if(o.isArray(e)){var t=o.map(e,function(e){return"d['"+e+"']"});n=new Function("d",String("return "+JSON.stringify(t).replace(/"/g,"")))}else n=e===!0?function(e,n){return n}:function(n){return n[e]};return n}return{make:n,makeAccessor:t}}},{"./lodash":71,q:20}],69:[function(e,n,t){"use strict";function r(e,n){return e[n]}function o(e,n){n=n(e);for(var t=0;t<n.length;t++)if(!n[t])return!1;return!0}function i(e,n){n=n(e);for(var t=0;t<n.length;t++)if(n[t])return!0;return!1}function u(e,n){n=n(e);for(var t=0;t<n.length;t++)if(n[t])return!1;return!0}function s(e,n){return e===n()}function a(e,n){return e>n()}function c(e,n){return e>=n()}function f(e,n){return e<n()}function l(e,n){return e<=n()}function p(e,n){return e!==n()}function d(e,n){return typeof e===n()}function v(e,n){return e.indexOf(n())>-1}function h(e,n){return e.indexOf(n())===-1}function m(e,n){return n().indexOf(e)>-1}function y(e,n){return n().indexOf(e)===-1}function g(e,n){return e.length===n()}n.exports={$field:r,$and:o,$or:i,$not:u,$eq:s,$gt:a,$gte:c,$lt:f,$lte:l,$ne:p,$type:d,$in:v,$nin:h,$contains:m,$excludes:y,$size:g}},{}],70:[function(e,n,t){"use strict";var r=e("q"),o=e("./lodash"),i=e("./expressions"),u=e("./aggregation");n.exports=function(e){function n(n,t,i,u){var c=e.column.find(n);return r["try"](function(){return c?c:e.column({key:n,temporary:!0}).then(function(){return e.column.find(n)})}).then(function(n){var r=o.clone(e.filters,!0),c=n.complex?JSON.stringify(n.key):n.key;return r[c]=s(t,i,u),a(r)})}function t(){return e.columns.forEach(function(e){e.dimension.filterAll()}),a({})}function s(e,n,t){return!o.isUndefined(e)&&(o.isFunction(e)?{value:e,"function":e,replace:!0,type:"function"}:o.isObject(e)?{value:e,"function":p(e),replace:!0,type:"function"}:o.isArray(e)?{value:e,replace:n||t,type:n?"range":"inclusive"}:{value:e,replace:t,type:"exact"})}function a(n){var t=o.map(n,function(t,i){var u=e.filters[i];if(t.replace&&u&&o.isEqual(t,u))return r.resolve();var s;return s="["===i.charAt(0)?e.column.find(JSON.parse(i)):e.column.find(i),t&&u&&!t.replace&&(n[i]=t=c(t,u)),t?"exact"===t.type?r.resolve(s.dimension.filterExact(t.value)):"range"===t.type?r.resolve(s.dimension.filterRange(t.value)):"inclusive"===t.type?r.resolve(s.dimension.filterFunction(function(e){return t.value.indexOf(e)>-1})):"function"===t.type?r.resolve(s.dimension.filterFunction(t["function"])):r.resolve(s.dimension.filterAll()):r.resolve(s.dimension.filterAll())});return r.all(t).then(function(){e.filters=n;var t=[];return o.forEach(e.filters,function(n,r){n||(t.push({key:r,val:n}),delete e.filters[r])}),r.all(o.map(t,function(n){var t=e.column.find("["===n.key.charAt(0)?JSON.parse(n.key):n.key);if(t.temporary&&!t.dynamicReference)return e.clear(t.key)}))}).then(function(){return r.all(o.map(e.filterListeners,function(e){return e()}))}).then(function(){return e})}function c(e,n){if("exact"===e.type&&"inclusive"===n.type)e.value=o.xor([e.value],n.value);else if("inclusive"===e.type&&"exact"===n.type)e.value=o.xor(e.value,[n.value]);else if("inclusive"===e.type&&"inclusive"===n.type)e.value=o.xor(e.value,n.value);else if("exact"===e.type&&"exact"===n.type){if(e.value===n.value)return!1;e.value=[e.value,n.value]}return e.value.length?1===e.value.length?(e.type="exact",e.value=e.value[0]):e.type="inclusive":e=!1,e}function f(e){function n(e){o.forEach(e,function(e,r){var i=l(e,r);i&&t.push(i),o.isString(e)&&(i=l(null,e),i&&t.push(i)),o.isObject(e)&&n(e)})}var t=[];return n(e.filter),t}function l(e,n){return"$data"===n||(n&&"$column"===n?o.isString(e)?e:(console.warn('The value for filter "$column" must be a valid column key',e),!1):void 0)}function p(n,t){var r;if(o.isString(n)){var s=l(null,n);if(s){var a=e.cf.all();return function(){return a}}}return o.isString(n)||o.isNumber(n)||o.isBoolean(n)?function(e){return"undefined"==typeof e?n:i.$eq(e,function(){return n})}:o.isArray(n)?(r=o.map(n,function(e){return p(e,t)}),function(e){return r.map(function(n){return n(e)})}):o.isObject(n)?(r=o.map(n,function(n,r){var o=p(n,t),s=l(n,r);if(s){var a=e.column.find(s),c=a.values;return function(){return c}}if(i[r])return function(e){return i[r](e,o)};var f=u.parseAggregatorParams(r);return f?(t=!0,o=p(n,t),function(){return f.aggregator.apply(null,[o()].concat(f.params))}):function(e){return e=e[r],o(e,o)}}),t?1===r.length?function(e){return r[0](e)}:function(e){return o.map(r,function(n){return n(e)})}:function(e){return i.$and(e,function(e){return o.map(r,function(n){return n(e)})})}):(console.log("no expression found for ",n),!1)}return{filter:n,filterAll:t,applyFilters:a,makeFunction:p,scanForDynamicFilters:f}}},{"./aggregation":63,"./expressions":69,"./lodash":71,q:20}],71:[function(e,n,t){"use strict";function r(e){e=e||{};for(var n=1;n<arguments.length;n++)if(arguments[n])for(var t in arguments[n])arguments[n].hasOwnProperty(t)&&(e[t]=arguments[n][t]);return e}function o(e,n){return e.find(n)}function i(e,n){return e.filter(function(t,r){var o=n(t);return!!o&&(e.splice(r,1),!0)})}function u(e){return Array.isArray(e)}function s(e){return"object"==typeof e&&!u(e)}function a(e){return"boolean"==typeof e}function c(e){return"string"==typeof e}function f(e){return"number"==typeof e}function l(e){return"function"==typeof e}function p(e,n){return u(n)&&(n=n.join(".")),n.replace("[",".").replace("]","").split(".").reduce(function(e,n){return e[n]},e)}function d(e,n,t){if("string"==typeof n&&(n=n.replace("[",".").replace("]","").split(".")),n.length>1){var o=n.shift();r(e[o]="[object Object]"===Object.prototype.toString.call(e[o])?e[o]:{},n,t)}else e[n[0]]=t}function v(e,n){var t,r;if(l(n)){if(s(e)){t=[];for(r in e)e.hasOwnProperty(r)&&t.push(n(e[r],r,e));return t}return e.map(n)}if(s(e)){t=[];for(r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}return e.map(function(e){return e[n]})}function h(e){return Object.keys(e)}function m(e,n){if(l(n))return e.sort(function(e,t){return n(e)>n(t)?1:n(e)<n(t)?-1:0})}function y(e,n){if(s(e))for(var t in e)e.hasOwnProperty(t)&&n(e[t],t,e);else if(u(e))return e.forEach(n)}function g(e){return"undefined"==typeof e}function b(e,n){var t={};return y(n,function(n){"undefined"!=typeof e[n]&&(t[n]=e[n])}),t}function x(e,n){var t=[];return y(e,function(e){if(n.indexOf(e)===-1)return t.push(e)}),y(n,function(n){if(e.indexOf(n)===-1)return t.push(n)}),t}function j(e){return JSON.parse(JSON.stringify(e,function(e,n){return"function"==typeof n?n.toString():n}))}function w(e,n){if("object"==typeof e&&null!==e&&"object"==typeof n&&null!==n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var t in e)return n.hasOwnProperty(t)&&!w(e[t],n[t]),!1;return!0}return e===n}function k(e,n){var t=e.length,r=n.length;return t>r?e.splice(r,t-r):t<r&&e.push.apply(e,new Array(r-t)),y(e,function(t,r){e[r]=n[r]}),e}function A(e){var n=new Set;return e.filter(function(e){var t=!1;return n.has(e)||(n.add(e),t=!0),t})}function O(e){for(var n=[],t=0;t<e.length;++t)for(var r=e[t],o=0;o<r.length;++o)n.push(r[o]);return n}function _(e){for(var n=1;n<e.length;n++){for(var t=e[n],r=n;e[r-1]>t;)e[r]=e[r-1],--r;e[r]=t}return e}function S(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n}function L(e,n){function t(e,r){for(var o in e){var i=j(r);if(i.push(o),"object"==typeof e[o]&&null!==e[o])t(e[o],i);else{if(!e.hasOwnProperty(o))continue;n(e[o],o,i)}}}return t(e,[]),e}n.exports={assign:r,find:o,remove:i,isArray:u,isObject:s,isBoolean:a,isString:c,isNumber:f,isFunction:l,get:p,set:d,map:v,keys:h,sortBy:m,forEach:y,isUndefined:g,pick:b,xor:x,clone:j,isEqual:w,replaceArray:k,uniq:A,flatten:O,sort:_,values:S,recurseObject:L}},{}],72:[function(e,n,t){"use strict";function r(e){return e.locked?i.clone(e.data):e.data}var o=e("q"),i=e("./lodash"),u=e("./aggregation");n.exports=function(){function e(e,n,t){return e.data=r(n),o.resolve(t(e,n))}function n(e,n,t){e.data=r(n),e.data=i.sortBy(e.data,function(e){return e.key}),t&&e.data.reverse()}function t(e,n,t,o){e.data=r(n),i.isUndefined(o)?(o=t||0,t=0):(t=t||0,o=o||e.data.length),e.data=e.data.splice(t,o-t)}function s(e,n,t,o,s,a){e.data=r(n),t=t||0,o=o||e.data.length;var c=e.data.splice(t,o-t),f={key:a||"Other",value:{}};i.recurseObject(s,function(e,n,t){var r=[];i.forEach(c,function(e){r.push(i.get(e.value,t))}),i.set(f.value,t,u.aggregators[e](r))}),e.data.splice(t,0,f)}function a(e,n,t,o,u){e.data=r(n),t=t||0,o=o||e.data.length;var s={key:[e.data[t].key,e.data[o].key],value:{}};i.recurseObject(u,function(n,r,u){var a=i.clone(u);a.pop(),a.push(r+"Change"),i.set(s.value,a,i.get(e.data[o].value,u)-i.get(e.data[t].value,u))}),e.data=s}function c(e,n,t,o){o=i.isUndefined(o)?0:o,e.data=r(n),i.recurseObject(t,function(n,t,r){var u=i.clone(r),s=i.clone(r),a=i.clone(r);u.pop(),s.pop(),a.pop(),u.push(t+"Change"),s.push(t+"ChangeFromStart"),a.push(t+"ChangeFromEnd");var c=i.get(e.data[0].value,r,o),f=i.get(e.data[e.data.length-1].value,r,o);i.forEach(e.data,function(n,t){var l=e.data[t-1]||e.data[0];i.set(e.data[t].value,u,i.get(n.value,r,o)-(l?i.get(l.value,r,o):o)),i.set(e.data[t].value,s,i.get(n.value,r,o)-c),i.set(e.data[t].value,a,i.get(n.value,r,o)-f)})})}return{post:e,sortByKey:n,limit:t,squash:s,change:a,changeMap:c}}},{"./aggregation":63,"./lodash":71,q:20}],73:[function(e,n,t){"use strict";function r(e){var n,t=new Error;return i.forEach(e,function(e,r){var i,s=e.success||e,a=e.fail,c=e.notify;if(n)i=n.then(function(e){if(!s)return e;var n=s(e);if(!u(n))throw t.message="Task "+r+" did not return a promise.",t;return n},function(e){if(!a)return o.reject(e);var n=a(e);if(!u(n))throw t.message="Fail for task "+r+" did not return a promise.",t;return n},c);else if(i=s(),!u(i))throw t.message="Task "+r+" did not return a promise.",t;n=i}),n||o.when()}var o=e("q"),i=e("./lodash");o.serial=r;var u=function(e){return e&&i.isFunction(e.then)}},{"./lodash":71,q:20}],74:[function(e,n,t){"use strict";var r=e("q"),o=e("./lodash");n.exports=function(n){var t=e("./reductiofy")(n),i=e("./filters")(n),u=e("./postAggregation")(n),s=o.keys(u);return function(e){function a(e){return n.column({key:e.original.groupBy,type:o.isUndefined(e.type)?null:e.type,array:Boolean(e.array)}).then(function(){var t=n.column.find(e.original.groupBy);return e.column=t,t.queries.push(e),t.removeListeners.push(function(){return e.clear()}),e})}function c(e){return r.resolve(e.column.dimension.group()).then(function(n){return e.group=n,e})}function f(e){var t=i.scanForDynamicFilters(e.original);return t.length?r.all(o.map(t,function(t){return n.column({key:t,dynamicReference:e.group})})).then(function(){return e}):e}function l(e){var t=n.onDataChange(function(){return p(e)});e.removeListeners.push(t);var r=n.onFilter(function(){return m(e)});return e.removeListeners.push(r),e}function p(e){return d(e).then(v).then(h).then(m)}function d(e){return t(e.original).then(function(n){return e.reducer=n,e})}function v(e){return r.resolve(e.reducer(e.group)).then(function(){return e})}function h(e){return r.resolve(e.group.all()).then(function(n){return e.data=n,e})}function m(e){return e.postAggregations.length>1&&(e.locked=!0),r.all(o.map(e.postAggregations,function(e){return e()})).then(function(){return e})}function y(e,t){function i(n){return o.isUndefined(n)?void(e.locked=!0):void(e.locked=Boolean(n))}function a(){e.locked=!1}function c(){return o.forEach(e.removeListeners,function(e){e()}),r["try"](function(){return e.group.dispose()}).then(function(){if(e.column.queries.splice(e.column.queries.indexOf(e),1),!e.column.queries.length)return n.clear(e.column.key)}).then(function(){return n})}function f(n){return function(){function t(){return m(i).then(function(){return i})}var o=Array.prototype.slice.call(arguments),i={};return y(i,e),o.unshift(i,e),e.postAggregations.push(function(){r.resolve(n.apply(null,o)).then(t)}),r.resolve(n.apply(null,o)).then(t)}}var l=!1;return t||(t=e,e={},l=!0),o.assign(e,{universe:n,crossfilter:n.cf,parent:t,column:t.column,dimension:t.dimension,group:t.group,reducer:t.reducer,original:t.original,hash:t.hash,removeListeners:[],postAggregations:[],locked:l,lock:i,unlock:a,clear:c}),o.forEach(s,function(n){e[n]=f(u[n])}),e}for(var g=JSON.stringify(e),b=0;b<n.columns.length;b++)for(var x=0;x<n.columns[b].queries.length;x++)if(n.columns[b].queries[x].hash===g)return r["try"](function(){return n.columns[b].queries[x]});var j={original:e,hash:g};return o.isUndefined(j.original)&&(j.original={}),o.isUndefined(j.original.select)&&(j.original.select={$count:!0}),j.original.groupBy=j.original.groupBy||!0,j=y(j),a(j).then(c).then(f).then(l).then(p)}}},{"./filters":70,"./lodash":71,"./postAggregation":72,"./reductiofy":76,q:20}],75:[function(e,n,t){"use strict";function r(e){return e.count(!0)}function o(e,n){return e.sum(n)}function i(e,n){return e.avg(n)}function u(e,n){return e.min(n)}function s(e,n){return e.max(n)}function a(e,n){return e.median(n)}function c(e,n){return e.sumOfSq(n)}function f(e,n){return e.std(n)}function l(e,n){return e.valueList(n)}function p(e){return e.dataList(!0)}n.exports={shorthandLabels:{$count:"count",$sum:"sum",$avg:"avg",$min:"min",$max:"max",$med:"med",$sumSq:"sumSq",$std:"std"},aggregators:{$count:r,$sum:o,$avg:i,$min:u,$max:s,$med:a,$sumSq:c,$std:f,$valueList:l,$dataList:p}}},{}],76:[function(e,n,t){"use strict";var r=e("reductio"),o=e("./lodash"),i=e("./reductioAggregators"),u=e("./aggregation");n.exports=function(n){var t=e("./filters")(n);return function(e){function n(e,t){var r=o.sortBy(o.map(t,function(e,n){return{key:n,value:e}}),function(e){return i.aggregators[e.key]?0:1});return o.forEach(r,function(t){if(i.aggregators[t.key]){var r=u.makeValueAccessor(t.value);return void(e=i.aggregators[t.key](e,r))}return o.isObject(t.value)?void(e=n(e.value(t.key),t.value)):void console.error("Nested selects must be an object",t.key)})}var s=r();if(n(s,e.select),e.filter){var a=t.makeFunction(e.filter);a&&s.filter(a)}return Promise.resolve(s)}}},{"./aggregation":63,"./filters":70,"./lodash":71,"./reductioAggregators":75,reductio:56}],77:[function(e,n,t){"use strict";function r(n,t){function r(e){return u.dataListeners.push(e),function(){u.dataListeners.splice(u.dataListeners.indexOf(e),1)}}function i(e){return u.filterListeners.push(e),function(){u.filterListeners.splice(u.filterListeners.indexOf(e),1)}}var u={options:o.assign({},t),columns:[],filters:{},dataListeners:[],filterListeners:[]},s=e("./crossfilter")(u),a=e("./filters")(u);return n=s.generateColumns(n),s.build(n).then(function(n){return u.cf=n,o.assign(u,{add:s.add,remove:s.remove,column:e("./column")(u),query:e("./query")(u),filter:a.filter,filterAll:a.filterAll,clear:e("./clear")(u),destroy:e("./destroy")(u),onDataChange:r,onFilter:i})})}e("./q.serial");var o=e("./lodash");n.exports=r},{"./clear":64,"./column":65,"./crossfilter":66,"./destroy":67,"./filters":70,"./lodash":71,"./q.serial":73,"./query":74}]},{},[77])(77)});