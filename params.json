{"name":"Universe","tagline":"The fastest way to query and explore multivariate datasets","body":"# Universe\r\n[![Join the chat at https://gitter.im/crossfilter/universe](https://badges.gitter.im/crossfilter/universe.svg)](https://gitter.im/crossfilter/universe?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\r\n\r\n[![Build Status](https://travis-ci.org/crossfilter/universe.svg?branch=master)](https://travis-ci.org/crossfilter/universe) [![Code Climate](https://codeclimate.com/github/crossfilter/universe/badges/gpa.svg)](https://codeclimate.com/github/crossfilter/universe)\r\n\r\n## The easiest and fastest way to explore your data\r\nBefore Universe, exploring and filtering large datasets in javascript meant constant data looping, complicated indxing, and countless lines of code to dissect your data.\r\n\r\nWith Universe, you can be there in just a few lines of code. You've got better things to do than write intense map-reduce functions or learn the intricate inner-workings of [Crossfilter](https://github.com/crossfilter/crossfilter) ;)\r\n\r\n## Features\r\n- Simple, yet powerful query syntax\r\n- Built on, and tightly integrated with  [Crossfilter](https://github.com/crossfilter/crossfilter), and [Reductio](https://github.com/crossfilter/reductio) - the fastest multi-dimensional JS data frameworks available\r\n- Real-time updates to query results as you filter\r\n- Flexible filtering system\r\n- Automatic and invisible management of data indexing and memory\r\n\r\n## Demos\r\n\r\n- [Basic Usage](http://codepen.io/tannerlinsley/pen/oxjyvg?editors=0010) (Codepen)\r\n\r\n## [API](#api)\r\n\r\n- [universe()](#api-universe)\r\n  - [.query()](#api-query)\r\n  - [.filter()](#api-filter)\r\n  - [.column()](#api-column)\r\n  - [.clear()](#api-clear)\r\n  - [.add()](#api-add)\r\n  - [.remove()](#api-remove)\r\n\r\n## Getting Started\r\n### Installation\r\n**NPM**\r\n\r\n```shell\r\nnpm install crossfilter/universe --save\r\n\r\n# the \"universe\" npm module name is still under negotiation. Stay tuned.\r\n```\r\n\r\n**Download** from the [releases](https://github.com/crossfilter/universe/releases) page. Serve the universe.js or universe.min.js file in the top-level directory as part of your application.\r\n\r\n### Create a new Universe\r\nPass `universe` an array of objects or a Crossfilter instance:\r\n\r\n```javascript\r\n\r\nvar universe = require('universe')\r\n\r\nvar myUniverse = universe([\r\n    {date: \"2011-11-14T16:17:54Z\", quantity: 2, total: 190, tip: 100, type: \"tab\", productIDs: [\"001\"]},\r\n    {date: \"2011-11-14T16:20:19Z\", quantity: 2, total: 190, tip: 100, type: \"tab\", productIDs: [\"001\",  \"005\"]},\r\n    {date: \"2011-11-14T16:28:54Z\", quantity: 1, total: 300, tip: 200, type: \"visa\", productIDs: [\"004\", \"005\"]},\r\n    ...\r\n  ])\r\n  .then(function(myUniverse){\r\n    // And now you're ready to query! :)\r\n    return myUniverse\r\n  })\r\n```\r\n\r\n### Query your data\r\n\r\n```javascript\r\n\r\n.then(function(myUniverse){\r\n  myUniverse.query({\r\n    groupBy: 'type' // GroupBy the type key\r\n    columns: {\r\n      $count: true, // Count the number of records\r\n      quantity: { // Create a custom 'quantity' column\r\n        $sum: 'quantity' // Sum the quantity column\r\n      },\r\n    },\r\n    // Limit selection to rows where quantity is greater than 50\r\n    filter: {\r\n      quantity: {\r\n        $gt: 50\r\n      }\r\n    },\r\n  })\r\n})\r\n```\r\n\r\n### Use your data\r\n\r\n```javascript\r\n.then(function(res) {\r\n  // Use your data for tables, charts, data visualiztion, etc.\r\n  res.data === [\r\n    {\"key\": \"cash\",\"value\": {\"count\": 2,\"quantity\": {\"sum\": 3}}},\r\n    {\"key\": \"tab\",\"value\": {\"count\": 8,\"quantity\": {\"sum\": 16}}},\r\n    {\"key\": \"visa\",\"value\": {\"count\": 2,\"quantity\": {\"sum\": 2}}}\r\n  ]\r\n\r\n  // Or plost the data in DC.js using the underlying crossfilter dimension and group\r\n  dc.pieChart('#chart')\r\n    .dimension(res.dimension)\r\n    .group(res.group)\r\n\r\n  // Pass the query's universe instance to keep chaining\r\n  return res.universe\r\n})\r\n```\r\n\r\n### Explore your data\r\n\r\nAs you filter your data on the universe level, every query's result is updated in real-time to reflect changes in aggregation\r\n\r\n```javascript\r\n// Filter records where 'type' === 'visa'\r\n.then(function(myUniverse) {\r\n  return myUniverse.filter('type', 'visa')\r\n})\r\n\r\n// Filter records where 'type' === 'visa' or 'tab'\r\n.then(function(myUniverse) {\r\n  return myUniverse.filter('type', ['visa', 'tab'])\r\n})\r\n\r\n// Filter records where 'total' is between 50 and 100\r\n.then(function(myUniverse) {\r\n  return myUniverse.filter('total', [50, 10], true)\r\n})\r\n\r\n// Filter records using an expressive and JSON friendly query syntax\r\n.then(function(myUniverse) {\r\n  return myUniverse.filter('total', {\r\n    $lt: { // Filter to results where total is less than\r\n      '$get(total)': { // the \"total\" property from\r\n        '$nthLast(3)': { // the 3rd to the last row from\r\n          $column: 'date' // the dataset sorted by the date column\r\n        }\r\n      }\r\n    }\r\n  })\r\n})\r\n\r\n// Or if you're feeling powerful, just write your own custom filter function\r\n.then(function(myUniverse){\r\n  return myUniverse.filter({\r\n    total: function(row){\r\n      return (row.quantity * row.sum) > 50\r\n    }\r\n  })\r\n})\r\n\r\n// Clear the filters for the 'type' column\r\n.then(function(myUniverse){\r\n  return myUniverse.filter('type')\r\n})\r\n\r\n// Clear all of the filters\r\n.then(function(myUniverse){\r\n  return myUniverse.filterAll()\r\n})\r\n```\r\n\r\n### Clean Up\r\n\r\n```javascript\r\n\r\n// Remove a column index\r\n.then(function(myUniverse){\r\n  return myUniverse.clear('total')\r\n})\r\n\r\n// Remove all columns\r\n.then(function(myUniverse){\r\n  return myUniverse.clear()\r\n})\r\n\r\n```\r\n\r\n### Pre-compile Columns\r\n\r\nPro-Tip: You can also **pre-compile** column indices before querying. Otherwise, ad-hoc indices are created and managed automagically for you anyway.\r\n\r\n```javascript\r\n.then(function(myUniverse){\r\n  return myUniverse.column('a')\r\n  return myUniverse.column(['a', 'b', 'c'])\r\n  return myUniverse.column({\r\n    key: 'd',\r\n    type: 'string' // override automatic type detection\r\n  })\r\n})\r\n```\r\n\r\n<h2 id=\"api\">API <a href=\"#api\">#</a></h2>\r\n\r\n<h3 id=\"api-universe\">universe( [data] , {config} ) <a href=\"#api-universe\">#</a></h3>\r\n\r\n- Description\r\n  - Creates a new universe instance\r\n- Parameters\r\n  - `[data]` - An array of objects\r\n  - `{config}` - Optional configurations for this Universe instance\r\n    - `{generatedColumns}` - An object of keys and their respective accessor functions used to dynamically generate columns.\r\n- Returns a `promise` that is resolved with the **universe instance**\r\n\r\n- [Example](Create a new Universe)\r\n  - Generated Columns Example\r\n    ```javascript\r\n    universe([\r\n      {day: '1', price: 30, quantity: 3},\r\n      {day: '2', price: 40, quantity: 5}\r\n    ], {\r\n      generatedColumns: {\r\n        total: function(row){return row.price * row.quantity}\r\n      }\r\n    })\r\n      .then(function(myUniverse){\r\n        // data[0].total === 90\r\n        // data[1].total === 200\r\n      })\r\n    ```\r\n\r\n<h3 id=\"api-query\">.query( {queryObject} ) <a href=\"#api-query\">#</a></h3>\r\n\r\n- Description\r\n  - Creates a new query from a universe instance\r\n- Parameters\r\n  - `queryObject`:\r\n    - `groupBy` - Exactly what it sounds like.  It groups the records by this column key\r\n    - `select` - An object of column aggregations and/or column names\r\n      - `$aggregation` - Aggregations are prefixed with a `$`\r\n      - `columnName` - Creates a nested column with the name provided\r\n    - `filter` - A filter object that is applied to the query (similar to a `where` clause in mySQL)\r\n- Returns\r\n  - `promise`, resolved with a **query results object**\r\n    - `data` - The result of the query\r\n    - `group` - The crossfilter/reductio group used to build the query\r\n    - `dimension` - The crossfilter dimension used to build the query\r\n    - `crossfilter` - The crossfilter that runs this universe\r\n    - `universe` - The current instance of the universe.  Return this to keep chaining via promises\r\n\r\n- [Example](#Explore your data)\r\n\r\n<h3 id=\"api-filter\">.filter( columnKey, filterObject, isArray, replace ) <a href=\"#api-filter\">#</a></h3>\r\n\r\n- Description\r\n  - Filters everything in the universe to only include rows that match certain conditions.  Queries automatically and instantaneously update their values and aggregations.\r\n- Parameters\r\n  - `columnKey` - The object property to filter on,\r\n- Returns\r\n  - `promise` resolved with\r\n    - **universe instance**\r\n\r\n- [Example](#Query your data)\r\n\r\n<h3 id=\"api-column\">.column( columnKey/columnObject ) <a href=\"#api-column\">#</a></h3>\r\n\r\n- Description\r\n  - Use to optionally pre-index a column. Accepts a string or number corresponding to the key or index of the column you would like to define.\r\n- Parameters\r\n  - `columnKey` - the column property or array index you would like to pre-compile eg.\r\n  ```javascript\r\n    .column('total')\r\n  ```\r\n  - `columnObject` allows you to override the column type, otherwise it is calculated automatically:\r\n  ```javascript\r\n      .column({\r\n        key: 'total',\r\n        type: 'number'\r\n      })\r\n    ```\r\n- Returns\r\n  - `promise` resolved with\r\n    - **universe instance**\r\n\r\n- [Example](#Pre-compile Columns)\r\n\r\n<h3 id=\"api-clear\">.clear( columnKey/columnObject/[columnKeys/columnObjects] ) <a href=\"#api-clear\">#</a></h3>\r\n\r\n- Description\r\n  - Clears individual or all column defenitions and indexes\r\n- Parameters\r\n  - `columnKey` - the column property or array of columns you would like to clear eg.\r\n  ```javascript\r\n    // Single Key\r\n    .clear('total')\r\n    // Complex Key\r\n    .clear({key: ['complex', 'key']})\r\n    // Multiple Single Keys\r\n    .clear(['total', 'quantity'])\r\n    // Multiple Complex Keys\r\n    .clear([{key: ['complex', 'key']}, {key: ['another', 'one']}])\r\n  ```\r\n- Returns\r\n  - `promise` resolved with\r\n    - **universe instance**\r\n\r\n- [Example](#Clean Up)\r\n\r\n<h3 id=\"api-add\">.add( [data] ) <a href=\"#api-add\">#</a></h3>\r\n\r\n- Description\r\n  - Adds additional data to a universe instance. This data will be indexed, aggregated and queries/filters immediately updated when added.\r\n- Parameters\r\n  - `[data]` - An new array of objects similar to the original dataset\r\n- Returns\r\n  - `promise` resolved with\r\n    - **universe instance**\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}